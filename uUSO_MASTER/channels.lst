C51 COMPILER V9.00   CHANNELS                                                              09/02/2014 11:13:16 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE CHANNELS
OBJECT MODULE PLACED IN channels.obj
COMPILER INVOKED BY: C:\Program Files\Keil\C51\BIN\C51.EXE proto_uso\channels.c LARGE OPTIMIZE(9,SPEED) BROWSE ORDER NOA
                    -REGS MODAB2 DEBUG OBJECTEXTEND PRINT(.\channels.lst) OBJECT(channels.obj)

line level    source

   1          #include "channels.h"
   2          
   3          
   4          //-----------------------------------
   5          volatile struct Channel xdata channels[CHANNEL_NUMBER] /*_at_ 0x20*/;
   6          //-----------------------------------
   7          void ChannelsInit(void) //using 0//инициализация структуры каналов
   8          {
   9   1              Restore_Channels_Data();
  10   1       //-----------------------------------------------------------------------
  11   1              if(channels[0].settings.set.type!=0 || channels[1].settings.set.type!=0)
  12   1              {       
  13   2                      channels[0].settings.set.modific=CHNL_ADC_FIX_16;
  14   2                      channels[0].settings.set.state_byte_1=0x40;
  15   2                      channels[0].settings.set.state_byte_2=0x1E;
  16   2                      channels[0].channel_data_calibrate=0;
  17   2                      channels[0].calibrate.cal.calibrate=0;
  18   2                      // КАНАЛ 2 - фиксированый АЦП
  19   2                      channels[1].settings.set.modific=CHNL_ADC_FIX_16;
  20   2                      channels[1].settings.set.state_byte_1=0x40;
  21   2                      channels[1].settings.set.state_byte_2=0x1E;
  22   2                      channels[1].channel_data_calibrate=0;
  23   2                      channels[1].calibrate.cal.calibrate=0;
  24   2                      // КАНАЛ 3 - фиксированый АЦП
  25   2                      channels[2].settings.set.modific=CHNL_ADC_FIX_16;
  26   2                      channels[2].settings.set.state_byte_1=0x40;
  27   2                      channels[2].settings.set.state_byte_2=0x1E;
  28   2                      channels[2].channel_data_calibrate=0;
  29   2                      channels[2].calibrate.cal.calibrate=0;
  30   2                      // КАНАЛ 4 - фиксированый АЦП
  31   2                      channels[3].settings.set.modific=CHNL_ADC_FIX_16;
  32   2                      channels[3].settings.set.state_byte_1=0x40;
  33   2                      channels[3].settings.set.state_byte_2=0x1E;
  34   2                      channels[3].channel_data_calibrate=0;
  35   2                      channels[3].calibrate.cal.calibrate=0;
  36   2                      // КАНАЛ 5 - фиксированый АЦП
  37   2                      channels[4].settings.set.modific=CHNL_ADC_FIX_16;
  38   2                      channels[4].settings.set.state_byte_1=0x40;
  39   2                      channels[4].settings.set.state_byte_2=0x1E;
  40   2                      channels[4].channel_data_calibrate=0;
  41   2                      channels[4].calibrate.cal.calibrate=0;
  42   2                      // КАНАЛ 6 - фиксированый АЦП
  43   2                      channels[5].settings.set.modific=CHNL_ADC_FIX_16;
  44   2                      channels[5].settings.set.state_byte_1=0x40;
  45   2                      channels[5].settings.set.state_byte_2=0x1E;
  46   2                      channels[5].channel_data_calibrate=0;
  47   2                      channels[5].calibrate.cal.calibrate=0;
  48   2                      // КАНАЛ 7 - фиксированый АЦП
  49   2                      channels[6].settings.set.modific=CHNL_ADC_FIX_16;
  50   2                      channels[6].settings.set.state_byte_1=0x40;
  51   2                      channels[6].settings.set.state_byte_2=0x1E;
  52   2                      channels[6].channel_data_calibrate=0;
  53   2                      channels[6].calibrate.cal.calibrate=0;
  54   2                      // КАНАЛ 8 - фиксированый АЦП
C51 COMPILER V9.00   CHANNELS                                                              09/02/2014 11:13:16 PAGE 2   

  55   2                      channels[7].settings.set.modific=CHNL_ADC_FIX_16;
  56   2                      channels[7].settings.set.state_byte_1=0x40;
  57   2                      channels[7].settings.set.state_byte_2=0x1E;
  58   2                      channels[7].channel_data_calibrate=0;
  59   2                      channels[7].calibrate.cal.calibrate=0;
  60   2                      // КАНАЛ 9 - Частотомер 0-256 Гц
  61   2                      channels[8].settings.set.state_byte_1=0x40;
  62   2                      channels[8].settings.set.state_byte_2=0x0A;
  63   2                      channels[8].calibrate.cal.calibrate=0;
  64   2                      // КАНАЛ 10 - Частотомер 0-256 Гц
  65   2                      channels[9].settings.set.state_byte_1=0x40;
  66   2                      channels[9].settings.set.state_byte_2=0x0A;
  67   2                      channels[9].calibrate.cal.calibrate=0;
  68   2                      // КАНАЛ 11 - Частотомер 0-256 Гц
  69   2                      channels[10].settings.set.state_byte_1=0x40;
  70   2                      channels[10].settings.set.state_byte_2=0x0A;
  71   2                      channels[10].calibrate.cal.calibrate=0;
  72   2                      // КАНАЛ 12 - ДОЛ I2C
  73   2                      channels[11].settings.set.state_byte_1=0x40;
  74   2                      channels[11].settings.set.state_byte_2=0x0A;
  75   2                      channels[11].calibrate.cal.calibrate=0;
  76   2                                      // КАНАЛ 13 частота
  77   2                      channels[12].settings.set.state_byte_1=0x40;
  78   2                      channels[12].settings.set.state_byte_2=0x0A;
  79   2                                      // КАНАЛ 14 частота средняя
  80   2                      channels[13].settings.set.state_byte_1=0x40;
  81   2                      channels[13].settings.set.state_byte_2=0x0A;
  82   2              }
  83   1                      
  84   1                      
  85   1                      channels[0].number=0;             
  86   1                      channels[0].settings.set.type=CHNL_ADC; 
  87   1                      channels[0].channel_data=0;
  88   1                      // КАНАЛ 2 - фиксированый АЦП
  89   1                      channels[1].number=0;
  90   1                      channels[1].settings.set.type=CHNL_ADC;
  91   1                      channels[1].channel_data=0;
  92   1                      // КАНАЛ 3 - фиксированый АЦП
  93   1                      channels[2].number=0;            
  94   1                      channels[2].settings.set.type=CHNL_ADC;
  95   1                      channels[2].channel_data=0;
  96   1                      // КАНАЛ 4 - фиксированый АЦП
  97   1                      channels[3].number=0;            
  98   1                      channels[3].settings.set.type=CHNL_ADC;
  99   1                      channels[3].channel_data=0;
 100   1                      // КАНАЛ 5 - фиксированый АЦП
 101   1                      channels[4].number=0xFF;                 
 102   1                      channels[4].settings.set.type=CHNL_ADC;
 103   1                      channels[4].channel_data=0;
 104   1                      // КАНАЛ 6 - фиксированый АЦП
 105   1                      channels[5].number=0xFF;                 
 106   1                      channels[5].settings.set.type=CHNL_ADC;
 107   1                      channels[5].channel_data=0;
 108   1                      // КАНАЛ 7 - фиксированый АЦП
 109   1                      channels[6].number=0xFF;                 
 110   1                      channels[6].settings.set.type=CHNL_ADC;
 111   1                      channels[6].channel_data=0;
 112   1                      // КАНАЛ 8 - фиксированый АЦП
 113   1                      channels[7].number=0xFF;                 
 114   1                      channels[7].settings.set.type=CHNL_ADC;
 115   1                      channels[7].channel_data=0;
 116   1                      // КАНАЛ 9 - Частотомер 0-256 Гц
C51 COMPILER V9.00   CHANNELS                                                              09/02/2014 11:13:16 PAGE 3   

 117   1                      channels[8].number=0xFF;                 
 118   1                      channels[8].settings.set.type=CHNL_FREQ;
 119   1                      channels[8].settings.set.modific=CHNL_FREQ_256;
 120   1                      channels[8].channel_data=0x0;
 121   1                      // КАНАЛ 10 - Частотомер 0-256 Гц
 122   1                      channels[9].number=0xFF;                 
 123   1                      channels[9].settings.set.type=CHNL_FREQ;
 124   1                      channels[9].settings.set.modific=CHNL_FREQ_256;
 125   1                      channels[9].channel_data=0x0;
 126   1                      // КАНАЛ 11 - Частотомер 0-256 Гц
 127   1                      channels[10].number=0xFF;                
 128   1                      channels[10].settings.set.type=CHNL_FREQ;
 129   1                      channels[10].settings.set.modific=CHNL_FREQ_256;
 130   1                      channels[10].channel_data=0x0;
 131   1                      // КАНАЛ 12 - ДОЛ I2C
 132   1                      channels[11].number=0xFF;                
 133   1                      channels[11].settings.set.type=CHNL_DOL;
 134   1                      channels[11].settings.set.modific=CHNL_DOL_ENC;
 135   1                      channels[11].channel_data=0x80008000;;
 136   1                                      // КАНАЛ 13 частота
 137   1                      channels[12].number=0;           
 138   1                      channels[12].settings.set.type=CHNL_FREQ;
 139   1                      channels[12].settings.set.modific=CHNL_FREQ_COUNT_T;
 140   1                      channels[12].channel_data=0x0;
 141   1                                      // КАНАЛ 14 частота средняя
 142   1                      channels[13].number=0;           
 143   1                      channels[13].settings.set.type=CHNL_FREQ;
 144   1                      channels[13].settings.set.modific=CHNL_FREQ_COUNT_T;
 145   1                      channels[13].channel_data=0x0;
 146   1      
 147   1              return;
 148   1      }
 149          //-----------------------------------
 150          void Store_Channels_Data(void) //using 0//Сохраним данные каналов в ППЗУ
 151          {
 152   1              unsigned char i=0;
 153   1              for(i=0;i<CHANNEL_NUMBER;i++)
 154   1              {
 155   2                      EEPROM_Write(&channels[i].settings.serialize,1,ADC_SETTINGS_ADDR+i);
 156   2              }
 157   1              return;
 158   1      }
 159          //-----------------------------------
 160          void Restore_Channels_Data(void) //using 0//Восстановим данные каналов из ППЗУ
 161          {
 162   1              unsigned char i=0;
 163   1              for(i=0;i<CHANNEL_NUMBER;i++)
 164   1              {
 165   2                      EEPROM_Read(&channels[i].settings.serialize,1,ADC_SETTINGS_ADDR+i);
 166   2              }
 167   1              return;
 168   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    631    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =    350       2
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
C51 COMPILER V9.00   CHANNELS                                                              09/02/2014 11:13:16 PAGE 4   

END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
