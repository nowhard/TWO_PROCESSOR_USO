C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 1   


C51 COMPILER V9.00, COMPILATION OF MODULE PROTO_USO
OBJECT MODULE PLACED IN proto_uso.obj
COMPILER INVOKED BY: C:\Program Files\Keil\C51\BIN\C51.EXE proto_uso\proto_uso.c LARGE OPTIMIZE(6,SPEED) BROWSE ORDER NO
                    -AREGS DEBUG OBJECTEXTEND CODE SYMBOLS PRINT(.\proto_uso.lst) OBJECT(proto_uso.obj)

line level    source

   1          #include "proto_uso.h"
   2          #include "calibrate\calibrate.h"
   3          #include "i2c.h"
   4          #include <intrins.h>
   5          #include "crc_table.h"
   6          #include "channels.h"
   7          #include "watchdog.h"
   8          //-----------------------------------------------------------------------------------
   9          
  10          sbit DE_RE=P3^5;
  11          
  12          //-----------------------------------------------------------------------------------
  13          volatile unsigned char xdata DEV_NAME[DEVICE_NAME_LENGTH_SYM] ="<<uUSO_2>>"; //имя устройства
  14          volatile unsigned char xdata NOTICE[DEVICE_DESC_MAX_LENGTH_SYM]="<-- GEOSPHERA_2012 -->";//примечание   
  15          volatile unsigned char xdata VERSION[DEVICE_VER_LENGTH_SYM] ="\x30\x30\x30\x30\x31";    // версия программы П
             -ЗУ        не больше 5 байт
  16          
  17          volatile unsigned char xdata ADRESS_DEV=0x1;
  18          
  19          volatile unsigned char xdata dev_desc_len=20;//длина описания устройства
  20          //--------------------------------global variable------------------------------------
  21          volatile unsigned char idata    RECIEVED=0;//принято
  22          volatile unsigned char xdata    recieve_count;//счетчик приемного буфера
  23          volatile unsigned char xdata    transf_count;//счетчик передаваемых байтов         
  24          volatile unsigned char xdata    buf_len;//длина передаваемого буфера
  25          
  26          //------------------------флаги ошибок--------------------------------
  27          volatile unsigned char idata  CUT_OUT_NULL;//флаг-вырезаем 0 после 0xD7
  28          volatile unsigned char xdata frame_len=0;//длина кадра, которую вытаскиваем из шестого байта кадра
  29          //--------------------------------------------------------------------
  30          volatile unsigned char xdata  RecieveBuf[MAX_LENGTH_REC_BUF]={0} ; //буфер принимаемых данных
  31          //volatile unsigned char xdata                  *TransferBuf;
  32          volatile unsigned char xdata  TransferBuf[MAX_LENGTH_TR_BUF]={0} ; //буфер передаваемых данных
  33          //--------------------------------------------------------------------
  34          volatile unsigned char xdata  STATE_BYTE=0xC0;//байт состояния устройства
  35          volatile unsigned char idata symbol=0xFF;//принятый символ
  36          
  37          volatile unsigned char xdata protocol_type=PROTO_TYPE_NEW;//тип протокола
  38          
  39          volatile struct pt pt_proto;
  40          //-----------------------------------------------------------------------------------
  41          union //объединение для конвертирования char->long
  42          {
  43                  float result_float;
  44                  unsigned char result_char[4];
  45          }
  46          sym_8_to_float;
  47          
  48          extern unsigned char idata i2c_buffer[6];
  49          extern unsigned char channel_number;//количество каналов
  50          
  51          //-----------------------------------------------------------------------------------
  52          //#pragma OT(0,Speed)
  53          void UART_ISR(void) interrupt 4 //using 1
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 2   

  54          {       
  55   1              EA=0;   //запрет прерывания
  56   1              
  57   1              if(RI)
  58   1              {
  59   2                      RI=0; 
  60   2      //----------------------обрабатываем возможные ошибки длины кадра-------------
  61   2                      if(recieve_count>MAX_LENGTH_REC_BUF)    //если посылка слишком длинная
  62   2                      {
  63   3                              PT_RESTART_OUT(pt_proto);  //внепроцессный рестарт
  64   3                              return;
  65   3                      } 
  66   2      
  67   2      
  68   2                      symbol=SBUF;
  69   2                      wdt_count[Proto_Proc].process_state=RUN;
  70   2                      switch(symbol)
  71   2                      {
  72   3                              case (char)(0xD7):
  73   3                              {
  74   4                                      RecieveBuf[recieve_count]=symbol;
  75   4                                      recieve_count++;
  76   4                                      CUT_OUT_NULL=1;          
  77   4                              }
  78   3                              break;
  79   3      
  80   3                              case (char)(0x29):
  81   3                              {
  82   4                                      if(CUT_OUT_NULL==1)
  83   4                                      {
  84   5                                              RecieveBuf[0]=0x0;
  85   5                                              RecieveBuf[1]=0xD7;
  86   5                                              RecieveBuf[2]=0x29;
  87   5                                              recieve_count=0x3;
  88   5                                              protocol_type=PROTO_TYPE_NEW;                   
  89   5                                      }
  90   4                                      else
  91   4                                      {
  92   5                                              RecieveBuf[recieve_count]=symbol;
  93   5                                              recieve_count++;        
  94   5                                      }
  95   4                                      CUT_OUT_NULL=0;
  96   4                              }
  97   3                              break;
  98   3      
  99   3                              case (char)(0x28):
 100   3                              {
 101   4                                      if(CUT_OUT_NULL==1)
 102   4                                      {
 103   5                                              RecieveBuf[0]=0x0;
 104   5                                              RecieveBuf[1]=0xD7;
 105   5                                              RecieveBuf[2]=0x28;
 106   5                                              recieve_count=0x3;
 107   5                                              protocol_type=PROTO_TYPE_OLD;                   
 108   5                                      }
 109   4                                      else
 110   4                                      {
 111   5                                              RecieveBuf[recieve_count]=symbol;
 112   5                                              recieve_count++;        
 113   5                                      }
 114   4                                      CUT_OUT_NULL=0;
 115   4                              }
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 3   

 116   3                              break;
 117   3      
 118   3                              case (char)(0x0):
 119   3                              {
 120   4                                      if(CUT_OUT_NULL==1)       //если после 0xD7-пропускаем
 121   4                                      {
 122   5                                              CUT_OUT_NULL=0;         
 123   5                                      }
 124   4                                      else
 125   4                                      {
 126   5                                              RecieveBuf[recieve_count]=symbol;
 127   5                                              recieve_count++;        
 128   5                                      }
 129   4                              }
 130   3                              break;
 131   3      
 132   3                              default :
 133   3                              {
 134   4                                      RecieveBuf[recieve_count]=symbol;
 135   4                                      recieve_count++;
 136   4                                      CUT_OUT_NULL=0;
 137   4                                      
 138   4                              }
 139   3                      }
 140   2      
 141   2                 if(recieve_count>6)
 142   2                 {
 143   3                                if(recieve_count==6+frame_len)          // принимаем указанное в frame_len число байт данные, 6 значит чт
             -о обмен идет с компом, надо ставаить 5 чтобы обмениваться с устройствами
 144   3                                {
 145   4                                              RECIEVED=1;//буфер принят
 146   4                                              ES=0;
 147   4                                              REN=0;  //recieve disable -запрещаем принимать в буфер  
 148   4                                              CUT_OUT_NULL=0;                                                 
 149   4                                }       
 150   3                 }
 151   2                 else
 152   2                 {
 153   3                                 if(recieve_count==6)
 154   3                                 {     
 155   4                                      
 156   4                                              frame_len=RecieveBuf[recieve_count-1];  // получаем длину данных после заголовка
 157   4                                              if(protocol_type==PROTO_TYPE_OLD)
 158   4                                              {
 159   5                                                      frame_len&=0x1F;//в старом протоколе только 5 младших бит -длина оставшейся части       
 160   5                                              }                                        
 161   4                                 }                    
 162   3                 }                                                                            
 163   2              }
 164   1      //----------------------------передача----------------------------------------------------------------
 165   1              if(TI)
 166   1              {
 167   2                      TI=0;
 168   2                       
 169   2                      if(transf_count<buf_len)
 170   2                      {
 171   3                              if((transf_count<3)||(protocol_type==PROTO_TYPE_OLD))//передаем заголовок или все подряд, если старый п
             -ротокол
 172   3                              {
 173   4                                      SBUF=TransferBuf[transf_count];                 
 174   4                                      transf_count++;
 175   4                              }
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 4   

 176   3                              else   //тело...   подставляем 0 после 0xD7
 177   3                              {
 178   4                                              if(CUT_OUT_NULL==0)
 179   4                                              {
 180   5                                                      if(TransferBuf[transf_count]==(unsigned char)0xD7)//проверим, это  ,0xD7 или другое
 181   5                                                      {                       
 182   6                                                              CUT_OUT_NULL=0x1;       
 183   6                                                      }
 184   5                                                      SBUF=TransferBuf[transf_count];                 
 185   5                                                      transf_count++;
 186   5                                              }
 187   4                                              else
 188   4                                              {
 189   5                                                      SBUF=(unsigned char)0x0;
 190   5                                                      CUT_OUT_NULL=0;         
 191   5                                              }       
 192   4                              }       
 193   3                      }
 194   2                      else
 195   2                      {
 196   3                              transf_count=0;         //обнуляем счетчик
 197   3                              CUT_OUT_NULL=0;
 198   3                              PT_RESTART_OUT(pt_proto);  //внепроцессный рестарт                      
 199   3                      }                                          
 200   2              }                       
 201   1              EA=1;
 202   1              return;
 203   1      }
 204          //------------------------------------------------------------------------------
 205          //#pragma OT(6,Speed)
 206          void Protocol_Init(void) //using 0
 207          {
 208   1              TI=0;
 209   1              RI=0;
 210   1              
 211   1      //      TransferBuf=&RecieveBuf[0];      //буфер ответа =буфер запроса
 212   1      
 213   1              Restore_Dev_Address_Desc();
 214   1      
 215   1      
 216   1              recieve_count=0x0;//счетчик буфера приема
 217   1              transf_count=0x0;//счетчик передаваемых байтов
 218   1              buf_len=0x0;//длина передаваемого буфера
 219   1              DE_RE=0;//линия на прием
 220   1              CUT_OUT_NULL=0;
 221   1              STATE_BYTE=0xC0;
 222   1              PT_INIT(&pt_proto);
 223   1              return;
 224   1      }
 225          //-----------------------------------------------------------------------------
 226          unsigned char Send_Info(void) //using 0    //посылка информации об устройстве
 227          {
 228   1                  unsigned char    i=0;
 229   1                                                                                      
 230   1                 //заголовок кадра---
 231   1                 TransferBuf[0]=0x00;
 232   1                 TransferBuf[1]=0xD7;
 233   1                 TransferBuf[2]=0x29;
 234   1                 //------------------
 235   1                 TransferBuf[3]=ADRESS_DEV;  // адрес узла
 236   1                 TransferBuf[4]=GET_DEV_INFO_RESP;  // код операции
 237   1                 TransferBuf[6]=STATE_BYTE;
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 5   

 238   1      
 239   1                 for(i=0;i<20;i++)
 240   1                 {                              // записываем наименование изделия
 241   2                                 if(i<DEVICE_NAME_LENGTH_SYM)
 242   2                                 {
 243   3                                      TransferBuf[i+7]=DEV_NAME[i];
 244   3                                 }
 245   2                                 else
 246   2                                 {
 247   3                                              TransferBuf[i+7]=0x00;
 248   3                                 }
 249   2                      }
 250   1              
 251   1                 for(i=0;i<5;i++)                   // записываем версию ПЗУ
 252   1                 {
 253   2                     if(i<DEVICE_VER_LENGTH_SYM)
 254   2                         {
 255   3                               TransferBuf[i+27]=VERSION[i];
 256   3                         }
 257   2                 }
 258   1      
 259   1                 TransferBuf[32]=channel_number;                 // количество каналов
 260   1      
 261   1                 for(i=0;i<channel_number;i++)                                   // данные по каналу
 262   1             {
 263   2                              TransferBuf[i*2+33]=((channels[i].settings.set.type)<<4)|channels[i].settings.set.modific; // байт да
             -нных
 264   2                              TransferBuf[i*2+33+1]=0x00;                                                     // резерв байт
 265   2                 }    
 266   1                 for(i=0;i<dev_desc_len;i++)                                  // записываем примечание
 267   1                 {
 268   2                               TransferBuf[i+33+channel_number*2]=NOTICE[i];
 269   2                 }
 270   1                              
 271   1                 TransferBuf[5]=28+channel_number*2+dev_desc_len;                     // подсчет длины данных 
 272   1                 TransferBuf[33+channel_number*2+dev_desc_len]=CRC_Check(&TransferBuf[1],32+channel_number*2+dev_desc_l
             -en); // подсчет контрольной суммы
 273   1      
 274   1              return (34+channel_number*2+dev_desc_len);
 275   1      }
 276          //-----------------------------------------------------------------------------
 277          unsigned char Node_Full_Init(void) //using 0 //полная инициализация узла
 278          {
 279   1              return 0;
 280   1      }
 281          //-----------------------------------------------------------------------------
 282          unsigned char Channel_List_Init(void) //using 0 //Инициализация списка каналов узла (без потери данных);
 283          {
 284   1              return 0;
 285   1      }
 286          //-----------------------------------------------------------------------------
 287          unsigned char Channel_Get_Data(void) //using 0 //Выдать данные по каналам, согласно абсолютной нумерации;
 288          {
 289   1              return 0;
 290   1      }
 291          //-----------------------------------------------------------------------------
 292          unsigned char  Channel_Set_Parameters(void) //using 0 //Установить параметры по каналам, согласно абсолютн
             -ой нумерации;
 293          {
 294   1             unsigned char  index=0, store_data=0;//i=0;
 295   1               
 296   1                 while(index<RecieveBuf[5]-1)                            // данные по каналам
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 6   

 297   1                    {
 298   2                                      if(RecieveBuf[6+index]<channel_number)
 299   2                                  {
 300   3                                              switch((RecieveBuf[6+index+1]>>4)&0xF)
 301   3                                              {
 302   4                                                              case CHNL_ADC://АЦП
 303   4                                                              {
 304   5                                                                      if((channels[RecieveBuf[6+index]].settings.set.modific!=RecieveBuf[6+index+1])||(channels[RecieveB
             -uf[6+index]].settings.set.state_byte_1!=RecieveBuf[6+index+2]) || (channels[RecieveBuf[6+index]].settings.set.state_byte
             -_2!=RecieveBuf[6+index+3]))
 305   5                                                                      {  
 306   6                                                                              channels[RecieveBuf[6+index]].settings.set.state_byte_1=RecieveBuf[6+index+2];
 307   6                                                                              channels[RecieveBuf[6+index]].settings.set.state_byte_2=RecieveBuf[6+index+3];
 308   6                                                                              channels[RecieveBuf[6+index]].settings.set.modific         =RecieveBuf[6+index+1]&0xF;
 309   6                                                                              store_data=1;
 310   6                                                                              
 311   6                                                                      }
 312   5                                                                      index++;
 313   5                                                              }
 314   4                                                              break;
 315   4      
 316   4      
 317   4                                                              default :
 318   4                                                              {
 319   5                                                                      _nop_();
 320   5                                                              }                       
 321   4                                              }
 322   3                                              index=index+3;
 323   3                                      }
 324   2                                      else
 325   2                                      {
 326   3                                              return Request_Error(FR_UNATTENDED_CHANNEL);
 327   3                                      }
 328   2                        }
 329   1                 if(store_data)
 330   1                 {
 331   2                              Store_Channels_Data();  //сохраним настройки каналов в ППЗУ
 332   2                 }
 333   1      
 334   1                 return Request_Error(FR_SUCCESFUL);
 335   1      }
 336          //-----------------------------------------------------------------------------
 337          unsigned char Channel_Set_Order_Query(void) //using 0 //Задать последовательность опроса;
 338          {
 339   1              return 0;
 340   1      }
 341          //-----------------------------------------------------------------------------
 342          unsigned char Channel_Get_Data_Order(void) //using 0 //Выдать данные по каналам, согласно последовательнос
             -ти опроса;
 343          {
 344   1              return 0;
 345   1      }
 346          //-----------------------------------------------------------------------------
 347          unsigned char Channel_Set_State(void) //using 0 //Установить состояния по каналам, согласно абсолютной нум
             -ерации;
 348          {
 349   1              return 0;
 350   1      }
 351          //-----------------------------------------------------------------------------
 352          unsigned char  Channel_Get_Data_Order_M2(void) //using 0 //Выдать данные по каналам, согласно последовател
             -ьности опроса;
 353          {
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 7   

 354   1              return 0;
 355   1      }
 356          //-----------------------------------------------------------------------------
 357          unsigned char Channel_Set_Reset_State_Flags(void) //using 0 //  Установка/Сброс флагов состояния 
 358          {
 359   1              STATE_BYTE=0x40;
 360   1              i2c_buffer[0]=0x12;//сбросим флаг инициализации ведомого
 361   1              ChannelsInit();
 362   1              return  Request_Error(FR_SUCCESFUL);//ошибки нет, подтверждение
 363   1      }
 364          //-----------------------------------------------------------------------------
 365          #pragma OT(9,Speed)
 366          unsigned char Channel_All_Get_Data(void) //using 0 //Выдать информацию по всем каналам узла (расширенный р
             -ежим);
 367          {
 368   1         unsigned char data index=0,i=0;
 369   1      
 370   1      
 371   1         TransferBuf[0]=0x00;TransferBuf[1]=0xD7;TransferBuf[2]=0x29;
 372   1         TransferBuf[3]=ADRESS_DEV;  // адрес узла
 373   1         TransferBuf[4]=CHANNEL_ALL_GET_DATA_RESP;  // код операции
 374   1         TransferBuf[6]=STATE_BYTE;
 375   1      
 376   1         index=7;//длина заголовка
 377   1       
 378   1          for(i=0;i<channel_number;i++)                                  // данные по каналам
 379   1          {
 380   2                        TransferBuf[index++]=i;
 381   2                        TransferBuf[index++]=((channels[i].settings.set.type)<<4)|channels[i].settings.set.modific; // тип и м
             -одификация канала
 382   2                        switch(channels[i].settings.set.type)
 383   2                          {
 384   3                                       case CHNL_ADC:  //аналоговый канал
 385   3                                       {
 386   4                                               switch(channels[i].settings.set.modific)
 387   4                               {
 388   5                                                        case CHNL_ADC_FIX_16:
 389   5                                                        {
 390   6                                                                      if(channels[i].calibrate.cal.calibrate==1)//калиброванный
 391   6                                                                      {                                                
 392   7                                                                                      TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data_calibrate))[2];
 393   7                                                                              TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data_calibrate))[1];
 394   7                                                                      }
 395   6                                                                      else
 396   6                                                                      {
 397   7                                                                                      TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data))[2];
 398   7                                                                              TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data))[1];  
 399   7                                                                      } 
 400   6      
 401   6                                                                        
 402   6                                                                       TransferBuf[index++]=channels[i].settings.set.state_byte_1;     // первый байт состояния канала
 403   6                                               TransferBuf[index++]=channels[i].settings.set.state_byte_2;     // второй байт сос
             -тояния канала
 404   6                                                        }
 405   5                                                        break; 
 406   5      
 407   5                                                        case CHNL_ADC_FIX_24:
 408   5                                                        {
 409   6                                                              if(channels[i].calibrate.cal.calibrate==1)//калиброванный
 410   6                                                                      {                                                                                                 
 411   7                                                                                      TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data_calibrate))[3];
 412   7                                                                                      TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data_calibrate))[2];
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 8   

 413   7                                                                              TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data_calibrate))[1];
 414   7                                                                      }
 415   6                                                                      else
 416   6                                                                      {                                                                        
 417   7                                                                                      TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data))[3];
 418   7                                                                                      TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data))[2];
 419   7                                                                              TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data))[1];  
 420   7                                                                      } 
 421   6                        
 422   6                                                                        TransferBuf[index++]=channels[i].settings.set.state_byte_1;    // первый байт состояния канала
 423   6                                                TransferBuf[index++]=channels[i].settings.set.state_byte_2;    // второй байт со
             -стояния канала
 424   6                                                        }
 425   5                                                        break;
 426   5                                                }
 427   4                                        }
 428   3                                        break;
 429   3      
 430   3                                      case CHNL_DOL:   //ДОЛ
 431   3                                      {
 432   4                                                switch(channels[i].settings.set.modific)
 433   4                                            {   
 434   5                                                                case CHNL_DOL_ENC:
 435   5                                                                {
 436   6                                                                                      TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data))[3];
 437   6                                                                                      TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data))[2];
 438   6                                                                              TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data))[1];
 439   6                                                                                      TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data))[0];
 440   6                                                                                  TransferBuf[index++]=channels[i].settings.set.state_byte_1;  // первый байт состояния канала
 441   6                                                                }
 442   5                                                                break; 
 443   5                                                 }
 444   4                                      }
 445   3                                      break;
 446   3      
 447   3                                       case CHNL_FREQ: //частотный
 448   3                                       { 
 449   4                                                switch(channels[i].settings.set.modific)
 450   4                                            {   
 451   5                                                                
 452   5                                                                case CHNL_FREQ_COUNT_T:
 453   5                                                                {
 454   6                                                                                      TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data))[3];
 455   6                                                                                      TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data))[2];
 456   6                                                                                TransferBuf[index++]=channels[i].settings.set.state_byte_1;    // первый байт состояния канала
 457   6                                                                }
 458   5                                                                break;
 459   5      
 460   5                                                                case CHNL_FREQ_256:
 461   5                                                                {
 462   6                                                                                      TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data))[3];
 463   6                                                                                      TransferBuf[index++]=((unsigned char*)(&channels[i].channel_data))[2];
 464   6                                                                                  TransferBuf[index++]=channels[i].settings.set.state_byte_1;  // первый байт состояния канала
 465   6                                                                }
 466   5                                                                break; 
 467   5                                                 }
 468   4                                        }
 469   3                                        break;                 
 470   3                        }
 471   2                 }
 472   1      
 473   1                TransferBuf[5]=index+2-7;                                              // подсчет длины данных двойка это 1(байт статуса)+1(контрольная сумма
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 9   

             -)
 474   1                TransferBuf[index]=CRC_Check(&TransferBuf[1],(unsigned int)(index)-1); // подсчет кс
 475   1                return (unsigned char)(index+1);
 476   1      }
 477          //-----------------------------------------------------------------------------
 478          #pragma OT(0,Speed)
 479          unsigned char Channel_Set_Calibrate(void)//установить верхнюю или нижнюю точку калибровки
 480          {
 481   1      
 482   1              float K,C;      
 483   1      
 484   1              sym_8_to_float.result_char[0]=RecieveBuf[11];
 485   1              sym_8_to_float.result_char[1]=RecieveBuf[10];
 486   1              sym_8_to_float.result_char[2]=RecieveBuf[9];
 487   1              sym_8_to_float.result_char[3]=RecieveBuf[8];
 488   1      
 489   1              K=sym_8_to_float.result_float;
 490   1      
 491   1              sym_8_to_float.result_char[0]=RecieveBuf[15];
 492   1              sym_8_to_float.result_char[1]=RecieveBuf[14];
 493   1              sym_8_to_float.result_char[2]=RecieveBuf[13];
 494   1              sym_8_to_float.result_char[3]=RecieveBuf[12];
 495   1      
 496   1              C=sym_8_to_float.result_float;
 497   1      
 498   1              switch(RecieveBuf[7])
 499   1              {
 500   2                      case 0:
 501   2                      {
 502   3                              Calibrate(RecieveBuf[6],K,C);   
 503   3                      }
 504   2                      break;
 505   2      
 506   2                      case 1:
 507   2                      {
 508   3                              Calibrate_Set_Flag(RecieveBuf[6],RESET);
 509   3                      }
 510   2                      break;
 511   2      
 512   2                      case 2:
 513   2                      {
 514   3                              Calibrate_Set_Flag(RecieveBuf[6],SET);  
 515   3                      }
 516   2                      break;
 517   2      
 518   2                      default :
 519   2                      {
 520   3                              _nop_();
 521   3                      }
 522   2                      break;
 523   2              }
 524   1      
 525   1      
 526   1              return  Request_Error(FR_SUCCESFUL);//ошибки нет, подтверждение 
 527   1      }
 528          //------------------------------------------------------------------------------
 529          unsigned char Channel_Get_Calibrate_Value(void)//получить коэфициенты калибровки заданного канала
 530          {
 531   1         unsigned char data channel=0;
 532   1      
 533   1      
 534   1         TransferBuf[0]=0x00;TransferBuf[1]=0xD7;TransferBuf[2]=0x29;
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 10  

 535   1         TransferBuf[3]=ADRESS_DEV;  // адрес узла
 536   1         TransferBuf[4]=CHANNEL_GET_CALIBRATE_RESP;  // код операции
 537   1         TransferBuf[5]=0xB;//длина оставшейся части кадра
 538   1      
 539   1      
 540   1         channel=RecieveBuf[6];
 541   1      
 542   1         if(channel>=channel_number)
 543   1         {
 544   2                      return Request_Error(FR_COMMAND_STRUCT_ERROR);//непрвильный номер канала        
 545   2         }
 546   1      
 547   1         TransferBuf[6]=channel;
 548   1      
 549   1         TransferBuf[7]=channels[channel].calibrate.cal.calibrate;
 550   1      
 551   1         sym_8_to_float.result_float=channels[channel].calibrate.cal.K;
 552   1      
 553   1              TransferBuf[11]=sym_8_to_float.result_char[0];
 554   1              TransferBuf[10]=sym_8_to_float.result_char[1];
 555   1              TransferBuf[9]=sym_8_to_float.result_char[2];
 556   1              TransferBuf[8]=sym_8_to_float.result_char[3];
 557   1      
 558   1         sym_8_to_float.result_float=channels[channel].calibrate.cal.C;
 559   1      
 560   1              TransferBuf[15]=sym_8_to_float.result_char[0];
 561   1              TransferBuf[14]=sym_8_to_float.result_char[1];
 562   1              TransferBuf[13]=sym_8_to_float.result_char[2];
 563   1              TransferBuf[12]=sym_8_to_float.result_char[3];
 564   1      
 565   1              TransferBuf[16]=CRC_Check(&TransferBuf[1],15); // подсчет кс
 566   1              return 0x11;//17        
 567   1      }
 568          //------------------------------------------------------------------------------
 569          unsigned char Channel_Set_Address_Desc(void)//установить новый адрес устройства, имя, описание, версию про
             -шивки и комментарий
 570          {
 571   1              unsigned char  desc_len=0;
 572   1              desc_len=RecieveBuf[5]-27;
 573   1      
 574   1              if(desc_len)
 575   1              {       
 576   2                      Store_Dev_Address_Desc(RecieveBuf[6],&RecieveBuf[7],&RecieveBuf[27],&RecieveBuf[32],desc_len);
 577   2                      return    Request_Error(FR_SUCCESFUL);//ошибки нет, подтверждение
 578   2              }
 579   1              else
 580   1              {
 581   2                      return Request_Error(FR_COMMAND_STRUCT_ERROR);
 582   2              }
 583   1              return 0;
 584   1      }
 585          //-----------------------------------------------------------------------------
 586          unsigned char Channel_Set_All_Default(void)//установить настройки и калибровки каналов по умолчанию
 587          {
 588   1              Channels_Set_Default();
 589   1              Calibrate_Set_Default();
 590   1              return  Request_Error(FR_SUCCESFUL);//ошибки нет, подтверждение         
 591   1      }
 592          //-----------------------------------------------------------------------------
 593          unsigned char Request_Error(unsigned char error_code) //using 0 //      Ошибочный запрос/ответ;
 594          {
 595   1              TransferBuf[0]=0x00;TransferBuf[1]=0xD7;TransferBuf[2]=0x29;
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 11  

 596   1          TransferBuf[3]=ADRESS_DEV;  // адрес узла
 597   1          TransferBuf[7]=RecieveBuf[4]; // код сбойной команды
 598   1          TransferBuf[4]=0xFF;  // код операции
 599   1      
 600   1              TransferBuf[6]=STATE_BYTE; // байт статуса узла
 601   1          TransferBuf[8]=error_code;   
 602   1          TransferBuf[5]=0x04;          // длина данных
 603   1          TransferBuf[9]=CRC_Check(TransferBuf,9);
 604   1              return 10;
 605   1      }
 606          
 607          //-----------------------------------------------------------------------------
 608          unsigned char Old_CRC_Check(unsigned char xdata *Spool_pr,unsigned char Count_pr)
 609          {
 610   1           unsigned char crc = 0x0;
 611   1               unsigned char i=0;
 612   1      
 613   1               for(i=0;i<Count_pr;i++)
 614   1               {
 615   2                      CY=0;
 616   2                      crc+=Spool_pr[i];
 617   2                      if(CY)
 618   2                      {
 619   3                              crc++;
 620   3                      }
 621   2               }
 622   1               crc=0xFF-crc;
 623   1      
 624   1           return crc;        
 625   1      }
 626          //-----------------------------------------------------------------------------
 627          unsigned char Old_Channel_Get_Data(void)
 628          {
 629   1        unsigned char channel=0;
 630   1        unsigned char len=0;
 631   1        channel=((RecieveBuf[4]>>3)&0x1F);
 632   1        if(channel<CHANNEL_NUMBER)
 633   1        {  
 634   2                 TransferBuf[0]=0x00;TransferBuf[1]=0xD7;TransferBuf[2]=0x28;
 635   2                 TransferBuf[3]=0x0;  // 
 636   2                 TransferBuf[4]=RecieveBuf[4];
 637   2                 TransferBuf[5]=((OLD_CHANNEL_GET_DATA<<5)&0x1F)|0x3;//0x63;// код операции   
 638   2      
 639   2                              switch(channels[channel].settings.set.type)
 640   2                          {
 641   3                                       case CHNL_ADC:  //аналоговый канал
 642   3                                       {
 643   4                                               switch(channels[channel].settings.set.modific)
 644   4                               {
 645   5                                                        case CHNL_ADC_FIX_16:
 646   5                                                        {
 647   6                                                                      if(channels[channel].calibrate.cal.calibrate==1)//калиброванный
 648   6                                                                      {                                                
 649   7                                                                                      TransferBuf[6]=((unsigned char*)(&channels[channel].channel_data_calibrate))[1];
 650   7                                                                              TransferBuf[7]=((unsigned char*)(&channels[channel].channel_data_calibrate))[2];
 651   7                                                                      }
 652   6                                                                      else
 653   6                                                                      {
 654   7                                                                                      TransferBuf[6]=((unsigned char*)(&channels[channel].channel_data))[1];
 655   7                                                                              TransferBuf[7]=((unsigned char*)(&channels[channel].channel_data))[2];  
 656   7                                                                      }                                       
 657   6                                                        }
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 12  

 658   5                                                        break; 
 659   5      
 660   5                                                        case CHNL_ADC_FIX_24:
 661   5                                                        {
 662   6                                                              if(channels[channel].calibrate.cal.calibrate==1)//калиброванный
 663   6                                                                      {                                                                                                 
 664   7                                                                                      TransferBuf[channel]=((unsigned char*)(&channels[channel].channel_data_calibrate))[1];
 665   7                                                                              TransferBuf[channel]=((unsigned char*)(&channels[channel].channel_data_calibrate))[2];
 666   7                                                                      }
 667   6                                                                      else
 668   6                                                                      {                                                                        
 669   7                                                                                      TransferBuf[6]=((unsigned char*)(&channels[channel].channel_data))[1];
 670   7                                                                              TransferBuf[7]=((unsigned char*)(&channels[channel].channel_data))[2];  
 671   7                                                                      }
 672   6      
 673   6                                                        }
 674   5                                                        break;
 675   5                                                }                                       
 676   4                                        }
 677   3                                        break;
 678   3      
 679   3                                      case CHNL_DOL:   //ДОЛ
 680   3                                      {
 681   4                                                switch(channels[channel].settings.set.modific)
 682   4                                            {   
 683   5                                                                case CHNL_DOL_ENC:
 684   5                                                                {
 685   6                                                                                      TransferBuf[6]=((unsigned char*)(&channels[channel].channel_data))[2];
 686   6                                                                                      TransferBuf[7]=((unsigned char*)(&channels[channel].channel_data))[3];
 687   6      //                                                                      TransferBuf[channel]=((unsigned char*)(&channels[channel].channel_data))[0];
 688   6      //                                                                              TransferBuf[channel]=((unsigned char*)(&channels[channel].channel_data))[1];
 689   6                                                                }
 690   5                                                                break; 
 691   5                                                 }
 692   4                                      }
 693   3                                      break;
 694   3      
 695   3                                       case CHNL_FREQ: //частотный
 696   3                                       { 
 697   4                                                switch(channels[channel].settings.set.modific)
 698   4                                            {   
 699   5                                                                
 700   5                                                                case CHNL_FREQ_COUNT_T:
 701   5                                                                {
 702   6                                                                                      TransferBuf[6]=((unsigned char*)(&channels[channel].channel_data))[2];
 703   6                                                                                      TransferBuf[7]=((unsigned char*)(&channels[channel].channel_data))[3];
 704   6      
 705   6                                                                }
 706   5                                                                break;
 707   5      
 708   5                                                                case CHNL_FREQ_256:
 709   5                                                                {
 710   6                                                                                      TransferBuf[6]=((unsigned char*)(&channels[channel].channel_data))[2];
 711   6                                                                                      TransferBuf[7]=((unsigned char*)(&channels[channel].channel_data))[3];
 712   6                                                                }
 713   5                                                                break; 
 714   5                                                 }                                       
 715   4                                        }
 716   3                                        break;                 
 717   3                        }
 718   2                 
 719   2                 len=Old_Proto_Paste_Null(TransferBuf,8);
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 13  

 720   2      
 721   2                 TransferBuf[len]=Old_CRC_Check(TransferBuf,len);
 722   2                 return len+1;
 723   2         }
 724   1         return 0;    
 725   1      }
 726          //-----------------------------------------------------------------------------
 727          unsigned char Old_Channel_Get_Data_State(void)
 728          {
 729   1        unsigned char channel=0;
 730   1        unsigned char len=0;
 731   1        channel=((RecieveBuf[4]>>3)&0x1F);
 732   1        if(channel<CHANNEL_NUMBER)
 733   1        {
 734   2                 TransferBuf[0]=0x00;TransferBuf[1]=0xD7;TransferBuf[2]=0x28;
 735   2                 TransferBuf[3]=0x0;  // 
 736   2                 TransferBuf[4]=RecieveBuf[4];
 737   2                 TransferBuf[5]=((OLD_CHANNEL_GET_DATA_STATE<<5)&0x1F)|0x6;//0x66;// код операции     
 738   2      
 739   2                              switch(channels[channel].settings.set.type)
 740   2                          {
 741   3                                       case CHNL_ADC:  //аналоговый канал
 742   3                                       {
 743   4                                               switch(channels[channel].settings.set.modific)
 744   4                               {
 745   5                                                        case CHNL_ADC_FIX_16:
 746   5                                                        {
 747   6                                                                      if(channels[channel].calibrate.cal.calibrate==1)//калиброванный
 748   6                                                                      {                                                
 749   7                                                                                      TransferBuf[6]=((unsigned char*)(&channels[channel].channel_data_calibrate))[1];
 750   7                                                                              TransferBuf[7]=((unsigned char*)(&channels[channel].channel_data_calibrate))[2];
 751   7                                                                      }
 752   6                                                                      else
 753   6                                                                      {
 754   7                                                                                      TransferBuf[6]=((unsigned char*)(&channels[channel].channel_data))[1];
 755   7                                                                              TransferBuf[7]=((unsigned char*)(&channels[channel].channel_data))[2];  
 756   7                                                                      }                                       
 757   6                                                        }
 758   5                                                        break; 
 759   5      
 760   5                                                        case CHNL_ADC_FIX_24:
 761   5                                                        {
 762   6                                                              if(channels[channel].calibrate.cal.calibrate==1)//калиброванный
 763   6                                                                      {                                                                                                 
 764   7                                                                                      TransferBuf[channel]=((unsigned char*)(&channels[channel].channel_data_calibrate))[1];
 765   7                                                                              TransferBuf[channel]=((unsigned char*)(&channels[channel].channel_data_calibrate))[2];
 766   7                                                                      }
 767   6                                                                      else
 768   6                                                                      {                                                                        
 769   7                                                                                      TransferBuf[6]=((unsigned char*)(&channels[channel].channel_data))[1];
 770   7                                                                              TransferBuf[7]=((unsigned char*)(&channels[channel].channel_data))[2];  
 771   7                                                                      }
 772   6      
 773   6                                                        }
 774   5                                                        break;
 775   5                                                }
 776   4                                                
 777   4                                                switch(channels[channel].settings.set.state_byte_1&0x7)
 778   4                                                {
 779   5                                                              case PROTO_ADC_AMP_1:
 780   5                                                              {
 781   6                                                                      TransferBuf[8]=(0x00|(OLD_PROTO_ADC_AMP_1<<1))&0xFE;     // первый байт состояния канала
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 14  

 782   6                                                              }
 783   5                                                              break;
 784   5      
 785   5                                                              case PROTO_ADC_AMP_2:
 786   5                                                              {
 787   6                                                                      TransferBuf[8]=(0x00|(OLD_PROTO_ADC_AMP_2<<1))&0xFE;     // первый байт состояния канала        
 788   6                                                              }
 789   5                                                              break;
 790   5      
 791   5                                                              case PROTO_ADC_AMP_32:
 792   5                                                              {
 793   6                                                                      TransferBuf[8]=(0x00|(OLD_PROTO_ADC_AMP_32<<1))&0xFE;    // первый байт состояния канала        
 794   6                                                              }
 795   5                                                              break;
 796   5      
 797   5                                                              case PROTO_ADC_AMP_128:
 798   5                                                              {
 799   6                                                                      TransferBuf[8]=(0x00|(OLD_PROTO_ADC_AMP_128<<1))&0xFE;   // первый байт состояния канала
 800   6                                                              }
 801   5                                                              break;
 802   5      
 803   5                                                              default :
 804   5                                                              {
 805   6                                                                      TransferBuf[8]=(0x00|(OLD_PROTO_ADC_AMP_1<<1))&0xFE;     // первый байт состояния канала
 806   6                                                              }
 807   5                                                              break;
 808   5                                                }
 809   4                                                
 810   4                                                TransferBuf[9]=0x0A;   // второй байт состояния канала
 811   4      
 812   4                                        }
 813   3                                        break;
 814   3      
 815   3                                case CHNL_DOL:         //ДОЛ
 816   3                                {
 817   4                                        switch(channels[channel].settings.set.modific)
 818   4                                    {   
 819   5                                                        case CHNL_DOL_ENC:
 820   5                                                        {
 821   6                                                                      TransferBuf[6]=((unsigned char*)(&channels[channel].channel_data))[2];
 822   6                                                                      TransferBuf[7]=((unsigned char*)(&channels[channel].channel_data))[3];
 823   6      //                                                                      TransferBuf[channel]=((unsigned char*)(&channels[channel].channel_data))[0];
 824   6      //                                                                              TransferBuf[channel]=((unsigned char*)(&channels[channel].channel_data))[1];
 825   6      
 826   6                                                                      
 827   6      
 828   6                                                                      switch(channels[channel].settings.set.state_byte_1&0x7)
 829   6                                                                      {
 830   7                                                                                      case PROTO_ADC_AMP_1:
 831   7                                                                                      {
 832   8                                                                                              TransferBuf[8]=(0x40|(OLD_PROTO_ADC_AMP_1<<1))&0xFE;     // первый байт состояния канала
 833   8                                                                                      }
 834   7                                                                                      break;
 835   7                              
 836   7                                                                                      case PROTO_ADC_AMP_2:
 837   7                                                                                      {
 838   8                                                                                              TransferBuf[8]=(0x40|(OLD_PROTO_ADC_AMP_2<<1))&0xFE;     // первый байт состояния канала        
 839   8                                                                                      }
 840   7                                                                                      break;
 841   7                              
 842   7                                                                                      case PROTO_ADC_AMP_32:
 843   7                                                                                      {
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 15  

 844   8                                                                                              TransferBuf[8]=(0x40|(OLD_PROTO_ADC_AMP_32<<1))&0xFE;    // первый байт состояния канала        
 845   8                                                                                      }
 846   7                                                                                      break;
 847   7                              
 848   7                                                                                      case PROTO_ADC_AMP_128:
 849   7                                                                                      {
 850   8                                                                                              TransferBuf[8]=(0x40|(OLD_PROTO_ADC_AMP_128<<1))&0xFE;   // первый байт состояния канала
 851   8                                                                                      }
 852   7                                                                                      break;
 853   7                              
 854   7                                                                                      default :
 855   7                                                                                      {
 856   8                                                                                              TransferBuf[8]=(0x40|(OLD_PROTO_ADC_AMP_1<<1))&0xFE;
 857   8                                                                                      }
 858   7                                                                                      break;                  
 859   7                                                                      }
 860   6                                                                      TransferBuf[9]=0x00;     // второй байт состояния канала
 861   6                                                        }
 862   5                                                        break; 
 863   5                                                 }
 864   4                                      }
 865   3                                      break;
 866   3      
 867   3                                       case CHNL_FREQ: //частотный
 868   3                                       { 
 869   4                                                switch(channels[channel].settings.set.modific)
 870   4                                            {   
 871   5                                                                
 872   5                                                                case CHNL_FREQ_COUNT_T:
 873   5                                                                {
 874   6                                                                                      TransferBuf[6]=((unsigned char*)(&channels[channel].channel_data))[2];
 875   6                                                                                      TransferBuf[7]=((unsigned char*)(&channels[channel].channel_data))[3];
 876   6      
 877   6                                                                }
 878   5                                                                break;
 879   5      
 880   5                                                                case CHNL_FREQ_256:
 881   5                                                                {
 882   6                                                                                      TransferBuf[6]=((unsigned char*)(&channels[channel].channel_data))[2];
 883   6                                                                                      TransferBuf[7]=((unsigned char*)(&channels[channel].channel_data))[3];
 884   6                                                                }
 885   5                                                                break; 
 886   5                                                 }
 887   4                                                 
 888   4                                              TransferBuf[8]=0x40;     // первый байт состояния канала
 889   4                                      TransferBuf[9]=0x00;     // второй байт состояния канала
 890   4                                        }
 891   3                                        break;                 
 892   3                        }
 893   2      
 894   2                 TransferBuf[10]=0xFF;
 895   2      
 896   2                 len=Old_Proto_Paste_Null(TransferBuf,11);
 897   2      
 898   2                 TransferBuf[len]=Old_CRC_Check(TransferBuf,len);
 899   2                 return len+1;
 900   2         }
 901   1         return 0;
 902   1      
 903   1      }
 904          //-----------------------------------------------------------------------------
 905          unsigned char Old_Channel_Get_State(void)
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 16  

 906          {
 907   1        unsigned char channel=0;
 908   1        unsigned char len=0;
 909   1        channel=((RecieveBuf[4]>>3)&0x1F);
 910   1        if(channel<CHANNEL_NUMBER)
 911   1        {
 912   2        
 913   2                 TransferBuf[0]=0x00;TransferBuf[1]=0xD7;TransferBuf[2]=0x28;
 914   2                 TransferBuf[3]=0x0;  // 
 915   2                 TransferBuf[4]=RecieveBuf[4];
 916   2                 TransferBuf[5]=((OLD_CHANNEL_GET_STATE<<5)&0x1F)|0x3;//0x43;// код операции  
 917   2      
 918   2                              switch(channels[channel].settings.set.type)
 919   2                          {
 920   3                                       case CHNL_ADC:  //аналоговый канал
 921   3                                       {                
 922   4                                                switch(channels[channel].settings.set.state_byte_1&0x7)
 923   4                                                {
 924   5                                                              case PROTO_ADC_AMP_1:
 925   5                                                              {
 926   6                                                                      TransferBuf[6]=0x00|(OLD_PROTO_ADC_AMP_1<<1);    // первый байт состояния канала
 927   6                                                              }
 928   5                                                              break;
 929   5      
 930   5                                                              case PROTO_ADC_AMP_2:
 931   5                                                              {
 932   6                                                                      TransferBuf[6]=0x00|(OLD_PROTO_ADC_AMP_2<<1);    // первый байт состояния канала        
 933   6                                                              }
 934   5                                                              break;
 935   5      
 936   5                                                              case PROTO_ADC_AMP_32:
 937   5                                                              {
 938   6                                                                      TransferBuf[6]=0x00|(OLD_PROTO_ADC_AMP_32<<1);   // первый байт состояния канала        
 939   6                                                              }
 940   5                                                              break;
 941   5      
 942   5                                                              case PROTO_ADC_AMP_128:
 943   5                                                              {
 944   6                                                                      TransferBuf[6]=0x00|(OLD_PROTO_ADC_AMP_128<<1);  // первый байт состояния канала
 945   6                                                              }
 946   5                                                              break;
 947   5      
 948   5                                                              default :
 949   5                                                              {
 950   6                                                                      TransferBuf[6]=0x00|(OLD_PROTO_ADC_AMP_1<<1);    // первый байт состояния канала
 951   6                                                              }
 952   5                                                              break;
 953   5                                                }
 954   4                                                
 955   4                                                TransferBuf[7]=0x0A;   // второй байт состояния канала
 956   4                                        }
 957   3                                        break;
 958   3      
 959   3                                      case CHNL_DOL:   //ДОЛ
 960   3                                      {
 961   4      
 962   4                                                      switch(channels[channel].settings.set.state_byte_1&0x7)
 963   4                                                      {
 964   5                                                                      case PROTO_ADC_AMP_1:
 965   5                                                                      {
 966   6                                                                              TransferBuf[6]=0x40|(OLD_PROTO_ADC_AMP_1<<1);    // первый байт состояния канала
 967   6                                                                      }
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 17  

 968   5                                                                      break;
 969   5              
 970   5                                                                      case PROTO_ADC_AMP_2:
 971   5                                                                      {
 972   6                                                                              TransferBuf[6]=0x40|(OLD_PROTO_ADC_AMP_2<<1);    // первый байт состояния канала        
 973   6                                                                      }
 974   5                                                                      break;
 975   5              
 976   5                                                                      case PROTO_ADC_AMP_32:
 977   5                                                                      {
 978   6                                                                              TransferBuf[6]=0x40|(OLD_PROTO_ADC_AMP_32<<1);   // первый байт состояния канала        
 979   6                                                                      }
 980   5                                                                      break;
 981   5              
 982   5                                                                      case PROTO_ADC_AMP_128:
 983   5                                                                      {
 984   6                                                                              TransferBuf[6]=0x40|(OLD_PROTO_ADC_AMP_128<<1);  // первый байт состояния канала
 985   6                                                                      }
 986   5                                                                      break;
 987   5              
 988   5                                                                      default :
 989   5                                                                      {
 990   6                                                                              TransferBuf[6]=0x40;     // первый байт состояния канала
 991   6                                                                      }
 992   5                                                                      break;
 993   5              
 994   5                                                      }
 995   4                                                      TransferBuf[7]=0x00;     // второй байт состояния канала
 996   4                                      }
 997   3                                      break;
 998   3      
 999   3                                       case CHNL_FREQ: //частотный
1000   3                                       { 
1001   4                                                 
1002   4                                              TransferBuf[6]=0x40;     // первый байт состояния канала
1003   4                                      TransferBuf[7]=0x00;     // второй байт состояния канала
1004   4                                       }
1005   3                                       break;          
1006   3                        }
1007   2                 
1008   2                 len=Old_Proto_Paste_Null(TransferBuf,8);
1009   2      
1010   2                 TransferBuf[len]=Old_CRC_Check(TransferBuf,len);
1011   2                 return len+1;
1012   2         }
1013   1         return 0;    
1014   1      }
1015          //-----------------------------------------------------------------------------
1016          unsigned char Old_Reinit_Block(void)
1017          {
1018   1              return 0;       
1019   1      }
1020          //-----------------------------------------------------------------------------
1021          unsigned char Old_Channel_Set_ADC_Range(void)
1022          {
1023   1        unsigned char channel=0;
1024   1        channel=((RecieveBuf[4]>>3)&0x1F);
1025   1        if(channel<CHANNEL_NUMBER)
1026   1        {     
1027   2              switch((RecieveBuf[6]>>1)&0x3)
1028   2              {
1029   3                              case OLD_PROTO_ADC_AMP_1:
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 18  

1030   3                              {
1031   4                                   channels[channel].settings.set.state_byte_1&=0xF0;
1032   4                                       channels[channel].settings.set.state_byte_1|=PROTO_ADC_AMP_1;
1033   4                              }
1034   3                              break;
1035   3      
1036   3                              case OLD_PROTO_ADC_AMP_2:
1037   3                              {
1038   4                                       channels[channel].settings.set.state_byte_1&=0xF0;
1039   4                                       channels[channel].settings.set.state_byte_1|=PROTO_ADC_AMP_2;
1040   4                              }
1041   3                              break;
1042   3      
1043   3                              case OLD_PROTO_ADC_AMP_32:
1044   3                              {
1045   4                                       channels[channel].settings.set.state_byte_1&=0xF0;
1046   4                                       channels[channel].settings.set.state_byte_1|=PROTO_ADC_AMP_32;
1047   4                              }
1048   3                              break;
1049   3      
1050   3                              case OLD_PROTO_ADC_AMP_128:
1051   3                              {
1052   4                                   channels[channel].settings.set.state_byte_1&=0xF0;
1053   4                                       channels[channel].settings.set.state_byte_1|=PROTO_ADC_AMP_128;
1054   4                              }
1055   3                              break;
1056   3      
1057   3                              default :
1058   3                              {
1059   4                                   channels[channel].settings.set.state_byte_1&=0xF0;
1060   4                                       channels[channel].settings.set.state_byte_1|=PROTO_ADC_AMP_1;
1061   4                              }
1062   3                              break;
1063   3              }
1064   2        }
1065   1        return 0;
1066   1      }
1067          //-----------------------------------------------------------------------------
1068          unsigned char Old_Proto_Paste_Null(unsigned char *buf,unsigned char len)//т.к. старый протокол прибавляет 
             -к длине количество 0 после D7 то обрабатываем вне прерывания
1069          {
1070   1              volatile unsigned char xdata i=0,j=0;
1071   1      
1072   1              for(i=3;i<len;i++) //пропустим заголовок 0x00 0xD7 0x28
1073   1              {
1074   2                       if(buf[i]==0xD7)
1075   2                       {
1076   3                               for(j=(len-1);j>i;j--)
1077   3                               {
1078   4                                      buf[j+1]=buf[j];//сдвигаем элементы буфера вправо на одну позицию до D7
1079   4                               }
1080   3                               buf[i+1]=0x0;//вставляем 0x00 после 0xD7
1081   3                               buf[5]++;//длина кадра увеличилась на 1
1082   3                               len++;
1083   3                               i++;//не проверяем 0 спереди
1084   3                       }
1085   2              }
1086   1              return len;
1087   1      }
1088          //-----------------------------------------------------------------------------
1089          void ProtoBufHandling(void) //using 0 //процесс обработки принятого запроса
1090          {
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 19  

1091   1              if(protocol_type==PROTO_TYPE_NEW)
1092   1              {
1093   2                        channels[11].settings.set.state_byte_1=0x40; //восстановим байты статуса дола
1094   2                        channels[11].settings.set.state_byte_2=0x0A;
1095   2                        switch(RecieveBuf[4])
1096   2                        {
1097   3                      //---------------------------------------
1098   3                              case GET_DEV_INFO_REQ:
1099   3                              {
1100   4                                      buf_len=Send_Info();    
1101   4                              }
1102   3                              break;
1103   3                      //---------------------------------------
1104   3                              case NODE_FULL_INIT_REQ:
1105   3                              {
1106   4                                      buf_len=Node_Full_Init();
1107   4                              }
1108   3                              break;
1109   3                      //---------------------------------------
1110   3                              case CHANNEL_LIST_INIT_REQ:
1111   3                              {       
1112   4                                      buf_len=Channel_List_Init();    
1113   4                              }
1114   3                              break;
1115   3                      //---------------------------------------
1116   3                              case CHANNEL_GET_DATA_REQ:
1117   3                              {
1118   4                                      buf_len=Channel_Get_Data();     
1119   4                              }
1120   3                              break;
1121   3                              //-----------------------------------
1122   3                              case CHANNEL_SET_PARAMETERS_REQ:
1123   3                              {
1124   4                                      buf_len=Channel_Set_Parameters();
1125   4                              }
1126   3                              break;
1127   3                              //-----------------------------------
1128   3                              case CHANNEL_SET_ORDER_QUERY_REQ:
1129   3                              {
1130   4                                      buf_len=Channel_Set_Order_Query();
1131   4                              }
1132   3                              break;
1133   3                      //----------------------------------------
1134   3                              case CHANNEL_GET_DATA_ORDER_REQ:
1135   3                              {
1136   4                                       buf_len=Channel_Get_Data_Order();
1137   4                              }
1138   3                              break;
1139   3                      //----------------------------------------
1140   3                              case CHANNEL_SET_STATE_REQ:
1141   3                              {
1142   4                                       buf_len=Channel_Set_State();
1143   4                              }
1144   3                              break;
1145   3                      //----------------------------------------
1146   3                              case CHANNEL_GET_DATA_ORDER_M2_REQ:
1147   3                              {
1148   4                                       buf_len=Channel_Get_Data_Order_M2();
1149   4                              }
1150   3                              break;
1151   3                      //------------------------------------------
1152   3                              case CHANNEL_SET_RESET_STATE_FLAGS_REQ:
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 20  

1153   3                              {
1154   4                                      buf_len=Channel_Set_Reset_State_Flags();
1155   4                              }
1156   3                              break;
1157   3                      //------------------------------------------
1158   3                              case CHANNEL_ALL_GET_DATA_REQ:
1159   3                              {
1160   4                                       buf_len=Channel_All_Get_Data();
1161   4                              }
1162   3                              break;
1163   3                      //------------------------------------------
1164   3                              case CHANNEL_SET_ADDRESS_DESC:
1165   3                              {
1166   4                                       buf_len=Channel_Set_Address_Desc();
1167   4                              }
1168   3                              break;
1169   3                      //------------------------------------------
1170   3                              case CHANNEL_SET_CALIBRATE:
1171   3                              {
1172   4                                       buf_len=Channel_Set_Calibrate();
1173   4                              }
1174   3                              break;
1175   3                      //------------------------------------------
1176   3                              case CHANNEL_SET_ALL_DEFAULT:
1177   3                              {
1178   4                                       buf_len=Channel_Set_All_Default();
1179   4                              }
1180   3                              break;
1181   3                      //------------------------------------------
1182   3                              case CHANNEL_GET_CALIBRATE_REQ:
1183   3                              {
1184   4                                       buf_len=Channel_Get_Calibrate_Value();
1185   4                              }
1186   3                              break;
1187   3                      //------------------------------------------
1188   3                          default:
1189   3                              {
1190   4                                 buf_len=Request_Error(FR_COMMAND_NOT_EXIST);
1191   4                          }                                                              
1192   3                        }
1193   2              }
1194   1              else //старый протокол
1195   1              {
1196   2                        switch((RecieveBuf[5]>>5)&0x7)
1197   2                        {
1198   3                      //---------------------------------------
1199   3                              case OLD_CHANNEL_REINIT_BLOCK:
1200   3                              {
1201   4                                      buf_len=Old_Reinit_Block();     
1202   4                              }
1203   3                              break;
1204   3                      //---------------------------------------
1205   3                              case OLD_CHANNEL_SET_ADC_RANGE:
1206   3                              {
1207   4                                      buf_len=Old_Channel_Set_ADC_Range();
1208   4                              }
1209   3                              break;
1210   3                      //---------------------------------------
1211   3                              case OLD_CHANNEL_GET_STATE:
1212   3                              {       
1213   4                                      buf_len=Old_Channel_Get_State();        
1214   4                              }
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 21  

1215   3                              break;
1216   3                      //---------------------------------------
1217   3                              case OLD_CHANNEL_GET_DATA:
1218   3                              {
1219   4                                      buf_len=Old_Channel_Get_Data(); 
1220   4                              }
1221   3                              break;
1222   3                              //-----------------------------------
1223   3                              case OLD_CHANNEL_GET_DATA_STATE:
1224   3                              {
1225   4                                      buf_len=Old_Channel_Get_Data_State();
1226   4                              }
1227   3                              break;
1228   3                              //-----------------------------------
1229   3                          default:
1230   3                              {
1231   4                                 
1232   4                          }                                                              
1233   3                        }             
1234   2              }
1235   1      
1236   1        return;
1237   1      }
1238          //-----------------------------------------------------------------------------------
1239          //#pragma OT(0,Speed) 
1240          PT_THREAD(ProtoProcess(struct pt *pt))
1241           {
1242   1       static unsigned char  CRC=0x0;
1243   1        PT_BEGIN(pt);
1244   3      
1245   3        while(1) 
1246   3        {
1247   4        //----------restart------------
1248   4                      recieve_count=0x0;//??
1249   4                      REN=1;//recieve enqble
1250   4                      DE_RE=0;//линия на прием
1251   4                      ES=1;
1252   4        //-----------------------------
1253   4                // PT_WAIT_UNTIL(pt,RECIEVED); //ждем команды на старт
1254   4                 wdt_count[Proto_Proc].process_state=IDLE;
1255   4      
1256   4                 PT_YIELD_UNTIL(pt,RECIEVED); //ждем команды на старт 
1257   4                 wdt_count[Proto_Proc].count++;
1258   4                // WDT_Clear();//если посылка не приходит-сбрасываем
1259   4      
1260   4                
1261   4                  RECIEVED=0;
1262   4                      
1263   4                      if((protocol_type==PROTO_TYPE_NEW)&&(RecieveBuf[3]!=ADRESS_DEV))//если адрес совпал       
1264   4                      {
1265   5                              PT_RESTART(pt);//если адрес не сошелся-перезапустим протокол                    
1266   5                      }       
1267   4                                      
1268   4                  CRC=RecieveBuf[recieve_count-1];
1269   4                      
1270   4                      if(protocol_type==PROTO_TYPE_NEW)
1271   4                      {               
1272   5                              if(CRC_Check(&RecieveBuf,(recieve_count-CRC_LEN))!=CRC)
1273   5                              {
1274   6                                      PT_RESTART(pt);//если CRC не сошлось-перезапустим протокол       
1275   6                              }
1276   5                      }
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 22  

1277   4                      else
1278   4                      {
1279   5                              if(Old_CRC_Check(&RecieveBuf,(recieve_count-CRC_LEN))!=CRC)
1280   5                              {
1281   6                                      PT_RESTART(pt);//если CRC не сошлось-перезапустим протокол       
1282   6                              }                       
1283   5                      }
1284   4              //      PT_YIELD(pt);//дадим другим процессам время
1285   4        //-----------------------------
1286   4                      ProtoBufHandling();//процедура обработки сообщения      
1287   4                      if(buf_len==0)//если в буфере пусто
1288   4                      {
1289   5                              PT_RESTART(pt);//перезапустим протокол  
1290   5                      }
1291   4                      else
1292   4                      {
1293   5                              DE_RE=1; //переключаем RS485 в режим передачи
1294   5                                                              
1295   5                              REN=0;  //запрет приема-только передача
1296   5                              transf_count=0;
1297   5                              CUT_OUT_NULL=0;
1298   5                              SBUF=TransferBuf[transf_count];//передача байта, остальным займется автомат
1299   5                              transf_count++;//инкрементируем счетчик переданных
1300   5                              ES=1; //включим прерывание уарт 
1301   5      
1302   5                          if(protocol_type==PROTO_TYPE_NEW)
1303   5                              {
1304   6                                      PT_DELAY(pt,10);
1305   6                              }
1306   5                              else
1307   5                              {
1308   6                                      PT_DELAY(pt,3);
1309   6                              }                       
1310   5                      }               
1311   4        //-----------------------------
1312   4        }
1313   3      
1314   3       PT_END(pt);
1315   1      }
1316          //-----------------------------------------------------------------------------------------------
1317          void Store_Dev_Address_Desc(unsigned char addr,void* name,void* ver,void* desc,unsigned char desc_len)//со
             -хранить в ППЗУ новый адрес устройства, имя, версию, описание
1318          {
1319   1      //небезопасная
1320   1              
1321   1              unsigned int blocks=0;//здесь будет количество блоков, нужных дя сохранения комментария
1322   1              
1323   1              EEPROM_Write(&addr,1,DEVICE_ADDR_EEPROM);        //1 блок
1324   1              EEPROM_Write(name,DEVICE_NAME_LENGTH,DEVICE_NAME_EEPROM); //5 блоков
1325   1              memcpy(DEV_NAME,name,DEVICE_NAME_LENGTH_SYM);//копируем полученное имя в буфер
1326   1      
1327   1              EEPROM_Write(ver,DEVICE_VER_LENGTH,DEVICE_VER_EEPROM);          //2 блока
1328   1              memcpy(VERSION,ver,DEVICE_VER_LENGTH_SYM);//копируем версию в буфер
1329   1      
1330   1              blocks=desc_len>>2;//в блоке 4 байта, делим на 4
1331   1              if(desc_len&0xFC)//если есть остаток, то берем еще один блок
1332   1                      blocks++;
1333   1              
1334   1              if(blocks>DEVICE_DESC_MAX_LENGTH) //ограничение на количество блоков для комментария
1335   1                      blocks=DEVICE_DESC_MAX_LENGTH;
1336   1      
1337   1              EEPROM_Write(desc,(unsigned int)blocks,DEVICE_DESC_EEPROM);
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 23  

1338   1              dev_desc_len=desc_len;
1339   1              EEPROM_Write(&desc_len,1,DEVICE_DESC_LEN_EEPROM);//сохраним длину комментария
1340   1              
1341   1              memcpy(NOTICE,desc,desc_len);//копируем описание в буфер
1342   1              
1343   1              return;
1344   1      }
1345          //-----------------------------------------------------------------------------------------------
1346          void Restore_Dev_Address_Desc(void)//восстановить из ппзу адрес и информацию об устройстве
1347          {
1348   1              unsigned int blocks=0;//здесь будет количество блоков, нужных дя сохранения комментария
1349   1              
1350   1              EEPROM_Read(&ADRESS_DEV,1,DEVICE_ADDR_EEPROM);   //1 блок восстанавливаем адрес из ППЗУ
1351   1      
1352   1              if(ADRESS_DEV<1 || ADRESS_DEV>15)
1353   1                      ADRESS_DEV=1; 
1354   1      
1355   1              EEPROM_Read(DEV_NAME,DEVICE_NAME_LENGTH,DEVICE_NAME_EEPROM); //5 блоков
1356   1          EEPROM_Read(VERSION,DEVICE_VER_LENGTH,DEVICE_VER_EEPROM);
1357   1      
1358   1              EEPROM_Read(&dev_desc_len,1,DEVICE_DESC_LEN_EEPROM);//длина описания устройства в байтах
1359   1      
1360   1              if(dev_desc_len>DEVICE_DESC_MAX_LENGTH_SYM)
1361   1                      dev_desc_len=DEVICE_DESC_MAX_LENGTH_SYM;
1362   1      
1363   1              blocks=dev_desc_len>>2;//в блоке 4 байта, делим на 4
1364   1              if(dev_desc_len&0xFC)//если есть остаток, то берем еще один блок
1365   1                      blocks++;
1366   1      
1367   1              if(blocks>DEVICE_DESC_MAX_LENGTH) //ограничение на количество блоков для комментария     ???
1368   1                      blocks=DEVICE_DESC_MAX_LENGTH;
1369   1      
1370   1              EEPROM_Read(NOTICE,(unsigned int)blocks,DEVICE_DESC_EEPROM);
1371   1              return;
1372   1      }
1373          //-----------------------------------------------------------------------------------------------
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 24  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION UART_ISR (BEGIN)
0000 C0E0              PUSH    ACC
0002 C083              PUSH    DPH
0004 C082              PUSH    DPL
0006 C0D0              PUSH    PSW
0008 E8                MOV     A,R0
0009 C0E0              PUSH    ACC
000B EE                MOV     A,R6
000C C0E0              PUSH    ACC
000E EF                MOV     A,R7
000F C0E0              PUSH    ACC
                                           ; SOURCE LINE # 53
                                           ; SOURCE LINE # 55
0011 C2AF              CLR     EA
                                           ; SOURCE LINE # 57
0013 209803            JB      RI,$ + 6H
0016 020000      R     LJMP    ?C0001
                                           ; SOURCE LINE # 58
                                           ; SOURCE LINE # 59
0019 C298              CLR     RI
                                           ; SOURCE LINE # 61
001B 900000      R     MOV     DPTR,#recieve_count
001E E0                MOVX    A,@DPTR
001F D3                SETB    C
0020 940E              SUBB    A,#0EH
0022 7480              MOV     A,#080H
0024 9481              SUBB    A,#081H
0026 400A              JC      ?C0002
                                           ; SOURCE LINE # 62
                                           ; SOURCE LINE # 63
0028 900000      R     MOV     DPTR,#pt_proto
002B E4                CLR     A
002C F0                MOVX    @DPTR,A
002D A3                INC     DPTR
002E F0                MOVX    @DPTR,A
002F 020000      R     LJMP    ?C0003
                                           ; SOURCE LINE # 65
0032         ?C0002:
                                           ; SOURCE LINE # 68
0032 7800        R     MOV     R0,#LOW symbol
0034 A699              MOV     @R0,SBUF
                                           ; SOURCE LINE # 69
0036 900000      E     MOV     DPTR,#wdt_count
0039 E4                CLR     A
003A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 70
003B E6                MOV     A,@R0
003C 7003              JNZ     $ + 5H
003E 020000      R     LJMP    ?C0012
0041 24D8              ADD     A,#0D8H
0043 6069              JZ      ?C0009
0045 14                DEC     A
0046 6026              JZ      ?C0006
0048 2452              ADD     A,#052H
004A 6003              JZ      $ + 5H
004C 020000      R     LJMP    ?C0015
                                           ; SOURCE LINE # 71
                                           ; SOURCE LINE # 72
004F         ?C0005:
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 25  

                                           ; SOURCE LINE # 73
                                           ; SOURCE LINE # 74
004F 7800        R     MOV     R0,#LOW symbol
0051 E6                MOV     A,@R0
0052 FF                MOV     R7,A
0053 900000      R     MOV     DPTR,#recieve_count
0056 E0                MOVX    A,@DPTR
0057 2400        R     ADD     A,#LOW RecieveBuf
0059 F582              MOV     DPL,A
005B E4                CLR     A
005C 3400        R     ADDC    A,#HIGH RecieveBuf
005E F583              MOV     DPH,A
0060 EF                MOV     A,R7
0061 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 75
0062 900000      R     MOV     DPTR,#recieve_count
0065 E0                MOVX    A,@DPTR
0066 04                INC     A
0067 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 76
0068 18                DEC     R0
0069 7601              MOV     @R0,#01H
                                           ; SOURCE LINE # 77
                                           ; SOURCE LINE # 78
006B 020000      R     LJMP    ?C0004
                                           ; SOURCE LINE # 80
006E         ?C0006:
                                           ; SOURCE LINE # 81
                                           ; SOURCE LINE # 82
006E 7800        R     MOV     R0,#LOW CUT_OUT_NULL
0070 E6                MOV     A,@R0
0071 B4011A            CJNE    A,#01H,?C0007
                                           ; SOURCE LINE # 83
                                           ; SOURCE LINE # 84
0074 900000      R     MOV     DPTR,#RecieveBuf
0077 E4                CLR     A
0078 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 85
0079 A3                INC     DPTR
007A 74D7              MOV     A,#0D7H
007C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 86
007D A3                INC     DPTR
007E 7429              MOV     A,#029H
0080 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 87
0081 900000      R     MOV     DPTR,#recieve_count
0084 7403              MOV     A,#03H
0086 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 88
0087 900000      R     MOV     DPTR,#protocol_type
008A E4                CLR     A
008B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 89
008C 8019              SJMP    ?C0008
008E         ?C0007:
                                           ; SOURCE LINE # 91
                                           ; SOURCE LINE # 92
008E 7800        R     MOV     R0,#LOW symbol
0090 E6                MOV     A,@R0
0091 FF                MOV     R7,A
0092 900000      R     MOV     DPTR,#recieve_count
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 26  

0095 E0                MOVX    A,@DPTR
0096 2400        R     ADD     A,#LOW RecieveBuf
0098 F582              MOV     DPL,A
009A E4                CLR     A
009B 3400        R     ADDC    A,#HIGH RecieveBuf
009D F583              MOV     DPH,A
009F EF                MOV     A,R7
00A0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 93
00A1 900000      R     MOV     DPTR,#recieve_count
00A4 E0                MOVX    A,@DPTR
00A5 04                INC     A
00A6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 94
00A7         ?C0008:
                                           ; SOURCE LINE # 95
00A7 7800        R     MOV     R0,#LOW CUT_OUT_NULL
00A9 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 96
                                           ; SOURCE LINE # 97
00AB 020000      R     LJMP    ?C0004
                                           ; SOURCE LINE # 99
00AE         ?C0009:
                                           ; SOURCE LINE # 100
                                           ; SOURCE LINE # 101
00AE 7800        R     MOV     R0,#LOW CUT_OUT_NULL
00B0 E6                MOV     A,@R0
00B1 B4011B            CJNE    A,#01H,?C0010
                                           ; SOURCE LINE # 102
                                           ; SOURCE LINE # 103
00B4 900000      R     MOV     DPTR,#RecieveBuf
00B7 E4                CLR     A
00B8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 104
00B9 A3                INC     DPTR
00BA 74D7              MOV     A,#0D7H
00BC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 105
00BD A3                INC     DPTR
00BE 7428              MOV     A,#028H
00C0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 106
00C1 900000      R     MOV     DPTR,#recieve_count
00C4 7403              MOV     A,#03H
00C6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 107
00C7 900000      R     MOV     DPTR,#protocol_type
00CA 7401              MOV     A,#01H
00CC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 108
00CD 8019              SJMP    ?C0011
00CF         ?C0010:
                                           ; SOURCE LINE # 110
                                           ; SOURCE LINE # 111
00CF 7800        R     MOV     R0,#LOW symbol
00D1 E6                MOV     A,@R0
00D2 FF                MOV     R7,A
00D3 900000      R     MOV     DPTR,#recieve_count
00D6 E0                MOVX    A,@DPTR
00D7 2400        R     ADD     A,#LOW RecieveBuf
00D9 F582              MOV     DPL,A
00DB E4                CLR     A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 27  

00DC 3400        R     ADDC    A,#HIGH RecieveBuf
00DE F583              MOV     DPH,A
00E0 EF                MOV     A,R7
00E1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 112
00E2 900000      R     MOV     DPTR,#recieve_count
00E5 E0                MOVX    A,@DPTR
00E6 04                INC     A
00E7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 113
00E8         ?C0011:
                                           ; SOURCE LINE # 114
00E8 7800        R     MOV     R0,#LOW CUT_OUT_NULL
00EA 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 115
                                           ; SOURCE LINE # 116
00EC 8041              SJMP    ?C0004
                                           ; SOURCE LINE # 118
00EE         ?C0012:
                                           ; SOURCE LINE # 119
                                           ; SOURCE LINE # 120
00EE 7800        R     MOV     R0,#LOW CUT_OUT_NULL
00F0 E6                MOV     A,@R0
00F1 B40104            CJNE    A,#01H,?C0013
                                           ; SOURCE LINE # 121
                                           ; SOURCE LINE # 122
00F4 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 123
00F6 8037              SJMP    ?C0004
00F8         ?C0013:
                                           ; SOURCE LINE # 125
                                           ; SOURCE LINE # 126
00F8 7800        R     MOV     R0,#LOW symbol
00FA E6                MOV     A,@R0
00FB FF                MOV     R7,A
00FC 900000      R     MOV     DPTR,#recieve_count
00FF E0                MOVX    A,@DPTR
0100 2400        R     ADD     A,#LOW RecieveBuf
0102 F582              MOV     DPL,A
0104 E4                CLR     A
0105 3400        R     ADDC    A,#HIGH RecieveBuf
0107 F583              MOV     DPH,A
0109 EF                MOV     A,R7
010A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 127
010B 900000      R     MOV     DPTR,#recieve_count
010E E0                MOVX    A,@DPTR
010F 04                INC     A
0110 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 128
                                           ; SOURCE LINE # 129
                                           ; SOURCE LINE # 130
0111 801C              SJMP    ?C0004
                                           ; SOURCE LINE # 132
0113         ?C0015:
                                           ; SOURCE LINE # 133
                                           ; SOURCE LINE # 134
0113 7800        R     MOV     R0,#LOW symbol
0115 E6                MOV     A,@R0
0116 FF                MOV     R7,A
0117 900000      R     MOV     DPTR,#recieve_count
011A E0                MOVX    A,@DPTR
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 28  

011B 2400        R     ADD     A,#LOW RecieveBuf
011D F582              MOV     DPL,A
011F E4                CLR     A
0120 3400        R     ADDC    A,#HIGH RecieveBuf
0122 F583              MOV     DPH,A
0124 EF                MOV     A,R7
0125 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 135
0126 900000      R     MOV     DPTR,#recieve_count
0129 E0                MOVX    A,@DPTR
012A 04                INC     A
012B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 136
012C 18                DEC     R0
012D 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 138
                                           ; SOURCE LINE # 139
012F         ?C0004:
                                           ; SOURCE LINE # 141
012F 900000      R     MOV     DPTR,#recieve_count
0132 E0                MOVX    A,@DPTR
0133 D3                SETB    C
0134 9406              SUBB    A,#06H
0136 4020              JC      ?C0016
                                           ; SOURCE LINE # 142
                                           ; SOURCE LINE # 143
0138 900000      R     MOV     DPTR,#frame_len
013B E0                MOVX    A,@DPTR
013C 2406              ADD     A,#06H
013E FF                MOV     R7,A
013F E4                CLR     A
0140 33                RLC     A
0141 FE                MOV     R6,A
0142 900000      R     MOV     DPTR,#recieve_count
0145 E0                MOVX    A,@DPTR
0146 6F                XRL     A,R7
0147 7001              JNZ     ?C0269
0149 EE                MOV     A,R6
014A         ?C0269:
014A 7030              JNZ     ?C0001
                                           ; SOURCE LINE # 144
                                           ; SOURCE LINE # 145
014C 7800        R     MOV     R0,#LOW RECIEVED
014E 7601              MOV     @R0,#01H
                                           ; SOURCE LINE # 146
0150 C2AC              CLR     ES
                                           ; SOURCE LINE # 147
0152 C29C              CLR     REN
                                           ; SOURCE LINE # 148
0154 08                INC     R0
0155 F6                MOV     @R0,A
                                           ; SOURCE LINE # 149
                                           ; SOURCE LINE # 150
0156 8024              SJMP    ?C0001
0158         ?C0016:
                                           ; SOURCE LINE # 152
                                           ; SOURCE LINE # 153
0158 900000      R     MOV     DPTR,#recieve_count
015B E0                MOVX    A,@DPTR
015C B4061D            CJNE    A,#06H,?C0001
                                           ; SOURCE LINE # 154
                                           ; SOURCE LINE # 156
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 29  

015F E0                MOVX    A,@DPTR
0160 2400        R     ADD     A,#LOW RecieveBuf+0FFFFH
0162 F582              MOV     DPL,A
0164 E4                CLR     A
0165 3400        R     ADDC    A,#HIGH RecieveBuf+0FFFFH
0167 F583              MOV     DPH,A
0169 E0                MOVX    A,@DPTR
016A 900000      R     MOV     DPTR,#frame_len
016D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 157
016E 900000      R     MOV     DPTR,#protocol_type
0171 E0                MOVX    A,@DPTR
0172 B40107            CJNE    A,#01H,?C0001
                                           ; SOURCE LINE # 158
                                           ; SOURCE LINE # 159
0175 900000      R     MOV     DPTR,#frame_len
0178 E0                MOVX    A,@DPTR
0179 541F              ANL     A,#01FH
017B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 160
                                           ; SOURCE LINE # 161
                                           ; SOURCE LINE # 162
                                           ; SOURCE LINE # 163
017C         ?C0001:
                                           ; SOURCE LINE # 165
017C 30997B            JNB     TI,?C0021
                                           ; SOURCE LINE # 166
                                           ; SOURCE LINE # 167
017F C299              CLR     TI
                                           ; SOURCE LINE # 169
0181 900000      R     MOV     DPTR,#buf_len
0184 E0                MOVX    A,@DPTR
0185 FF                MOV     R7,A
0186 900000      R     MOV     DPTR,#transf_count
0189 E0                MOVX    A,@DPTR
018A C3                CLR     C
018B 9F                SUBB    A,R7
018C 505E              JNC     ?C0022
                                           ; SOURCE LINE # 170
                                           ; SOURCE LINE # 171
018E E0                MOVX    A,@DPTR
018F C3                CLR     C
0190 9403              SUBB    A,#03H
0192 4007              JC      ?C0024
0194 900000      R     MOV     DPTR,#protocol_type
0197 E0                MOVX    A,@DPTR
0198 B40118            CJNE    A,#01H,?C0023
019B         ?C0024:
                                           ; SOURCE LINE # 172
                                           ; SOURCE LINE # 173
019B 900000      R     MOV     DPTR,#transf_count
019E E0                MOVX    A,@DPTR
019F 2400        R     ADD     A,#LOW TransferBuf
01A1 F582              MOV     DPL,A
01A3 E4                CLR     A
01A4 3400        R     ADDC    A,#HIGH TransferBuf
01A6 F583              MOV     DPH,A
01A8 E0                MOVX    A,@DPTR
01A9 F599              MOV     SBUF,A
                                           ; SOURCE LINE # 174
01AB 900000      R     MOV     DPTR,#transf_count
01AE E0                MOVX    A,@DPTR
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 30  

01AF 04                INC     A
01B0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 175
01B1 8047              SJMP    ?C0021
01B3         ?C0023:
                                           ; SOURCE LINE # 177
                                           ; SOURCE LINE # 178
01B3 7800        R     MOV     R0,#LOW CUT_OUT_NULL
01B5 E6                MOV     A,@R0
01B6 702B              JNZ     ?C0026
                                           ; SOURCE LINE # 179
                                           ; SOURCE LINE # 180
01B8 900000      R     MOV     DPTR,#transf_count
01BB E0                MOVX    A,@DPTR
01BC 2400        R     ADD     A,#LOW TransferBuf
01BE F582              MOV     DPL,A
01C0 E4                CLR     A
01C1 3400        R     ADDC    A,#HIGH TransferBuf
01C3 F583              MOV     DPH,A
01C5 E0                MOVX    A,@DPTR
01C6 B4D702            CJNE    A,#0D7H,?C0027
                                           ; SOURCE LINE # 181
                                           ; SOURCE LINE # 182
01C9 7601              MOV     @R0,#01H
                                           ; SOURCE LINE # 183
01CB         ?C0027:
                                           ; SOURCE LINE # 184
01CB 900000      R     MOV     DPTR,#transf_count
01CE E0                MOVX    A,@DPTR
01CF 2400        R     ADD     A,#LOW TransferBuf
01D1 F582              MOV     DPL,A
01D3 E4                CLR     A
01D4 3400        R     ADDC    A,#HIGH TransferBuf
01D6 F583              MOV     DPH,A
01D8 E0                MOVX    A,@DPTR
01D9 F599              MOV     SBUF,A
                                           ; SOURCE LINE # 185
01DB 900000      R     MOV     DPTR,#transf_count
01DE E0                MOVX    A,@DPTR
01DF 04                INC     A
01E0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 186
01E1 8017              SJMP    ?C0021
01E3         ?C0026:
                                           ; SOURCE LINE # 188
                                           ; SOURCE LINE # 189
01E3 759900            MOV     SBUF,#00H
                                           ; SOURCE LINE # 190
01E6 7800        R     MOV     R0,#LOW CUT_OUT_NULL
01E8 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 191
                                           ; SOURCE LINE # 192
                                           ; SOURCE LINE # 193
01EA 800E              SJMP    ?C0021
01EC         ?C0022:
                                           ; SOURCE LINE # 195
                                           ; SOURCE LINE # 196
01EC 900000      R     MOV     DPTR,#transf_count
01EF E4                CLR     A
01F0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 197
01F1 7800        R     MOV     R0,#LOW CUT_OUT_NULL
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 31  

01F3 F6                MOV     @R0,A
                                           ; SOURCE LINE # 198
01F4 900000      R     MOV     DPTR,#pt_proto
01F7 F0                MOVX    @DPTR,A
01F8 A3                INC     DPTR
01F9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 199
                                           ; SOURCE LINE # 200
01FA         ?C0021:
                                           ; SOURCE LINE # 201
01FA D2AF              SETB    EA
                                           ; SOURCE LINE # 203
01FC         ?C0003:
01FC D0E0              POP     ACC
01FE FF                MOV     R7,A
01FF D0E0              POP     ACC
0201 FE                MOV     R6,A
0202 D0E0              POP     ACC
0204 F8                MOV     R0,A
0205 D0D0              POP     PSW
0207 D082              POP     DPL
0209 D083              POP     DPH
020B D0E0              POP     ACC
020D 32                RETI    
             ; FUNCTION UART_ISR (END)

             ; FUNCTION Protocol_Init (BEGIN)
                                           ; SOURCE LINE # 206
                                           ; SOURCE LINE # 207
                                           ; SOURCE LINE # 208
0000 C299              CLR     TI
                                           ; SOURCE LINE # 209
0002 C298              CLR     RI
                                           ; SOURCE LINE # 213
0004 120000      R     LCALL   Restore_Dev_Address_Desc
                                           ; SOURCE LINE # 216
0007 E4                CLR     A
0008 900000      R     MOV     DPTR,#recieve_count
000B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 217
000C A3                INC     DPTR
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 218
000E A3                INC     DPTR
000F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 219
0010 C2B5              CLR     DE_RE
                                           ; SOURCE LINE # 220
0012 7800        R     MOV     R0,#LOW CUT_OUT_NULL
0014 F6                MOV     @R0,A
                                           ; SOURCE LINE # 221
0015 900000      R     MOV     DPTR,#STATE_BYTE
0018 74C0              MOV     A,#0C0H
001A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 222
001B E4                CLR     A
001C 900000      R     MOV     DPTR,#pt_proto
001F F0                MOVX    @DPTR,A
0020 A3                INC     DPTR
0021 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 224
0022         ?C0030:
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 32  

0022 22                RET     
             ; FUNCTION Protocol_Init (END)

             ; FUNCTION Send_Info (BEGIN)
                                           ; SOURCE LINE # 226
                                           ; SOURCE LINE # 227
                                           ; SOURCE LINE # 228
;---- Variable 'i' assigned to Register 'R7' ----
0000 E4                CLR     A
0001 FF                MOV     R7,A
                                           ; SOURCE LINE # 231
0002 900000      R     MOV     DPTR,#TransferBuf
0005 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 232
0006 A3                INC     DPTR
0007 74D7              MOV     A,#0D7H
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 233
000A A3                INC     DPTR
000B 7429              MOV     A,#029H
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 235
000E 900000      R     MOV     DPTR,#ADRESS_DEV
0011 E0                MOVX    A,@DPTR
0012 900000      R     MOV     DPTR,#TransferBuf+03H
0015 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 236
0016 A3                INC     DPTR
0017 7402              MOV     A,#02H
0019 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 237
001A 900000      R     MOV     DPTR,#STATE_BYTE
001D E0                MOVX    A,@DPTR
001E 900000      R     MOV     DPTR,#TransferBuf+06H
0021 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 239
0022 E4                CLR     A
0023         ?C0031:
                                           ; SOURCE LINE # 240
                                           ; SOURCE LINE # 241
0023 EF                MOV     A,R7
0024 C3                CLR     C
0025 9414              SUBB    A,#014H
0027 501A              JNC     ?C0034
                                           ; SOURCE LINE # 242
                                           ; SOURCE LINE # 243
0029 7400        R     MOV     A,#LOW DEV_NAME
002B 2F                ADD     A,R7
002C F582              MOV     DPL,A
002E E4                CLR     A
002F 3400        R     ADDC    A,#HIGH DEV_NAME
0031 F583              MOV     DPH,A
0033 E0                MOVX    A,@DPTR
0034 FE                MOV     R6,A
0035 7400        R     MOV     A,#LOW TransferBuf+07H
0037 2F                ADD     A,R7
0038 F582              MOV     DPL,A
003A E4                CLR     A
003B 3400        R     ADDC    A,#HIGH TransferBuf+07H
003D F583              MOV     DPH,A
003F EE                MOV     A,R6
0040 F0                MOVX    @DPTR,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 33  

                                           ; SOURCE LINE # 244
0041 800C              SJMP    ?C0033
0043         ?C0034:
                                           ; SOURCE LINE # 246
                                           ; SOURCE LINE # 247
0043 7400        R     MOV     A,#LOW TransferBuf+07H
0045 2F                ADD     A,R7
0046 F582              MOV     DPL,A
0048 E4                CLR     A
0049 3400        R     ADDC    A,#HIGH TransferBuf+07H
004B F583              MOV     DPH,A
004D E4                CLR     A
004E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 248
                                           ; SOURCE LINE # 249
004F         ?C0033:
004F 0F                INC     R7
0050 EF                MOV     A,R7
0051 B414CF            CJNE    A,#014H,?C0031
0054         ?C0032:
                                           ; SOURCE LINE # 251
0054 E4                CLR     A
0055 FF                MOV     R7,A
0056         ?C0036:
                                           ; SOURCE LINE # 252
                                           ; SOURCE LINE # 253
0056 EF                MOV     A,R7
0057 C3                CLR     C
0058 9408              SUBB    A,#08H
005A 5018              JNC     ?C0038
                                           ; SOURCE LINE # 254
                                           ; SOURCE LINE # 255
005C 7400        R     MOV     A,#LOW VERSION
005E 2F                ADD     A,R7
005F F582              MOV     DPL,A
0061 E4                CLR     A
0062 3400        R     ADDC    A,#HIGH VERSION
0064 F583              MOV     DPH,A
0066 E0                MOVX    A,@DPTR
0067 FE                MOV     R6,A
0068 7400        R     MOV     A,#LOW TransferBuf+01BH
006A 2F                ADD     A,R7
006B F582              MOV     DPL,A
006D E4                CLR     A
006E 3400        R     ADDC    A,#HIGH TransferBuf+01BH
0070 F583              MOV     DPH,A
0072 EE                MOV     A,R6
0073 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 256
                                           ; SOURCE LINE # 257
0074         ?C0038:
0074 0F                INC     R7
0075 EF                MOV     A,R7
0076 B405DD            CJNE    A,#05H,?C0036
0079         ?C0037:
                                           ; SOURCE LINE # 259
0079 900000      E     MOV     DPTR,#channel_number
007C E0                MOVX    A,@DPTR
007D 900000      R     MOV     DPTR,#TransferBuf+020H
0080 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 261
0081 E4                CLR     A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 34  

0082 FF                MOV     R7,A
0083         ?C0040:
0083 900000      E     MOV     DPTR,#channel_number
0086 E0                MOVX    A,@DPTR
0087 FE                MOV     R6,A
0088 EF                MOV     A,R7
0089 C3                CLR     C
008A 9E                SUBB    A,R6
008B 504C              JNC     ?C0041
                                           ; SOURCE LINE # 262
                                           ; SOURCE LINE # 263
008D 75F019            MOV     B,#019H
0090 EF                MOV     A,R7
0091 A4                MUL     AB
0092 2400        E     ADD     A,#LOW channels+01H
0094 F582              MOV     DPL,A
0096 E5F0              MOV     A,B
0098 3400        E     ADDC    A,#HIGH channels+01H
009A F583              MOV     DPH,A
009C E0                MOVX    A,@DPTR
009D FE                MOV     R6,A
009E C4                SWAP    A
009F 54F0              ANL     A,#0F0H
00A1 FE                MOV     R6,A
00A2 75F019            MOV     B,#019H
00A5 EF                MOV     A,R7
00A6 A4                MUL     AB
00A7 2400        E     ADD     A,#LOW channels+02H
00A9 F582              MOV     DPL,A
00AB E5F0              MOV     A,B
00AD 3400        E     ADDC    A,#HIGH channels+02H
00AF F583              MOV     DPH,A
00B1 E0                MOVX    A,@DPTR
00B2 4E                ORL     A,R6
00B3 FE                MOV     R6,A
00B4 75F002            MOV     B,#02H
00B7 EF                MOV     A,R7
00B8 A4                MUL     AB
00B9 2400        R     ADD     A,#LOW TransferBuf+021H
00BB F582              MOV     DPL,A
00BD E5F0              MOV     A,B
00BF 3400        R     ADDC    A,#HIGH TransferBuf+021H
00C1 F583              MOV     DPH,A
00C3 EE                MOV     A,R6
00C4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 264
00C5 75F002            MOV     B,#02H
00C8 EF                MOV     A,R7
00C9 A4                MUL     AB
00CA 2400        R     ADD     A,#LOW TransferBuf+022H
00CC F582              MOV     DPL,A
00CE E5F0              MOV     A,B
00D0 3400        R     ADDC    A,#HIGH TransferBuf+022H
00D2 F583              MOV     DPH,A
00D4 E4                CLR     A
00D5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 265
00D6 0F                INC     R7
00D7 80AA              SJMP    ?C0040
00D9         ?C0041:
                                           ; SOURCE LINE # 266
00D9 E4                CLR     A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 35  

00DA FF                MOV     R7,A
00DB         ?C0043:
00DB 900000      R     MOV     DPTR,#dev_desc_len
00DE E0                MOVX    A,@DPTR
00DF FE                MOV     R6,A
00E0 EF                MOV     A,R7
00E1 C3                CLR     C
00E2 9E                SUBB    A,R6
00E3 502D              JNC     ?C0044
                                           ; SOURCE LINE # 267
                                           ; SOURCE LINE # 268
00E5 7400        R     MOV     A,#LOW NOTICE
00E7 2F                ADD     A,R7
00E8 F582              MOV     DPL,A
00EA E4                CLR     A
00EB 3400        R     ADDC    A,#HIGH NOTICE
00ED F583              MOV     DPH,A
00EF E0                MOVX    A,@DPTR
00F0 FE                MOV     R6,A
00F1 900000      E     MOV     DPTR,#channel_number
00F4 E0                MOVX    A,@DPTR
00F5 75F002            MOV     B,#02H
00F8 A4                MUL     AB
00F9 2F                ADD     A,R7
00FA F582              MOV     DPL,A
00FC E4                CLR     A
00FD 35F0              ADDC    A,B
00FF F583              MOV     DPH,A
0101 E582              MOV     A,DPL
0103 2400        R     ADD     A,#LOW TransferBuf+021H
0105 F582              MOV     DPL,A
0107 E583              MOV     A,DPH
0109 3400        R     ADDC    A,#HIGH TransferBuf+021H
010B F583              MOV     DPH,A
010D EE                MOV     A,R6
010E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 269
010F 0F                INC     R7
0110 80C9              SJMP    ?C0043
0112         ?C0044:
                                           ; SOURCE LINE # 271
0112 900000      E     MOV     DPTR,#channel_number
0115 E0                MOVX    A,@DPTR
0116 25E0              ADD     A,ACC
0118 FD                MOV     R5,A
0119 241C              ADD     A,#01CH
011B FF                MOV     R7,A
011C 900000      R     MOV     DPTR,#dev_desc_len
011F E0                MOVX    A,@DPTR
0120 2F                ADD     A,R7
0121 900000      R     MOV     DPTR,#TransferBuf+05H
0124 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 272
0125 7E00        R     MOV     R6,#HIGH TransferBuf+01H
0127 7F00        R     MOV     R7,#LOW TransferBuf+01H
0129 ED                MOV     A,R5
012A 2420              ADD     A,#020H
012C FD                MOV     R5,A
012D 900000      R     MOV     DPTR,#dev_desc_len
0130 E0                MOVX    A,@DPTR
0131 2D                ADD     A,R5
0132 FD                MOV     R5,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 36  

0133 120000      E     LCALL   _CRC_Check
0136 900000      R     MOV     DPTR,#dev_desc_len
0139 E0                MOVX    A,@DPTR
013A FE                MOV     R6,A
013B 900000      E     MOV     DPTR,#channel_number
013E E0                MOVX    A,@DPTR
013F FD                MOV     R5,A
0140 75F002            MOV     B,#02H
0143 A4                MUL     AB
0144 2E                ADD     A,R6
0145 F582              MOV     DPL,A
0147 E4                CLR     A
0148 35F0              ADDC    A,B
014A F583              MOV     DPH,A
014C E582              MOV     A,DPL
014E 2400        R     ADD     A,#LOW TransferBuf+021H
0150 F582              MOV     DPL,A
0152 E583              MOV     A,DPH
0154 3400        R     ADDC    A,#HIGH TransferBuf+021H
0156 F583              MOV     DPH,A
0158 EF                MOV     A,R7
0159 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 274
015A ED                MOV     A,R5
015B 25E0              ADD     A,ACC
015D 2422              ADD     A,#022H
015F FF                MOV     R7,A
0160 900000      R     MOV     DPTR,#dev_desc_len
0163 E0                MOVX    A,@DPTR
0164 2F                ADD     A,R7
0165 FF                MOV     R7,A
                                           ; SOURCE LINE # 275
0166         ?C0046:
0166 22                RET     
             ; FUNCTION Send_Info (END)

             ; FUNCTION Node_Full_Init (BEGIN)
                                           ; SOURCE LINE # 277
                                           ; SOURCE LINE # 278
                                           ; SOURCE LINE # 279
0000 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 280
0002         ?C0047:
0002 22                RET     
             ; FUNCTION Node_Full_Init (END)

             ; FUNCTION Channel_List_Init (BEGIN)
                                           ; SOURCE LINE # 282
                                           ; SOURCE LINE # 283
                                           ; SOURCE LINE # 284
0000 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 285
0002         ?C0048:
0002 22                RET     
             ; FUNCTION Channel_List_Init (END)

             ; FUNCTION Channel_Get_Data (BEGIN)
                                           ; SOURCE LINE # 287
                                           ; SOURCE LINE # 288
                                           ; SOURCE LINE # 289
0000 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 290
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 37  

0002         ?C0049:
0002 22                RET     
             ; FUNCTION Channel_Get_Data (END)

             ; FUNCTION Channel_Set_Parameters (BEGIN)
                                           ; SOURCE LINE # 292
                                           ; SOURCE LINE # 293
                                           ; SOURCE LINE # 294
;---- Variable 'index' assigned to Register 'R7' ----
0000 E4                CLR     A
0001 FF                MOV     R7,A
0002 900000      R     MOV     DPTR,#store_data
0005 F0                MOVX    @DPTR,A
0006         ?C0050:
                                           ; SOURCE LINE # 296
0006 900000      R     MOV     DPTR,#RecieveBuf+05H
0009 E0                MOVX    A,@DPTR
000A 14                DEC     A
000B FE                MOV     R6,A
000C EF                MOV     A,R7
000D C3                CLR     C
000E 9E                SUBB    A,R6
000F 4003              JC      $ + 5H
0011 020000      R     LJMP    ?C0051
                                           ; SOURCE LINE # 297
                                           ; SOURCE LINE # 298
0014 7400        R     MOV     A,#LOW RecieveBuf+06H
0016 2F                ADD     A,R7
0017 F582              MOV     DPL,A
0019 E4                CLR     A
001A 3400        R     ADDC    A,#HIGH RecieveBuf+06H
001C F583              MOV     DPH,A
001E E0                MOVX    A,@DPTR
001F FE                MOV     R6,A
0020 900000      E     MOV     DPTR,#channel_number
0023 E0                MOVX    A,@DPTR
0024 FD                MOV     R5,A
0025 EE                MOV     A,R6
0026 C3                CLR     C
0027 9D                SUBB    A,R5
0028 4003              JC      $ + 5H
002A 020000      R     LJMP    ?C0052
                                           ; SOURCE LINE # 299
                                           ; SOURCE LINE # 300
002D 7400        R     MOV     A,#LOW RecieveBuf+07H
002F 2F                ADD     A,R7
0030 F582              MOV     DPL,A
0032 E4                CLR     A
0033 3400        R     ADDC    A,#HIGH RecieveBuf+07H
0035 F583              MOV     DPH,A
0037 E0                MOVX    A,@DPTR
0038 FE                MOV     R6,A
0039 C4                SWAP    A
003A 540F              ANL     A,#0FH
003C 6003              JZ      $ + 5H
003E 020000      R     LJMP    ?C0057
                                           ; SOURCE LINE # 301
                                           ; SOURCE LINE # 302
0041         ?C0054:
                                           ; SOURCE LINE # 303
                                           ; SOURCE LINE # 304
0041 7400        R     MOV     A,#LOW RecieveBuf+06H
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 38  

0043 2F                ADD     A,R7
0044 F582              MOV     DPL,A
0046 E4                CLR     A
0047 3400        R     ADDC    A,#HIGH RecieveBuf+06H
0049 F583              MOV     DPH,A
004B E0                MOVX    A,@DPTR
004C 75F019            MOV     B,#019H
004F A4                MUL     AB
0050 2400        E     ADD     A,#LOW channels+02H
0052 F582              MOV     DPL,A
0054 E5F0              MOV     A,B
0056 3400        E     ADDC    A,#HIGH channels+02H
0058 F583              MOV     DPH,A
005A E0                MOVX    A,@DPTR
005B FE                MOV     R6,A
005C 7400        R     MOV     A,#LOW RecieveBuf+07H
005E 2F                ADD     A,R7
005F F582              MOV     DPL,A
0061 E4                CLR     A
0062 3400        R     ADDC    A,#HIGH RecieveBuf+07H
0064 F583              MOV     DPH,A
0066 E0                MOVX    A,@DPTR
0067 FD                MOV     R5,A
0068 EE                MOV     A,R6
0069 6D                XRL     A,R5
006A 7059              JNZ     ?C0056
006C 7400        R     MOV     A,#LOW RecieveBuf+06H
006E 2F                ADD     A,R7
006F F582              MOV     DPL,A
0071 E4                CLR     A
0072 3400        R     ADDC    A,#HIGH RecieveBuf+06H
0074 F583              MOV     DPH,A
0076 E0                MOVX    A,@DPTR
0077 75F019            MOV     B,#019H
007A A4                MUL     AB
007B 2400        E     ADD     A,#LOW channels+03H
007D F582              MOV     DPL,A
007F E5F0              MOV     A,B
0081 3400        E     ADDC    A,#HIGH channels+03H
0083 F583              MOV     DPH,A
0085 E0                MOVX    A,@DPTR
0086 FE                MOV     R6,A
0087 7400        R     MOV     A,#LOW RecieveBuf+08H
0089 2F                ADD     A,R7
008A F582              MOV     DPL,A
008C E4                CLR     A
008D 3400        R     ADDC    A,#HIGH RecieveBuf+08H
008F F583              MOV     DPH,A
0091 E0                MOVX    A,@DPTR
0092 FD                MOV     R5,A
0093 EE                MOV     A,R6
0094 6D                XRL     A,R5
0095 702E              JNZ     ?C0056
0097 7400        R     MOV     A,#LOW RecieveBuf+06H
0099 2F                ADD     A,R7
009A F582              MOV     DPL,A
009C E4                CLR     A
009D 3400        R     ADDC    A,#HIGH RecieveBuf+06H
009F F583              MOV     DPH,A
00A1 E0                MOVX    A,@DPTR
00A2 75F019            MOV     B,#019H
00A5 A4                MUL     AB
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 39  

00A6 2400        E     ADD     A,#LOW channels+04H
00A8 F582              MOV     DPL,A
00AA E5F0              MOV     A,B
00AC 3400        E     ADDC    A,#HIGH channels+04H
00AE F583              MOV     DPH,A
00B0 E0                MOVX    A,@DPTR
00B1 FE                MOV     R6,A
00B2 7400        R     MOV     A,#LOW RecieveBuf+09H
00B4 2F                ADD     A,R7
00B5 F582              MOV     DPL,A
00B7 E4                CLR     A
00B8 3400        R     ADDC    A,#HIGH RecieveBuf+09H
00BA F583              MOV     DPH,A
00BC E0                MOVX    A,@DPTR
00BD FD                MOV     R5,A
00BE EE                MOV     A,R6
00BF 6D                XRL     A,R5
00C0 7003              JNZ     $ + 5H
00C2 020000      R     LJMP    ?C0055
00C5         ?C0056:
                                           ; SOURCE LINE # 305
                                           ; SOURCE LINE # 306
00C5 7400        R     MOV     A,#LOW RecieveBuf+08H
00C7 2F                ADD     A,R7
00C8 F582              MOV     DPL,A
00CA E4                CLR     A
00CB 3400        R     ADDC    A,#HIGH RecieveBuf+08H
00CD F583              MOV     DPH,A
00CF E0                MOVX    A,@DPTR
00D0 FE                MOV     R6,A
00D1 7400        R     MOV     A,#LOW RecieveBuf+06H
00D3 2F                ADD     A,R7
00D4 F582              MOV     DPL,A
00D6 E4                CLR     A
00D7 3400        R     ADDC    A,#HIGH RecieveBuf+06H
00D9 F583              MOV     DPH,A
00DB E0                MOVX    A,@DPTR
00DC 75F019            MOV     B,#019H
00DF A4                MUL     AB
00E0 2400        E     ADD     A,#LOW channels+03H
00E2 F582              MOV     DPL,A
00E4 E5F0              MOV     A,B
00E6 3400        E     ADDC    A,#HIGH channels+03H
00E8 F583              MOV     DPH,A
00EA EE                MOV     A,R6
00EB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 307
00EC 7400        R     MOV     A,#LOW RecieveBuf+09H
00EE 2F                ADD     A,R7
00EF F582              MOV     DPL,A
00F1 E4                CLR     A
00F2 3400        R     ADDC    A,#HIGH RecieveBuf+09H
00F4 F583              MOV     DPH,A
00F6 E0                MOVX    A,@DPTR
00F7 FE                MOV     R6,A
00F8 7400        R     MOV     A,#LOW RecieveBuf+06H
00FA 2F                ADD     A,R7
00FB F582              MOV     DPL,A
00FD E4                CLR     A
00FE 3400        R     ADDC    A,#HIGH RecieveBuf+06H
0100 F583              MOV     DPH,A
0102 E0                MOVX    A,@DPTR
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 40  

0103 75F019            MOV     B,#019H
0106 A4                MUL     AB
0107 2400        E     ADD     A,#LOW channels+04H
0109 F582              MOV     DPL,A
010B E5F0              MOV     A,B
010D 3400        E     ADDC    A,#HIGH channels+04H
010F F583              MOV     DPH,A
0111 EE                MOV     A,R6
0112 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 308
0113 7400        R     MOV     A,#LOW RecieveBuf+07H
0115 2F                ADD     A,R7
0116 F582              MOV     DPL,A
0118 E4                CLR     A
0119 3400        R     ADDC    A,#HIGH RecieveBuf+07H
011B F583              MOV     DPH,A
011D E0                MOVX    A,@DPTR
011E 540F              ANL     A,#0FH
0120 FE                MOV     R6,A
0121 7400        R     MOV     A,#LOW RecieveBuf+06H
0123 2F                ADD     A,R7
0124 F582              MOV     DPL,A
0126 E4                CLR     A
0127 3400        R     ADDC    A,#HIGH RecieveBuf+06H
0129 F583              MOV     DPH,A
012B E0                MOVX    A,@DPTR
012C 75F019            MOV     B,#019H
012F A4                MUL     AB
0130 2400        E     ADD     A,#LOW channels+02H
0132 F582              MOV     DPL,A
0134 E5F0              MOV     A,B
0136 3400        E     ADDC    A,#HIGH channels+02H
0138 F583              MOV     DPH,A
013A EE                MOV     A,R6
013B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 309
013C 900000      R     MOV     DPTR,#store_data
013F 7401              MOV     A,#01H
0141 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 311
0142         ?C0055:
                                           ; SOURCE LINE # 312
0142 0F                INC     R7
                                           ; SOURCE LINE # 313
                                           ; SOURCE LINE # 314
0143 8001              SJMP    ?C0053
                                           ; SOURCE LINE # 317
0145         ?C0057:
                                           ; SOURCE LINE # 318
                                           ; SOURCE LINE # 319
0145 00                NOP     
                                           ; SOURCE LINE # 320
                                           ; SOURCE LINE # 321
0146         ?C0053:
                                           ; SOURCE LINE # 322
0146 0F                INC     R7
0147 0F                INC     R7
0148 0F                INC     R7
                                           ; SOURCE LINE # 323
0149 020000      R     LJMP    ?C0050
014C         ?C0052:
                                           ; SOURCE LINE # 325
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 41  

                                           ; SOURCE LINE # 326
014C 7F01              MOV     R7,#01H
014E 120000      R     LCALL   _Request_Error
0151 22                RET     
                                           ; SOURCE LINE # 327
                                           ; SOURCE LINE # 328
0152         ?C0051:
                                           ; SOURCE LINE # 329
0152 900000      R     MOV     DPTR,#store_data
0155 E0                MOVX    A,@DPTR
0156 6003              JZ      ?C0060
                                           ; SOURCE LINE # 330
                                           ; SOURCE LINE # 331
0158 120000      E     LCALL   Store_Channels_Data
                                           ; SOURCE LINE # 332
015B         ?C0060:
                                           ; SOURCE LINE # 334
015B E4                CLR     A
015C FF                MOV     R7,A
015D 120000      R     LCALL   _Request_Error
                                           ; SOURCE LINE # 335
0160         ?C0059:
0160 22                RET     
             ; FUNCTION Channel_Set_Parameters (END)

             ; FUNCTION Channel_Set_Order_Query (BEGIN)
                                           ; SOURCE LINE # 337
                                           ; SOURCE LINE # 338
                                           ; SOURCE LINE # 339
0000 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 340
0002         ?C0061:
0002 22                RET     
             ; FUNCTION Channel_Set_Order_Query (END)

             ; FUNCTION Channel_Get_Data_Order (BEGIN)
                                           ; SOURCE LINE # 342
                                           ; SOURCE LINE # 343
                                           ; SOURCE LINE # 344
0000 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 345
0002         ?C0062:
0002 22                RET     
             ; FUNCTION Channel_Get_Data_Order (END)

             ; FUNCTION Channel_Set_State (BEGIN)
                                           ; SOURCE LINE # 347
                                           ; SOURCE LINE # 348
                                           ; SOURCE LINE # 349
0000 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 350
0002         ?C0063:
0002 22                RET     
             ; FUNCTION Channel_Set_State (END)

             ; FUNCTION Channel_Get_Data_Order_M2 (BEGIN)
                                           ; SOURCE LINE # 352
                                           ; SOURCE LINE # 353
                                           ; SOURCE LINE # 354
0000 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 355
0002         ?C0064:
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 42  

0002 22                RET     
             ; FUNCTION Channel_Get_Data_Order_M2 (END)

             ; FUNCTION Channel_Set_Reset_State_Flags (BEGIN)
                                           ; SOURCE LINE # 357
                                           ; SOURCE LINE # 358
                                           ; SOURCE LINE # 359
0000 900000      R     MOV     DPTR,#STATE_BYTE
0003 7440              MOV     A,#040H
0005 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 360
0006 7800        E     MOV     R0,#LOW i2c_buffer
0008 7612              MOV     @R0,#012H
                                           ; SOURCE LINE # 361
000A 120000      E     LCALL   ChannelsInit
                                           ; SOURCE LINE # 362
000D E4                CLR     A
000E FF                MOV     R7,A
000F 120000      R     LCALL   _Request_Error
                                           ; SOURCE LINE # 363
0012         ?C0065:
0012 22                RET     
             ; FUNCTION Channel_Set_Reset_State_Flags (END)

             ; FUNCTION Channel_All_Get_Data (BEGIN)
                                           ; SOURCE LINE # 366
                                           ; SOURCE LINE # 367
                                           ; SOURCE LINE # 368
0000 E4                CLR     A
0001 F500        R     MOV     index,A
0003 F500        R     MOV     i,A
                                           ; SOURCE LINE # 371
0005 900000      R     MOV     DPTR,#TransferBuf
0008 F0                MOVX    @DPTR,A
0009 A3                INC     DPTR
000A 74D7              MOV     A,#0D7H
000C F0                MOVX    @DPTR,A
000D A3                INC     DPTR
000E 7429              MOV     A,#029H
0010 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 372
0011 900000      R     MOV     DPTR,#ADRESS_DEV
0014 E0                MOVX    A,@DPTR
0015 900000      R     MOV     DPTR,#TransferBuf+03H
0018 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 373
0019 A3                INC     DPTR
001A 7415              MOV     A,#015H
001C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 374
001D 900000      R     MOV     DPTR,#STATE_BYTE
0020 E0                MOVX    A,@DPTR
0021 900000      R     MOV     DPTR,#TransferBuf+06H
0024 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 376
0025 750007      R     MOV     index,#07H
                                           ; SOURCE LINE # 378
0028 E4                CLR     A
0029 F500        R     MOV     i,A
002B         ?C0066:
002B 900000      E     MOV     DPTR,#channel_number
002E E0                MOVX    A,@DPTR
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 43  

002F FF                MOV     R7,A
0030 E500        R     MOV     A,i
0032 C3                CLR     C
0033 9F                SUBB    A,R7
0034 4003              JC      $ + 5H
0036 020000      R     LJMP    ?C0067
                                           ; SOURCE LINE # 379
                                           ; SOURCE LINE # 380
0039 AF00        R     MOV     R7,index
003B 0500        R     INC     index
003D 7400        R     MOV     A,#LOW TransferBuf
003F 2F                ADD     A,R7
0040 F582              MOV     DPL,A
0042 E4                CLR     A
0043 3400        R     ADDC    A,#HIGH TransferBuf
0045 F583              MOV     DPH,A
0047 E500        R     MOV     A,i
0049 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 381
004A 75F019            MOV     B,#019H
004D A4                MUL     AB
004E 2400        E     ADD     A,#LOW channels+01H
0050 F582              MOV     DPL,A
0052 E5F0              MOV     A,B
0054 3400        E     ADDC    A,#HIGH channels+01H
0056 F583              MOV     DPH,A
0058 E0                MOVX    A,@DPTR
0059 C4                SWAP    A
005A 54F0              ANL     A,#0F0H
005C FF                MOV     R7,A
005D 75F019            MOV     B,#019H
0060 E500        R     MOV     A,i
0062 A4                MUL     AB
0063 2400        E     ADD     A,#LOW channels+02H
0065 F582              MOV     DPL,A
0067 E5F0              MOV     A,B
0069 3400        E     ADDC    A,#HIGH channels+02H
006B F583              MOV     DPH,A
006D E0                MOVX    A,@DPTR
006E 4F                ORL     A,R7
006F FF                MOV     R7,A
0070 AE00        R     MOV     R6,index
0072 0500        R     INC     index
0074 7400        R     MOV     A,#LOW TransferBuf
0076 2E                ADD     A,R6
0077 F582              MOV     DPL,A
0079 E4                CLR     A
007A 3400        R     ADDC    A,#HIGH TransferBuf
007C F583              MOV     DPH,A
007E EF                MOV     A,R7
007F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 382
0080 75F019            MOV     B,#019H
0083 E500        R     MOV     A,i
0085 A4                MUL     AB
0086 2400        E     ADD     A,#LOW channels+01H
0088 F582              MOV     DPL,A
008A E5F0              MOV     A,B
008C 3400        E     ADDC    A,#HIGH channels+01H
008E F583              MOV     DPH,A
0090 E0                MOVX    A,@DPTR
0091 14                DEC     A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 44  

0092 7003              JNZ     $ + 5H
0094 020000      R     LJMP    ?C0078
0097 14                DEC     A
0098 7003              JNZ     $ + 5H
009A 020000      R     LJMP    ?C0081
009D 2402              ADD     A,#02H
009F 6003              JZ      $ + 5H
00A1 020000      R     LJMP    ?C0068
                                           ; SOURCE LINE # 383
                                           ; SOURCE LINE # 384
00A4         ?C0070:
                                           ; SOURCE LINE # 385
                                           ; SOURCE LINE # 386
00A4 75F019            MOV     B,#019H
00A7 E500        R     MOV     A,i
00A9 A4                MUL     AB
00AA 2400        E     ADD     A,#LOW channels+02H
00AC F582              MOV     DPL,A
00AE E5F0              MOV     A,B
00B0 3400        E     ADDC    A,#HIGH channels+02H
00B2 F583              MOV     DPH,A
00B4 E0                MOVX    A,@DPTR
00B5 24FD              ADD     A,#0FDH
00B7 7003              JNZ     $ + 5H
00B9 020000      R     LJMP    ?C0075
00BC 2403              ADD     A,#03H
00BE 6003              JZ      $ + 5H
00C0 020000      R     LJMP    ?C0068
                                           ; SOURCE LINE # 387
                                           ; SOURCE LINE # 388
00C3         ?C0072:
                                           ; SOURCE LINE # 389
                                           ; SOURCE LINE # 390
00C3 75F019            MOV     B,#019H
00C6 E500        R     MOV     A,i
00C8 A4                MUL     AB
00C9 2400        E     ADD     A,#LOW channels+0DH
00CB F582              MOV     DPL,A
00CD E5F0              MOV     A,B
00CF 3400        E     ADDC    A,#HIGH channels+0DH
00D1 F583              MOV     DPH,A
00D3 E0                MOVX    A,@DPTR
00D4 6401              XRL     A,#01H
00D6 75F019            MOV     B,#019H
00D9 702F              JNZ     ?C0073
                                           ; SOURCE LINE # 391
                                           ; SOURCE LINE # 392
00DB E500        R     MOV     A,i
00DD A4                MUL     AB
00DE 2400        E     ADD     A,#LOW channels+0BH
00E0 F582              MOV     DPL,A
00E2 E5F0              MOV     A,B
00E4 3400        E     ADDC    A,#HIGH channels+0BH
00E6 F583              MOV     DPH,A
00E8 E0                MOVX    A,@DPTR
00E9 FF                MOV     R7,A
00EA AE00        R     MOV     R6,index
00EC 0500        R     INC     index
00EE 7400        R     MOV     A,#LOW TransferBuf
00F0 2E                ADD     A,R6
00F1 F582              MOV     DPL,A
00F3 E4                CLR     A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 45  

00F4 3400        R     ADDC    A,#HIGH TransferBuf
00F6 F583              MOV     DPH,A
00F8 EF                MOV     A,R7
00F9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 393
00FA 75F019            MOV     B,#019H
00FD E500        R     MOV     A,i
00FF A4                MUL     AB
0100 2400        E     ADD     A,#LOW channels+0AH
0102 F582              MOV     DPL,A
0104 E5F0              MOV     A,B
0106 3400        E     ADDC    A,#HIGH channels+0AH
                                           ; SOURCE LINE # 394
0108 802D              SJMP    ?C0273
010A         ?C0073:
                                           ; SOURCE LINE # 396
                                           ; SOURCE LINE # 397
010A E500        R     MOV     A,i
010C A4                MUL     AB
010D 2400        E     ADD     A,#LOW channels+07H
010F F582              MOV     DPL,A
0111 E5F0              MOV     A,B
0113 3400        E     ADDC    A,#HIGH channels+07H
0115 F583              MOV     DPH,A
0117 E0                MOVX    A,@DPTR
0118 FF                MOV     R7,A
0119 AE00        R     MOV     R6,index
011B 0500        R     INC     index
011D 7400        R     MOV     A,#LOW TransferBuf
011F 2E                ADD     A,R6
0120 F582              MOV     DPL,A
0122 E4                CLR     A
0123 3400        R     ADDC    A,#HIGH TransferBuf
0125 F583              MOV     DPH,A
0127 EF                MOV     A,R7
0128 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 398
0129 75F019            MOV     B,#019H
012C E500        R     MOV     A,i
012E A4                MUL     AB
012F 2400        E     ADD     A,#LOW channels+06H
0131 F582              MOV     DPL,A
0133 E5F0              MOV     A,B
0135 3400        E     ADDC    A,#HIGH channels+06H
0137         ?C0273:
0137 F583              MOV     DPH,A
0139 E0                MOVX    A,@DPTR
013A FF                MOV     R7,A
013B AE00        R     MOV     R6,index
013D 0500        R     INC     index
013F 7400        R     MOV     A,#LOW TransferBuf
0141 2E                ADD     A,R6
0142 F582              MOV     DPL,A
0144 E4                CLR     A
0145 3400        R     ADDC    A,#HIGH TransferBuf
0147 F583              MOV     DPH,A
0149 EF                MOV     A,R7
014A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 399
014B         ?C0074:
                                           ; SOURCE LINE # 402
                                           ; SOURCE LINE # 403
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 46  

                                           ; SOURCE LINE # 404
                                           ; SOURCE LINE # 405
014B 020000      R     LJMP    ?C0275
                                           ; SOURCE LINE # 407
014E         ?C0075:
                                           ; SOURCE LINE # 408
                                           ; SOURCE LINE # 409
014E 75F019            MOV     B,#019H
0151 E500        R     MOV     A,i
0153 A4                MUL     AB
0154 2400        E     ADD     A,#LOW channels+0DH
0156 F582              MOV     DPL,A
0158 E5F0              MOV     A,B
015A 3400        E     ADDC    A,#HIGH channels+0DH
015C F583              MOV     DPH,A
015E E0                MOVX    A,@DPTR
015F 6401              XRL     A,#01H
0161 75F019            MOV     B,#019H
0164 7051              JNZ     ?C0076
                                           ; SOURCE LINE # 410
                                           ; SOURCE LINE # 411
0166 E500        R     MOV     A,i
0168 A4                MUL     AB
0169 2400        E     ADD     A,#LOW channels+0CH
016B F582              MOV     DPL,A
016D E5F0              MOV     A,B
016F 3400        E     ADDC    A,#HIGH channels+0CH
0171 F583              MOV     DPH,A
0173 E0                MOVX    A,@DPTR
0174 FF                MOV     R7,A
0175 AE00        R     MOV     R6,index
0177 0500        R     INC     index
0179 7400        R     MOV     A,#LOW TransferBuf
017B 2E                ADD     A,R6
017C F582              MOV     DPL,A
017E E4                CLR     A
017F 3400        R     ADDC    A,#HIGH TransferBuf
0181 F583              MOV     DPH,A
0183 EF                MOV     A,R7
0184 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 412
0185 75F019            MOV     B,#019H
0188 E500        R     MOV     A,i
018A A4                MUL     AB
018B 2400        E     ADD     A,#LOW channels+0BH
018D F582              MOV     DPL,A
018F E5F0              MOV     A,B
0191 3400        E     ADDC    A,#HIGH channels+0BH
0193 F583              MOV     DPH,A
0195 E0                MOVX    A,@DPTR
0196 FF                MOV     R7,A
0197 AE00        R     MOV     R6,index
0199 0500        R     INC     index
019B 7400        R     MOV     A,#LOW TransferBuf
019D 2E                ADD     A,R6
019E F582              MOV     DPL,A
01A0 E4                CLR     A
01A1 3400        R     ADDC    A,#HIGH TransferBuf
01A3 F583              MOV     DPH,A
01A5 EF                MOV     A,R7
01A6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 413
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 47  

01A7 75F019            MOV     B,#019H
01AA E500        R     MOV     A,i
01AC A4                MUL     AB
01AD 2400        E     ADD     A,#LOW channels+0AH
01AF F582              MOV     DPL,A
01B1 E5F0              MOV     A,B
01B3 3400        E     ADDC    A,#HIGH channels+0AH
                                           ; SOURCE LINE # 414
01B5 804F              SJMP    ?C0274
01B7         ?C0076:
                                           ; SOURCE LINE # 416
                                           ; SOURCE LINE # 417
01B7 E500        R     MOV     A,i
01B9 A4                MUL     AB
01BA 2400        E     ADD     A,#LOW channels+08H
01BC F582              MOV     DPL,A
01BE E5F0              MOV     A,B
01C0 3400        E     ADDC    A,#HIGH channels+08H
01C2 F583              MOV     DPH,A
01C4 E0                MOVX    A,@DPTR
01C5 FF                MOV     R7,A
01C6 AE00        R     MOV     R6,index
01C8 0500        R     INC     index
01CA 7400        R     MOV     A,#LOW TransferBuf
01CC 2E                ADD     A,R6
01CD F582              MOV     DPL,A
01CF E4                CLR     A
01D0 3400        R     ADDC    A,#HIGH TransferBuf
01D2 F583              MOV     DPH,A
01D4 EF                MOV     A,R7
01D5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 418
01D6 75F019            MOV     B,#019H
01D9 E500        R     MOV     A,i
01DB A4                MUL     AB
01DC 2400        E     ADD     A,#LOW channels+07H
01DE F582              MOV     DPL,A
01E0 E5F0              MOV     A,B
01E2 3400        E     ADDC    A,#HIGH channels+07H
01E4 F583              MOV     DPH,A
01E6 E0                MOVX    A,@DPTR
01E7 FF                MOV     R7,A
01E8 AE00        R     MOV     R6,index
01EA 0500        R     INC     index
01EC 7400        R     MOV     A,#LOW TransferBuf
01EE 2E                ADD     A,R6
01EF F582              MOV     DPL,A
01F1 E4                CLR     A
01F2 3400        R     ADDC    A,#HIGH TransferBuf
01F4 F583              MOV     DPH,A
01F6 EF                MOV     A,R7
01F7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 419
01F8 75F019            MOV     B,#019H
01FB E500        R     MOV     A,i
01FD A4                MUL     AB
01FE 2400        E     ADD     A,#LOW channels+06H
0200 F582              MOV     DPL,A
0202 E5F0              MOV     A,B
0204 3400        E     ADDC    A,#HIGH channels+06H
0206         ?C0274:
0206 F583              MOV     DPH,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 48  

0208 E0                MOVX    A,@DPTR
0209 FF                MOV     R7,A
020A AE00        R     MOV     R6,index
020C 0500        R     INC     index
020E 7400        R     MOV     A,#LOW TransferBuf
0210 2E                ADD     A,R6
0211 F582              MOV     DPL,A
0213 E4                CLR     A
0214 3400        R     ADDC    A,#HIGH TransferBuf
0216 F583              MOV     DPH,A
0218 EF                MOV     A,R7
0219 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 420
021A         ?C0077:
                                           ; SOURCE LINE # 422
021A         ?C0275:
021A 75F019            MOV     B,#019H
021D E500        R     MOV     A,i
021F A4                MUL     AB
0220 2400        E     ADD     A,#LOW channels+03H
0222 F582              MOV     DPL,A
0224 E5F0              MOV     A,B
0226 3400        E     ADDC    A,#HIGH channels+03H
0228 F583              MOV     DPH,A
022A E0                MOVX    A,@DPTR
022B FF                MOV     R7,A
022C AE00        R     MOV     R6,index
022E 0500        R     INC     index
0230 7400        R     MOV     A,#LOW TransferBuf
0232 2E                ADD     A,R6
0233 F582              MOV     DPL,A
0235 E4                CLR     A
0236 3400        R     ADDC    A,#HIGH TransferBuf
0238 F583              MOV     DPH,A
023A EF                MOV     A,R7
023B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 423
023C 75F019            MOV     B,#019H
023F E500        R     MOV     A,i
0241 A4                MUL     AB
0242 2400        E     ADD     A,#LOW channels+04H
0244 F582              MOV     DPL,A
0246 E5F0              MOV     A,B
0248 3400        E     ADDC    A,#HIGH channels+04H
                                           ; SOURCE LINE # 424
                                           ; SOURCE LINE # 425
024A 020000      R     LJMP    ?C0278
                                           ; SOURCE LINE # 426
                                           ; SOURCE LINE # 427
                                           ; SOURCE LINE # 428
                                           ; SOURCE LINE # 430
024D         ?C0078:
                                           ; SOURCE LINE # 431
                                           ; SOURCE LINE # 432
024D 75F019            MOV     B,#019H
0250 E500        R     MOV     A,i
0252 A4                MUL     AB
0253 2400        E     ADD     A,#LOW channels+02H
0255 F582              MOV     DPL,A
0257 E5F0              MOV     A,B
0259 3400        E     ADDC    A,#HIGH channels+02H
025B F583              MOV     DPH,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 49  

025D E0                MOVX    A,@DPTR
025E 6003              JZ      $ + 5H
0260 020000      R     LJMP    ?C0068
                                           ; SOURCE LINE # 433
                                           ; SOURCE LINE # 434
0263         ?C0080:
                                           ; SOURCE LINE # 435
                                           ; SOURCE LINE # 436
0263 75F019            MOV     B,#019H
0266 E500        R     MOV     A,i
0268 A4                MUL     AB
0269 2400        E     ADD     A,#LOW channels+08H
026B F582              MOV     DPL,A
026D E5F0              MOV     A,B
026F 3400        E     ADDC    A,#HIGH channels+08H
0271 F583              MOV     DPH,A
0273 E0                MOVX    A,@DPTR
0274 FF                MOV     R7,A
0275 AE00        R     MOV     R6,index
0277 0500        R     INC     index
0279 7400        R     MOV     A,#LOW TransferBuf
027B 2E                ADD     A,R6
027C F582              MOV     DPL,A
027E E4                CLR     A
027F 3400        R     ADDC    A,#HIGH TransferBuf
0281 F583              MOV     DPH,A
0283 EF                MOV     A,R7
0284 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 437
0285 75F019            MOV     B,#019H
0288 E500        R     MOV     A,i
028A A4                MUL     AB
028B 2400        E     ADD     A,#LOW channels+07H
028D F582              MOV     DPL,A
028F E5F0              MOV     A,B
0291 3400        E     ADDC    A,#HIGH channels+07H
0293 F583              MOV     DPH,A
0295 E0                MOVX    A,@DPTR
0296 FF                MOV     R7,A
0297 AE00        R     MOV     R6,index
0299 0500        R     INC     index
029B 7400        R     MOV     A,#LOW TransferBuf
029D 2E                ADD     A,R6
029E F582              MOV     DPL,A
02A0 E4                CLR     A
02A1 3400        R     ADDC    A,#HIGH TransferBuf
02A3 F583              MOV     DPH,A
02A5 EF                MOV     A,R7
02A6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 438
02A7 75F019            MOV     B,#019H
02AA E500        R     MOV     A,i
02AC A4                MUL     AB
02AD 2400        E     ADD     A,#LOW channels+06H
02AF F582              MOV     DPL,A
02B1 E5F0              MOV     A,B
02B3 3400        E     ADDC    A,#HIGH channels+06H
02B5 F583              MOV     DPH,A
02B7 E0                MOVX    A,@DPTR
02B8 FF                MOV     R7,A
02B9 AE00        R     MOV     R6,index
02BB 0500        R     INC     index
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 50  

02BD 7400        R     MOV     A,#LOW TransferBuf
02BF 2E                ADD     A,R6
02C0 F582              MOV     DPL,A
02C2 E4                CLR     A
02C3 3400        R     ADDC    A,#HIGH TransferBuf
02C5 F583              MOV     DPH,A
02C7 EF                MOV     A,R7
02C8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 439
02C9 75F019            MOV     B,#019H
02CC E500        R     MOV     A,i
02CE A4                MUL     AB
02CF 2400        E     ADD     A,#LOW channels+05H
02D1 F582              MOV     DPL,A
02D3 E5F0              MOV     A,B
02D5 3400        E     ADDC    A,#HIGH channels+05H
02D7 F583              MOV     DPH,A
02D9 E0                MOVX    A,@DPTR
02DA FF                MOV     R7,A
02DB AE00        R     MOV     R6,index
02DD 0500        R     INC     index
02DF 7400        R     MOV     A,#LOW TransferBuf
02E1 2E                ADD     A,R6
02E2 F582              MOV     DPL,A
02E4 E4                CLR     A
02E5 3400        R     ADDC    A,#HIGH TransferBuf
02E7 F583              MOV     DPH,A
02E9 EF                MOV     A,R7
02EA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 440
02EB 75F019            MOV     B,#019H
02EE E500        R     MOV     A,i
02F0 A4                MUL     AB
02F1 2400        E     ADD     A,#LOW channels+03H
02F3 F582              MOV     DPL,A
02F5 E5F0              MOV     A,B
02F7 3400        E     ADDC    A,#HIGH channels+03H
02F9         ?C0276:
                                           ; SOURCE LINE # 441
                                           ; SOURCE LINE # 442
02F9 020000      R     LJMP    ?C0278
                                           ; SOURCE LINE # 443
                                           ; SOURCE LINE # 444
                                           ; SOURCE LINE # 445
                                           ; SOURCE LINE # 447
02FC         ?C0081:
                                           ; SOURCE LINE # 448
                                           ; SOURCE LINE # 449
02FC 75F019            MOV     B,#019H
02FF E500        R     MOV     A,i
0301 A4                MUL     AB
0302 2400        E     ADD     A,#LOW channels+02H
0304 F582              MOV     DPL,A
0306 E5F0              MOV     A,B
0308 3400        E     ADDC    A,#HIGH channels+02H
030A F583              MOV     DPH,A
030C E0                MOVX    A,@DPTR
030D 14                DEC     A
030E 605A              JZ      ?C0084
0310 04                INC     A
0311 6003              JZ      $ + 5H
0313 020000      R     LJMP    ?C0068
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 51  

                                           ; SOURCE LINE # 450
                                           ; SOURCE LINE # 452
0316         ?C0083:
                                           ; SOURCE LINE # 453
                                           ; SOURCE LINE # 454
0316 75F019            MOV     B,#019H
0319 E500        R     MOV     A,i
031B A4                MUL     AB
031C 2400        E     ADD     A,#LOW channels+08H
031E F582              MOV     DPL,A
0320 E5F0              MOV     A,B
0322 3400        E     ADDC    A,#HIGH channels+08H
0324 F583              MOV     DPH,A
0326 E0                MOVX    A,@DPTR
0327 FF                MOV     R7,A
0328 AE00        R     MOV     R6,index
032A 0500        R     INC     index
032C 7400        R     MOV     A,#LOW TransferBuf
032E 2E                ADD     A,R6
032F F582              MOV     DPL,A
0331 E4                CLR     A
0332 3400        R     ADDC    A,#HIGH TransferBuf
0334 F583              MOV     DPH,A
0336 EF                MOV     A,R7
0337 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 455
0338 75F019            MOV     B,#019H
033B E500        R     MOV     A,i
033D A4                MUL     AB
033E 2400        E     ADD     A,#LOW channels+07H
0340 F582              MOV     DPL,A
0342 E5F0              MOV     A,B
0344 3400        E     ADDC    A,#HIGH channels+07H
0346 F583              MOV     DPH,A
0348 E0                MOVX    A,@DPTR
0349 FF                MOV     R7,A
034A AE00        R     MOV     R6,index
034C 0500        R     INC     index
034E 7400        R     MOV     A,#LOW TransferBuf
0350 2E                ADD     A,R6
0351 F582              MOV     DPL,A
0353 E4                CLR     A
0354 3400        R     ADDC    A,#HIGH TransferBuf
0356 F583              MOV     DPH,A
0358 EF                MOV     A,R7
0359 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 456
035A 75F019            MOV     B,#019H
035D E500        R     MOV     A,i
035F A4                MUL     AB
0360 2400        E     ADD     A,#LOW channels+03H
0362 F582              MOV     DPL,A
0364 E5F0              MOV     A,B
0366 3400        E     ADDC    A,#HIGH channels+03H
0368         ?C0277:
                                           ; SOURCE LINE # 457
                                           ; SOURCE LINE # 458
0368 8052              SJMP    ?C0278
                                           ; SOURCE LINE # 460
036A         ?C0084:
                                           ; SOURCE LINE # 461
                                           ; SOURCE LINE # 462
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 52  

036A 75F019            MOV     B,#019H
036D E500        R     MOV     A,i
036F A4                MUL     AB
0370 2400        E     ADD     A,#LOW channels+08H
0372 F582              MOV     DPL,A
0374 E5F0              MOV     A,B
0376 3400        E     ADDC    A,#HIGH channels+08H
0378 F583              MOV     DPH,A
037A E0                MOVX    A,@DPTR
037B FF                MOV     R7,A
037C AE00        R     MOV     R6,index
037E 0500        R     INC     index
0380 7400        R     MOV     A,#LOW TransferBuf
0382 2E                ADD     A,R6
0383 F582              MOV     DPL,A
0385 E4                CLR     A
0386 3400        R     ADDC    A,#HIGH TransferBuf
0388 F583              MOV     DPH,A
038A EF                MOV     A,R7
038B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 463
038C 75F019            MOV     B,#019H
038F E500        R     MOV     A,i
0391 A4                MUL     AB
0392 2400        E     ADD     A,#LOW channels+07H
0394 F582              MOV     DPL,A
0396 E5F0              MOV     A,B
0398 3400        E     ADDC    A,#HIGH channels+07H
039A F583              MOV     DPH,A
039C E0                MOVX    A,@DPTR
039D FF                MOV     R7,A
039E AE00        R     MOV     R6,index
03A0 0500        R     INC     index
03A2 7400        R     MOV     A,#LOW TransferBuf
03A4 2E                ADD     A,R6
03A5 F582              MOV     DPL,A
03A7 E4                CLR     A
03A8 3400        R     ADDC    A,#HIGH TransferBuf
03AA F583              MOV     DPH,A
03AC EF                MOV     A,R7
03AD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 464
03AE 75F019            MOV     B,#019H
03B1 E500        R     MOV     A,i
03B3 A4                MUL     AB
03B4 2400        E     ADD     A,#LOW channels+03H
03B6 F582              MOV     DPL,A
03B8 E5F0              MOV     A,B
03BA 3400        E     ADDC    A,#HIGH channels+03H
03BC         ?C0278:
03BC F583              MOV     DPH,A
03BE E0                MOVX    A,@DPTR
03BF FF                MOV     R7,A
03C0 AE00        R     MOV     R6,index
03C2 0500        R     INC     index
03C4 7400        R     MOV     A,#LOW TransferBuf
03C6 2E                ADD     A,R6
03C7 F582              MOV     DPL,A
03C9 E4                CLR     A
03CA 3400        R     ADDC    A,#HIGH TransferBuf
03CC F583              MOV     DPH,A
03CE EF                MOV     A,R7
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 53  

03CF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 465
                                           ; SOURCE LINE # 466
                                           ; SOURCE LINE # 467
                                           ; SOURCE LINE # 468
                                           ; SOURCE LINE # 469
                                           ; SOURCE LINE # 470
                                           ; SOURCE LINE # 471
03D0         ?C0068:
03D0 0500        R     INC     i
03D2 020000      R     LJMP    ?C0066
03D5         ?C0067:
                                           ; SOURCE LINE # 473
03D5 E500        R     MOV     A,index
03D7 24FB              ADD     A,#0FBH
03D9 900000      R     MOV     DPTR,#TransferBuf+05H
03DC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 474
03DD 7E00        R     MOV     R6,#HIGH TransferBuf+01H
03DF 7F00        R     MOV     R7,#LOW TransferBuf+01H
03E1 E500        R     MOV     A,index
03E3 14                DEC     A
03E4 FD                MOV     R5,A
03E5 120000      E     LCALL   _CRC_Check
03E8 7400        R     MOV     A,#LOW TransferBuf
03EA 2500        R     ADD     A,index
03EC F582              MOV     DPL,A
03EE E4                CLR     A
03EF 3400        R     ADDC    A,#HIGH TransferBuf
03F1 F583              MOV     DPH,A
03F3 EF                MOV     A,R7
03F4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 475
03F5 E500        R     MOV     A,index
03F7 04                INC     A
03F8 FF                MOV     R7,A
                                           ; SOURCE LINE # 476
03F9         ?C0085:
03F9 22                RET     
             ; FUNCTION Channel_All_Get_Data (END)

             ; FUNCTION Channel_Set_Calibrate (BEGIN)
                                           ; SOURCE LINE # 479
                                           ; SOURCE LINE # 480
                                           ; SOURCE LINE # 484
0000 900000      R     MOV     DPTR,#RecieveBuf+0BH
0003 E0                MOVX    A,@DPTR
0004 FF                MOV     R7,A
0005 900000      R     MOV     DPTR,#sym_8_to_float
0008 EF                MOV     A,R7
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 485
000A 900000      R     MOV     DPTR,#RecieveBuf+0AH
000D E0                MOVX    A,@DPTR
000E FF                MOV     R7,A
000F 900000      R     MOV     DPTR,#sym_8_to_float+01H
0012 EF                MOV     A,R7
0013 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 486
0014 900000      R     MOV     DPTR,#RecieveBuf+09H
0017 E0                MOVX    A,@DPTR
0018 FF                MOV     R7,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 54  

0019 900000      R     MOV     DPTR,#sym_8_to_float+02H
001C EF                MOV     A,R7
001D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 487
001E 900000      R     MOV     DPTR,#RecieveBuf+08H
0021 E0                MOVX    A,@DPTR
0022 FF                MOV     R7,A
0023 900000      R     MOV     DPTR,#sym_8_to_float+03H
0026 EF                MOV     A,R7
0027 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 489
0028 900000      R     MOV     DPTR,#sym_8_to_float
002B E0                MOVX    A,@DPTR
002C FC                MOV     R4,A
002D A3                INC     DPTR
002E E0                MOVX    A,@DPTR
002F FD                MOV     R5,A
0030 A3                INC     DPTR
0031 E0                MOVX    A,@DPTR
0032 FE                MOV     R6,A
0033 A3                INC     DPTR
0034 E0                MOVX    A,@DPTR
0035 FF                MOV     R7,A
0036 900000      R     MOV     DPTR,#K
0039 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 491
003C 900000      R     MOV     DPTR,#RecieveBuf+0FH
003F E0                MOVX    A,@DPTR
0040 FF                MOV     R7,A
0041 900000      R     MOV     DPTR,#sym_8_to_float
0044 EF                MOV     A,R7
0045 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 492
0046 900000      R     MOV     DPTR,#RecieveBuf+0EH
0049 E0                MOVX    A,@DPTR
004A FF                MOV     R7,A
004B 900000      R     MOV     DPTR,#sym_8_to_float+01H
004E EF                MOV     A,R7
004F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 493
0050 900000      R     MOV     DPTR,#RecieveBuf+0DH
0053 E0                MOVX    A,@DPTR
0054 FF                MOV     R7,A
0055 900000      R     MOV     DPTR,#sym_8_to_float+02H
0058 EF                MOV     A,R7
0059 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 494
005A 900000      R     MOV     DPTR,#RecieveBuf+0CH
005D E0                MOVX    A,@DPTR
005E FF                MOV     R7,A
005F 900000      R     MOV     DPTR,#sym_8_to_float+03H
0062 EF                MOV     A,R7
0063 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 496
0064 900000      R     MOV     DPTR,#sym_8_to_float
0067 E0                MOVX    A,@DPTR
0068 FC                MOV     R4,A
0069 A3                INC     DPTR
006A E0                MOVX    A,@DPTR
006B FD                MOV     R5,A
006C A3                INC     DPTR
006D E0                MOVX    A,@DPTR
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 55  

006E FE                MOV     R6,A
006F A3                INC     DPTR
0070 E0                MOVX    A,@DPTR
0071 FF                MOV     R7,A
0072 900000      R     MOV     DPTR,#C
0075 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 498
0078 900000      R     MOV     DPTR,#RecieveBuf+07H
007B E0                MOVX    A,@DPTR
007C FF                MOV     R7,A
007D EF                MOV     A,R7
007E 120000      E     LCALL   ?C?CCASE
0081 0000        R     DW      ?C0087
0083 00                DB      00H
0084 0000        R     DW      ?C0088
0086 01                DB      01H
0087 0000        R     DW      ?C0089
0089 02                DB      02H
008A 0000              DW      00H
008C 0000        R     DW      ?C0090
                                           ; SOURCE LINE # 499
                                           ; SOURCE LINE # 500
008E         ?C0087:
                                           ; SOURCE LINE # 501
                                           ; SOURCE LINE # 502
008E 900000      R     MOV     DPTR,#RecieveBuf+06H
0091 E0                MOVX    A,@DPTR
0092 FF                MOV     R7,A
0093 EF                MOV     A,R7
0094 C0E0              PUSH    ACC
0096 900000      R     MOV     DPTR,#K
0099 E0                MOVX    A,@DPTR
009A FC                MOV     R4,A
009B A3                INC     DPTR
009C E0                MOVX    A,@DPTR
009D FD                MOV     R5,A
009E A3                INC     DPTR
009F E0                MOVX    A,@DPTR
00A0 FE                MOV     R6,A
00A1 A3                INC     DPTR
00A2 E0                MOVX    A,@DPTR
00A3 FF                MOV     R7,A
00A4 900000      E     MOV     DPTR,#?_Calibrate?BYTE+01H
00A7 120000      E     LCALL   ?C?LSTXDATA
00AA 900000      R     MOV     DPTR,#C
00AD E0                MOVX    A,@DPTR
00AE FC                MOV     R4,A
00AF A3                INC     DPTR
00B0 E0                MOVX    A,@DPTR
00B1 FD                MOV     R5,A
00B2 A3                INC     DPTR
00B3 E0                MOVX    A,@DPTR
00B4 FE                MOV     R6,A
00B5 A3                INC     DPTR
00B6 E0                MOVX    A,@DPTR
00B7 FF                MOV     R7,A
00B8 900000      E     MOV     DPTR,#?_Calibrate?BYTE+05H
00BB 120000      E     LCALL   ?C?LSTXDATA
00BE D0E0              POP     ACC
00C0 FF                MOV     R7,A
00C1 120000      E     LCALL   _Calibrate
                                           ; SOURCE LINE # 503
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 56  

                                           ; SOURCE LINE # 504
00C4 8019              SJMP    ?C0086
                                           ; SOURCE LINE # 506
00C6         ?C0088:
                                           ; SOURCE LINE # 507
                                           ; SOURCE LINE # 508
00C6 900000      R     MOV     DPTR,#RecieveBuf+06H
00C9 E0                MOVX    A,@DPTR
00CA FF                MOV     R7,A
00CB 7D00              MOV     R5,#00H
00CD 120000      E     LCALL   _Calibrate_Set_Flag
                                           ; SOURCE LINE # 509
                                           ; SOURCE LINE # 510
00D0 800D              SJMP    ?C0086
                                           ; SOURCE LINE # 512
00D2         ?C0089:
                                           ; SOURCE LINE # 513
                                           ; SOURCE LINE # 514
00D2 900000      R     MOV     DPTR,#RecieveBuf+06H
00D5 E0                MOVX    A,@DPTR
00D6 FF                MOV     R7,A
00D7 7D01              MOV     R5,#01H
00D9 120000      E     LCALL   _Calibrate_Set_Flag
                                           ; SOURCE LINE # 515
                                           ; SOURCE LINE # 516
00DC 8001              SJMP    ?C0086
                                           ; SOURCE LINE # 518
00DE         ?C0090:
                                           ; SOURCE LINE # 519
                                           ; SOURCE LINE # 520
00DE 00                NOP     
                                           ; SOURCE LINE # 521
                                           ; SOURCE LINE # 522
                                           ; SOURCE LINE # 523
00DF         ?C0086:
                                           ; SOURCE LINE # 526
00DF 7F00              MOV     R7,#00H
00E1 120000      R     LCALL   _Request_Error
                                           ; SOURCE LINE # 527
00E4         ?C0091:
00E4 22                RET     
             ; FUNCTION Channel_Set_Calibrate (END)

             ; FUNCTION Channel_Get_Calibrate_Value (BEGIN)
                                           ; SOURCE LINE # 529
                                           ; SOURCE LINE # 530
                                           ; SOURCE LINE # 531
0000 750000      R     MOV     channel,#00H
                                           ; SOURCE LINE # 534
0003 900000      R     MOV     DPTR,#TransferBuf
0006 E4                CLR     A
0007 F0                MOVX    @DPTR,A
0008 900000      R     MOV     DPTR,#TransferBuf+01H
000B 74D7              MOV     A,#0D7H
000D F0                MOVX    @DPTR,A
000E 900000      R     MOV     DPTR,#TransferBuf+02H
0011 7429              MOV     A,#029H
0013 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 535
0014 900000      R     MOV     DPTR,#ADRESS_DEV
0017 E0                MOVX    A,@DPTR
0018 FF                MOV     R7,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 57  

0019 900000      R     MOV     DPTR,#TransferBuf+03H
001C EF                MOV     A,R7
001D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 536
001E 900000      R     MOV     DPTR,#TransferBuf+04H
0021 74CC              MOV     A,#0CCH
0023 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 537
0024 900000      R     MOV     DPTR,#TransferBuf+05H
0027 740B              MOV     A,#0BH
0029 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 540
002A 900000      R     MOV     DPTR,#RecieveBuf+06H
002D E0                MOVX    A,@DPTR
002E FF                MOV     R7,A
002F 8F00        R     MOV     channel,R7
                                           ; SOURCE LINE # 542
0031 900000      E     MOV     DPTR,#channel_number
0034 E0                MOVX    A,@DPTR
0035 FF                MOV     R7,A
0036 E500        R     MOV     A,channel
0038 C3                CLR     C
0039 9F                SUBB    A,R7
003A 4006              JC      ?C0092
                                           ; SOURCE LINE # 543
                                           ; SOURCE LINE # 544
003C 7F09              MOV     R7,#09H
003E 120000      R     LCALL   _Request_Error
0041 22                RET     
                                           ; SOURCE LINE # 545
0042         ?C0092:
                                           ; SOURCE LINE # 547
0042 900000      R     MOV     DPTR,#TransferBuf+06H
0045 E500        R     MOV     A,channel
0047 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 549
0048 AF00        R     MOV     R7,channel
004A 75F019            MOV     B,#019H
004D EF                MOV     A,R7
004E A4                MUL     AB
004F 2400        E     ADD     A,#LOW channels+0DH
0051 F582              MOV     DPL,A
0053 E5F0              MOV     A,B
0055 3400        E     ADDC    A,#HIGH channels+0DH
0057 F583              MOV     DPH,A
0059 E0                MOVX    A,@DPTR
005A FF                MOV     R7,A
005B 900000      R     MOV     DPTR,#TransferBuf+07H
005E EF                MOV     A,R7
005F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 551
0060 AF00        R     MOV     R7,channel
0062 75F019            MOV     B,#019H
0065 EF                MOV     A,R7
0066 A4                MUL     AB
0067 2400        E     ADD     A,#LOW channels+0EH
0069 F582              MOV     DPL,A
006B E5F0              MOV     A,B
006D 3400        E     ADDC    A,#HIGH channels+0EH
006F F583              MOV     DPH,A
0071 E0                MOVX    A,@DPTR
0072 FC                MOV     R4,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 58  

0073 A3                INC     DPTR
0074 E0                MOVX    A,@DPTR
0075 FD                MOV     R5,A
0076 A3                INC     DPTR
0077 E0                MOVX    A,@DPTR
0078 FE                MOV     R6,A
0079 A3                INC     DPTR
007A E0                MOVX    A,@DPTR
007B FF                MOV     R7,A
007C 900000      R     MOV     DPTR,#sym_8_to_float
007F 120000      E     LCALL   ?C?LSTXDATA
                                           ; SOURCE LINE # 553
0082 900000      R     MOV     DPTR,#sym_8_to_float
0085 E0                MOVX    A,@DPTR
0086 FF                MOV     R7,A
0087 900000      R     MOV     DPTR,#TransferBuf+0BH
008A EF                MOV     A,R7
008B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 554
008C 900000      R     MOV     DPTR,#sym_8_to_float+01H
008F E0                MOVX    A,@DPTR
0090 FF                MOV     R7,A
0091 900000      R     MOV     DPTR,#TransferBuf+0AH
0094 EF                MOV     A,R7
0095 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 555
0096 900000      R     MOV     DPTR,#sym_8_to_float+02H
0099 E0                MOVX    A,@DPTR
009A FF                MOV     R7,A
009B 900000      R     MOV     DPTR,#TransferBuf+09H
009E EF                MOV     A,R7
009F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 556
00A0 900000      R     MOV     DPTR,#sym_8_to_float+03H
00A3 E0                MOVX    A,@DPTR
00A4 FF                MOV     R7,A
00A5 900000      R     MOV     DPTR,#TransferBuf+08H
00A8 EF                MOV     A,R7
00A9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 558
00AA AF00        R     MOV     R7,channel
00AC 75F019            MOV     B,#019H
00AF EF                MOV     A,R7
00B0 A4                MUL     AB
00B1 2400        E     ADD     A,#LOW channels+012H
00B3 F582              MOV     DPL,A
00B5 E5F0              MOV     A,B
00B7 3400        E     ADDC    A,#HIGH channels+012H
00B9 F583              MOV     DPH,A
00BB E0                MOVX    A,@DPTR
00BC FC                MOV     R4,A
00BD A3                INC     DPTR
00BE E0                MOVX    A,@DPTR
00BF FD                MOV     R5,A
00C0 A3                INC     DPTR
00C1 E0                MOVX    A,@DPTR
00C2 FE                MOV     R6,A
00C3 A3                INC     DPTR
00C4 E0                MOVX    A,@DPTR
00C5 FF                MOV     R7,A
00C6 900000      R     MOV     DPTR,#sym_8_to_float
00C9 120000      E     LCALL   ?C?LSTXDATA
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 59  

                                           ; SOURCE LINE # 560
00CC 900000      R     MOV     DPTR,#sym_8_to_float
00CF E0                MOVX    A,@DPTR
00D0 FF                MOV     R7,A
00D1 900000      R     MOV     DPTR,#TransferBuf+0FH
00D4 EF                MOV     A,R7
00D5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 561
00D6 900000      R     MOV     DPTR,#sym_8_to_float+01H
00D9 E0                MOVX    A,@DPTR
00DA FF                MOV     R7,A
00DB 900000      R     MOV     DPTR,#TransferBuf+0EH
00DE EF                MOV     A,R7
00DF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 562
00E0 900000      R     MOV     DPTR,#sym_8_to_float+02H
00E3 E0                MOVX    A,@DPTR
00E4 FF                MOV     R7,A
00E5 900000      R     MOV     DPTR,#TransferBuf+0DH
00E8 EF                MOV     A,R7
00E9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 563
00EA 900000      R     MOV     DPTR,#sym_8_to_float+03H
00ED E0                MOVX    A,@DPTR
00EE FF                MOV     R7,A
00EF 900000      R     MOV     DPTR,#TransferBuf+0CH
00F2 EF                MOV     A,R7
00F3 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 565
00F4 7E00        R     MOV     R6,#HIGH TransferBuf+01H
00F6 7F00        R     MOV     R7,#LOW TransferBuf+01H
00F8 7D0F              MOV     R5,#0FH
00FA 120000      E     LCALL   _CRC_Check
00FD 900000      R     MOV     DPTR,#TransferBuf+010H
0100 EF                MOV     A,R7
0101 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 566
0102 7F11              MOV     R7,#011H
                                           ; SOURCE LINE # 567
0104         ?C0093:
0104 22                RET     
             ; FUNCTION Channel_Get_Calibrate_Value (END)

             ; FUNCTION Channel_Set_Address_Desc (BEGIN)
                                           ; SOURCE LINE # 569
                                           ; SOURCE LINE # 570
                                           ; SOURCE LINE # 571
0000 900000      R     MOV     DPTR,#desc_len
0003 E4                CLR     A
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 572
0005 900000      R     MOV     DPTR,#RecieveBuf+05H
0008 E0                MOVX    A,@DPTR
0009 FF                MOV     R7,A
000A EF                MOV     A,R7
000B 24E5              ADD     A,#0E5H
000D FF                MOV     R7,A
000E 900000      R     MOV     DPTR,#desc_len
0011 EF                MOV     A,R7
0012 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 574
0013 900000      R     MOV     DPTR,#desc_len
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 60  

0016 E0                MOVX    A,@DPTR
0017 FF                MOV     R7,A
0018 EF                MOV     A,R7
0019 6054              JZ      ?C0094
                                           ; SOURCE LINE # 575
                                           ; SOURCE LINE # 576
001B 900000      R     MOV     DPTR,#RecieveBuf+06H
001E E0                MOVX    A,@DPTR
001F FF                MOV     R7,A
0020 7B01              MOV     R3,#01H
0022 7A00        R     MOV     R2,#HIGH RecieveBuf+07H
0024 7900        R     MOV     R1,#LOW RecieveBuf+07H
0026 EB                MOV     A,R3
0027 C0E0              PUSH    ACC
0029 EA                MOV     A,R2
002A C0E0              PUSH    ACC
002C E9                MOV     A,R1
002D C0E0              PUSH    ACC
002F 7B01              MOV     R3,#01H
0031 7A00        R     MOV     R2,#HIGH RecieveBuf+01BH
0033 7900        R     MOV     R1,#LOW RecieveBuf+01BH
0035 900000      R     MOV     DPTR,#?_Store_Dev_Address_Desc?BYTE+04H
0038 EB                MOV     A,R3
0039 F0                MOVX    @DPTR,A
003A A3                INC     DPTR
003B EA                MOV     A,R2
003C F0                MOVX    @DPTR,A
003D A3                INC     DPTR
003E E9                MOV     A,R1
003F F0                MOVX    @DPTR,A
0040 7B01              MOV     R3,#01H
0042 7A00        R     MOV     R2,#HIGH RecieveBuf+020H
0044 7900        R     MOV     R1,#LOW RecieveBuf+020H
0046 900000      R     MOV     DPTR,#?_Store_Dev_Address_Desc?BYTE+07H
0049 EB                MOV     A,R3
004A F0                MOVX    @DPTR,A
004B A3                INC     DPTR
004C EA                MOV     A,R2
004D F0                MOVX    @DPTR,A
004E A3                INC     DPTR
004F E9                MOV     A,R1
0050 F0                MOVX    @DPTR,A
0051 900000      R     MOV     DPTR,#desc_len
0054 E0                MOVX    A,@DPTR
0055 FE                MOV     R6,A
0056 900000      R     MOV     DPTR,#?_Store_Dev_Address_Desc?BYTE+0AH
0059 EE                MOV     A,R6
005A F0                MOVX    @DPTR,A
005B D0E0              POP     ACC
005D F9                MOV     R1,A
005E D0E0              POP     ACC
0060 FA                MOV     R2,A
0061 D0E0              POP     ACC
0063 FB                MOV     R3,A
0064 120000      R     LCALL   _Store_Dev_Address_Desc
                                           ; SOURCE LINE # 577
0067 7F00              MOV     R7,#00H
0069 120000      R     LCALL   _Request_Error
006C 22                RET     
                                           ; SOURCE LINE # 578
006D 8006              SJMP    ?C0096
006F         ?C0094:
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 61  

                                           ; SOURCE LINE # 580
                                           ; SOURCE LINE # 581
006F 7F09              MOV     R7,#09H
0071 120000      R     LCALL   _Request_Error
0074 22                RET     
                                           ; SOURCE LINE # 582
0075         ?C0096:
                                           ; SOURCE LINE # 583
0075 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 584
0077         ?C0095:
0077 22                RET     
             ; FUNCTION Channel_Set_Address_Desc (END)

             ; FUNCTION Channel_Set_All_Default (BEGIN)
                                           ; SOURCE LINE # 586
                                           ; SOURCE LINE # 587
                                           ; SOURCE LINE # 588
0000 120000      E     LCALL   Channels_Set_Default
                                           ; SOURCE LINE # 589
0003 120000      E     LCALL   Calibrate_Set_Default
                                           ; SOURCE LINE # 590
0006 7F00              MOV     R7,#00H
0008 120000      R     LCALL   _Request_Error
                                           ; SOURCE LINE # 591
000B         ?C0097:
000B 22                RET     
             ; FUNCTION Channel_Set_All_Default (END)

             ; FUNCTION _Request_Error (BEGIN)
                                           ; SOURCE LINE # 593
0000 900000      R     MOV     DPTR,#error_code
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 594
                                           ; SOURCE LINE # 595
0005 900000      R     MOV     DPTR,#TransferBuf
0008 E4                CLR     A
0009 F0                MOVX    @DPTR,A
000A 900000      R     MOV     DPTR,#TransferBuf+01H
000D 74D7              MOV     A,#0D7H
000F F0                MOVX    @DPTR,A
0010 900000      R     MOV     DPTR,#TransferBuf+02H
0013 7429              MOV     A,#029H
0015 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 596
0016 900000      R     MOV     DPTR,#ADRESS_DEV
0019 E0                MOVX    A,@DPTR
001A FF                MOV     R7,A
001B 900000      R     MOV     DPTR,#TransferBuf+03H
001E EF                MOV     A,R7
001F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 597
0020 900000      R     MOV     DPTR,#RecieveBuf+04H
0023 E0                MOVX    A,@DPTR
0024 FF                MOV     R7,A
0025 900000      R     MOV     DPTR,#TransferBuf+07H
0028 EF                MOV     A,R7
0029 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 598
002A 900000      R     MOV     DPTR,#TransferBuf+04H
002D 74FF              MOV     A,#0FFH
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 62  

002F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 600
0030 900000      R     MOV     DPTR,#STATE_BYTE
0033 E0                MOVX    A,@DPTR
0034 FF                MOV     R7,A
0035 900000      R     MOV     DPTR,#TransferBuf+06H
0038 EF                MOV     A,R7
0039 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 601
003A 900000      R     MOV     DPTR,#error_code
003D E0                MOVX    A,@DPTR
003E FF                MOV     R7,A
003F 900000      R     MOV     DPTR,#TransferBuf+08H
0042 EF                MOV     A,R7
0043 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 602
0044 900000      R     MOV     DPTR,#TransferBuf+05H
0047 7404              MOV     A,#04H
0049 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 603
004A 7E00        R     MOV     R6,#HIGH TransferBuf
004C 7F00        R     MOV     R7,#LOW TransferBuf
004E 7D09              MOV     R5,#09H
0050 120000      E     LCALL   _CRC_Check
0053 900000      R     MOV     DPTR,#TransferBuf+09H
0056 EF                MOV     A,R7
0057 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 604
0058 7F0A              MOV     R7,#0AH
                                           ; SOURCE LINE # 605
005A         ?C0098:
005A 22                RET     
             ; FUNCTION _Request_Error (END)

             ; FUNCTION _Old_CRC_Check (BEGIN)
                                           ; SOURCE LINE # 608
0000 900000      R     MOV     DPTR,#Spool_pr
0003 EE                MOV     A,R6
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EF                MOV     A,R7
0007 F0                MOVX    @DPTR,A
0008 900000      R     MOV     DPTR,#Count_pr
000B ED                MOV     A,R5
000C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 609
                                           ; SOURCE LINE # 610
000D 900000      R     MOV     DPTR,#crc
0010 E4                CLR     A
0011 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 611
0012 900000      R     MOV     DPTR,#i
0015 E4                CLR     A
0016 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 613
0017 900000      R     MOV     DPTR,#i
001A E4                CLR     A
001B F0                MOVX    @DPTR,A
001C         ?C0099:
001C 900000      R     MOV     DPTR,#Count_pr
001F E0                MOVX    A,@DPTR
0020 FF                MOV     R7,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 63  

0021 900000      R     MOV     DPTR,#i
0024 E0                MOVX    A,@DPTR
0025 FE                MOV     R6,A
0026 EE                MOV     A,R6
0027 C3                CLR     C
0028 9F                SUBB    A,R7
0029 5036              JNC     ?C0100
                                           ; SOURCE LINE # 614
                                           ; SOURCE LINE # 615
002B C2D7              CLR     CY
                                           ; SOURCE LINE # 616
002D 900000      R     MOV     DPTR,#i
0030 E0                MOVX    A,@DPTR
0031 FF                MOV     R7,A
0032 900000      R     MOV     DPTR,#Spool_pr
0035 E0                MOVX    A,@DPTR
0036 FC                MOV     R4,A
0037 A3                INC     DPTR
0038 E0                MOVX    A,@DPTR
0039 FD                MOV     R5,A
003A 8D82              MOV     DPL,R5
003C 8C83              MOV     DPH,R4
003E E582              MOV     A,DPL
0040 2F                ADD     A,R7
0041 F582              MOV     DPL,A
0043 E4                CLR     A
0044 3583              ADDC    A,DPH
0046 F583              MOV     DPH,A
0048 E0                MOVX    A,@DPTR
0049 FF                MOV     R7,A
004A 900000      R     MOV     DPTR,#crc
004D E0                MOVX    A,@DPTR
004E 2F                ADD     A,R7
004F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 617
0050 30D706            JNB     CY,?C0101
                                           ; SOURCE LINE # 618
                                           ; SOURCE LINE # 619
0053 900000      R     MOV     DPTR,#crc
0056 E0                MOVX    A,@DPTR
0057 04                INC     A
0058 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 620
0059         ?C0102:
                                           ; SOURCE LINE # 621
0059         ?C0101:
0059 900000      R     MOV     DPTR,#i
005C E0                MOVX    A,@DPTR
005D 04                INC     A
005E F0                MOVX    @DPTR,A
005F 80BB              SJMP    ?C0099
0061         ?C0100:
                                           ; SOURCE LINE # 622
0061 900000      R     MOV     DPTR,#crc
0064 E0                MOVX    A,@DPTR
0065 FF                MOV     R7,A
0066 C3                CLR     C
0067 74FF              MOV     A,#0FFH
0069 9F                SUBB    A,R7
006A FF                MOV     R7,A
006B 900000      R     MOV     DPTR,#crc
006E EF                MOV     A,R7
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 64  

006F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 624
0070 900000      R     MOV     DPTR,#crc
0073 E0                MOVX    A,@DPTR
0074 FF                MOV     R7,A
                                           ; SOURCE LINE # 625
0075         ?C0103:
0075 22                RET     
             ; FUNCTION _Old_CRC_Check (END)

             ; FUNCTION Old_Channel_Get_Data (BEGIN)
                                           ; SOURCE LINE # 627
                                           ; SOURCE LINE # 628
                                           ; SOURCE LINE # 629
0000 900000      R     MOV     DPTR,#channel
0003 E4                CLR     A
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 630
0005 900000      R     MOV     DPTR,#len
0008 E4                CLR     A
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 631
000A 900000      R     MOV     DPTR,#RecieveBuf+04H
000D E0                MOVX    A,@DPTR
000E FF                MOV     R7,A
000F EF                MOV     A,R7
0010 13                RRC     A
0011 13                RRC     A
0012 13                RRC     A
0013 541F              ANL     A,#01FH
0015 FF                MOV     R7,A
0016 EF                MOV     A,R7
0017 541F              ANL     A,#01FH
0019 FF                MOV     R7,A
001A 900000      R     MOV     DPTR,#channel
001D EF                MOV     A,R7
001E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 632
001F 900000      R     MOV     DPTR,#channel
0022 E0                MOVX    A,@DPTR
0023 FF                MOV     R7,A
0024 EF                MOV     A,R7
0025 C3                CLR     C
0026 940E              SUBB    A,#0EH
0028 4003              JC      $ + 5H
002A 020000      R     LJMP    ?C0104
                                           ; SOURCE LINE # 633
                                           ; SOURCE LINE # 634
002D 900000      R     MOV     DPTR,#TransferBuf
0030 E4                CLR     A
0031 F0                MOVX    @DPTR,A
0032 900000      R     MOV     DPTR,#TransferBuf+01H
0035 74D7              MOV     A,#0D7H
0037 F0                MOVX    @DPTR,A
0038 900000      R     MOV     DPTR,#TransferBuf+02H
003B 7428              MOV     A,#028H
003D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 635
003E 900000      R     MOV     DPTR,#TransferBuf+03H
0041 E4                CLR     A
0042 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 636
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 65  

0043 900000      R     MOV     DPTR,#RecieveBuf+04H
0046 E0                MOVX    A,@DPTR
0047 FF                MOV     R7,A
0048 900000      R     MOV     DPTR,#TransferBuf+04H
004B EF                MOV     A,R7
004C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 637
004D 900000      R     MOV     DPTR,#TransferBuf+05H
0050 7403              MOV     A,#03H
0052 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 639
0053 900000      R     MOV     DPTR,#channel
0056 E0                MOVX    A,@DPTR
0057 FF                MOV     R7,A
0058 75F019            MOV     B,#019H
005B EF                MOV     A,R7
005C A4                MUL     AB
005D 2400        E     ADD     A,#LOW channels+01H
005F F582              MOV     DPL,A
0061 E5F0              MOV     A,B
0063 3400        E     ADDC    A,#HIGH channels+01H
0065 F583              MOV     DPH,A
0067 E0                MOVX    A,@DPTR
0068 FF                MOV     R7,A
0069 EF                MOV     A,R7
006A 120000      E     LCALL   ?C?CCASE
006D 0000        R     DW      ?C0106
006F 00                DB      00H
0070 0000        R     DW      ?C0114
0072 01                DB      01H
0073 0000        R     DW      ?C0117
0075 02                DB      02H
0076 0000              DW      00H
0078 0000        R     DW      ?C0105
                                           ; SOURCE LINE # 640
                                           ; SOURCE LINE # 641
007A         ?C0106:
                                           ; SOURCE LINE # 642
                                           ; SOURCE LINE # 643
007A 900000      R     MOV     DPTR,#channel
007D E0                MOVX    A,@DPTR
007E FF                MOV     R7,A
007F 75F019            MOV     B,#019H
0082 EF                MOV     A,R7
0083 A4                MUL     AB
0084 2400        E     ADD     A,#LOW channels+02H
0086 F582              MOV     DPL,A
0088 E5F0              MOV     A,B
008A 3400        E     ADDC    A,#HIGH channels+02H
008C F583              MOV     DPH,A
008E E0                MOVX    A,@DPTR
008F FF                MOV     R7,A
0090 EF                MOV     A,R7
0091 120000      E     LCALL   ?C?CCASE
0094 0000        R     DW      ?C0108
0096 00                DB      00H
0097 0000        R     DW      ?C0111
0099 03                DB      03H
009A 0000              DW      00H
009C 0000        R     DW      ?C0105
                                           ; SOURCE LINE # 644
                                           ; SOURCE LINE # 645
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 66  

009E         ?C0108:
                                           ; SOURCE LINE # 646
                                           ; SOURCE LINE # 647
009E 900000      R     MOV     DPTR,#channel
00A1 E0                MOVX    A,@DPTR
00A2 FF                MOV     R7,A
00A3 75F019            MOV     B,#019H
00A6 EF                MOV     A,R7
00A7 A4                MUL     AB
00A8 2400        E     ADD     A,#LOW channels+0DH
00AA F582              MOV     DPL,A
00AC E5F0              MOV     A,B
00AE 3400        E     ADDC    A,#HIGH channels+0DH
00B0 F583              MOV     DPH,A
00B2 E0                MOVX    A,@DPTR
00B3 FF                MOV     R7,A
00B4 EF                MOV     A,R7
00B5 B40139            CJNE    A,#01H,?C0109
                                           ; SOURCE LINE # 648
                                           ; SOURCE LINE # 649
00B8 900000      R     MOV     DPTR,#channel
00BB E0                MOVX    A,@DPTR
00BC FF                MOV     R7,A
00BD 75F019            MOV     B,#019H
00C0 EF                MOV     A,R7
00C1 A4                MUL     AB
00C2 2400        E     ADD     A,#LOW channels+0AH
00C4 F582              MOV     DPL,A
00C6 E5F0              MOV     A,B
00C8 3400        E     ADDC    A,#HIGH channels+0AH
00CA F583              MOV     DPH,A
00CC E0                MOVX    A,@DPTR
00CD FF                MOV     R7,A
00CE 900000      R     MOV     DPTR,#TransferBuf+06H
00D1 EF                MOV     A,R7
00D2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 650
00D3 900000      R     MOV     DPTR,#channel
00D6 E0                MOVX    A,@DPTR
00D7 FF                MOV     R7,A
00D8 75F019            MOV     B,#019H
00DB EF                MOV     A,R7
00DC A4                MUL     AB
00DD 2400        E     ADD     A,#LOW channels+0BH
00DF F582              MOV     DPL,A
00E1 E5F0              MOV     A,B
00E3 3400        E     ADDC    A,#HIGH channels+0BH
00E5 F583              MOV     DPH,A
00E7 E0                MOVX    A,@DPTR
00E8 FF                MOV     R7,A
00E9 900000      R     MOV     DPTR,#TransferBuf+07H
00EC EF                MOV     A,R7
00ED F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 651
00EE 020000      R     LJMP    ?C0105
00F1         ?C0109:
                                           ; SOURCE LINE # 653
                                           ; SOURCE LINE # 654
00F1 900000      R     MOV     DPTR,#channel
00F4 E0                MOVX    A,@DPTR
00F5 FF                MOV     R7,A
00F6 75F019            MOV     B,#019H
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 67  

00F9 EF                MOV     A,R7
00FA A4                MUL     AB
00FB 2400        E     ADD     A,#LOW channels+06H
00FD F582              MOV     DPL,A
00FF E5F0              MOV     A,B
0101 3400        E     ADDC    A,#HIGH channels+06H
0103 F583              MOV     DPH,A
0105 E0                MOVX    A,@DPTR
0106 FF                MOV     R7,A
0107 900000      R     MOV     DPTR,#TransferBuf+06H
010A EF                MOV     A,R7
010B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 655
010C 900000      R     MOV     DPTR,#channel
010F E0                MOVX    A,@DPTR
0110 FF                MOV     R7,A
0111 75F019            MOV     B,#019H
0114 EF                MOV     A,R7
0115 A4                MUL     AB
0116 2400        E     ADD     A,#LOW channels+07H
0118 F582              MOV     DPL,A
011A E5F0              MOV     A,B
011C 3400        E     ADDC    A,#HIGH channels+07H
011E F583              MOV     DPH,A
0120 E0                MOVX    A,@DPTR
0121 FF                MOV     R7,A
0122 900000      R     MOV     DPTR,#TransferBuf+07H
0125 EF                MOV     A,R7
0126 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 656
0127         ?C0110:
                                           ; SOURCE LINE # 657
                                           ; SOURCE LINE # 658
0127 020000      R     LJMP    ?C0105
                                           ; SOURCE LINE # 660
012A         ?C0111:
                                           ; SOURCE LINE # 661
                                           ; SOURCE LINE # 662
012A 900000      R     MOV     DPTR,#channel
012D E0                MOVX    A,@DPTR
012E FF                MOV     R7,A
012F 75F019            MOV     B,#019H
0132 EF                MOV     A,R7
0133 A4                MUL     AB
0134 2400        E     ADD     A,#LOW channels+0DH
0136 F582              MOV     DPL,A
0138 E5F0              MOV     A,B
013A 3400        E     ADDC    A,#HIGH channels+0DH
013C F583              MOV     DPH,A
013E E0                MOVX    A,@DPTR
013F FF                MOV     R7,A
0140 EF                MOV     A,R7
0141 6401              XRL     A,#01H
0143 7051              JNZ     ?C0112
                                           ; SOURCE LINE # 663
                                           ; SOURCE LINE # 664
0145 900000      R     MOV     DPTR,#channel
0148 E0                MOVX    A,@DPTR
0149 FF                MOV     R7,A
014A 75F019            MOV     B,#019H
014D EF                MOV     A,R7
014E A4                MUL     AB
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 68  

014F 2400        E     ADD     A,#LOW channels+0AH
0151 F582              MOV     DPL,A
0153 E5F0              MOV     A,B
0155 3400        E     ADDC    A,#HIGH channels+0AH
0157 F583              MOV     DPH,A
0159 E0                MOVX    A,@DPTR
015A FF                MOV     R7,A
015B 900000      R     MOV     DPTR,#channel
015E E0                MOVX    A,@DPTR
015F FE                MOV     R6,A
0160 7400        R     MOV     A,#LOW TransferBuf
0162 2E                ADD     A,R6
0163 F582              MOV     DPL,A
0165 E4                CLR     A
0166 3400        R     ADDC    A,#HIGH TransferBuf
0168 F583              MOV     DPH,A
016A EF                MOV     A,R7
016B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 665
016C 900000      R     MOV     DPTR,#channel
016F E0                MOVX    A,@DPTR
0170 FF                MOV     R7,A
0171 75F019            MOV     B,#019H
0174 EF                MOV     A,R7
0175 A4                MUL     AB
0176 2400        E     ADD     A,#LOW channels+0BH
0178 F582              MOV     DPL,A
017A E5F0              MOV     A,B
017C 3400        E     ADDC    A,#HIGH channels+0BH
017E F583              MOV     DPH,A
0180 E0                MOVX    A,@DPTR
0181 FF                MOV     R7,A
0182 900000      R     MOV     DPTR,#channel
0185 E0                MOVX    A,@DPTR
0186 FE                MOV     R6,A
0187 7400        R     MOV     A,#LOW TransferBuf
0189 2E                ADD     A,R6
018A F582              MOV     DPL,A
018C E4                CLR     A
018D 3400        R     ADDC    A,#HIGH TransferBuf
018F F583              MOV     DPH,A
0191 EF                MOV     A,R7
0192 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 666
0193 020000      R     LJMP    ?C0105
0196         ?C0112:
                                           ; SOURCE LINE # 668
                                           ; SOURCE LINE # 669
0196 900000      R     MOV     DPTR,#channel
0199 E0                MOVX    A,@DPTR
019A FF                MOV     R7,A
019B 75F019            MOV     B,#019H
019E EF                MOV     A,R7
019F A4                MUL     AB
01A0 2400        E     ADD     A,#LOW channels+06H
01A2 F582              MOV     DPL,A
01A4 E5F0              MOV     A,B
01A6 3400        E     ADDC    A,#HIGH channels+06H
01A8 F583              MOV     DPH,A
01AA E0                MOVX    A,@DPTR
01AB FF                MOV     R7,A
01AC 900000      R     MOV     DPTR,#TransferBuf+06H
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 69  

01AF EF                MOV     A,R7
01B0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 670
01B1 900000      R     MOV     DPTR,#channel
01B4 E0                MOVX    A,@DPTR
01B5 FF                MOV     R7,A
01B6 75F019            MOV     B,#019H
01B9 EF                MOV     A,R7
01BA A4                MUL     AB
01BB 2400        E     ADD     A,#LOW channels+07H
01BD F582              MOV     DPL,A
01BF E5F0              MOV     A,B
01C1 3400        E     ADDC    A,#HIGH channels+07H
01C3 F583              MOV     DPH,A
01C5 E0                MOVX    A,@DPTR
01C6 FF                MOV     R7,A
01C7 900000      R     MOV     DPTR,#TransferBuf+07H
01CA EF                MOV     A,R7
01CB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 671
01CC         ?C0113:
                                           ; SOURCE LINE # 673
                                           ; SOURCE LINE # 674
01CC 020000      R     LJMP    ?C0105
                                           ; SOURCE LINE # 675
01CF         ?C0107:
                                           ; SOURCE LINE # 676
                                           ; SOURCE LINE # 677
01CF 020000      R     LJMP    ?C0105
                                           ; SOURCE LINE # 679
01D2         ?C0114:
                                           ; SOURCE LINE # 680
                                           ; SOURCE LINE # 681
01D2 900000      R     MOV     DPTR,#channel
01D5 E0                MOVX    A,@DPTR
01D6 FF                MOV     R7,A
01D7 75F019            MOV     B,#019H
01DA EF                MOV     A,R7
01DB A4                MUL     AB
01DC 2400        E     ADD     A,#LOW channels+02H
01DE F582              MOV     DPL,A
01E0 E5F0              MOV     A,B
01E2 3400        E     ADDC    A,#HIGH channels+02H
01E4 F583              MOV     DPH,A
01E6 E0                MOVX    A,@DPTR
01E7 FF                MOV     R7,A
01E8 EF                MOV     A,R7
01E9 120000      E     LCALL   ?C?CCASE
01EC 0000        R     DW      ?C0116
01EE 00                DB      00H
01EF 0000              DW      00H
01F1 0000        R     DW      ?C0105
                                           ; SOURCE LINE # 682
                                           ; SOURCE LINE # 683
01F3         ?C0116:
                                           ; SOURCE LINE # 684
                                           ; SOURCE LINE # 685
01F3 900000      R     MOV     DPTR,#channel
01F6 E0                MOVX    A,@DPTR
01F7 FF                MOV     R7,A
01F8 75F019            MOV     B,#019H
01FB EF                MOV     A,R7
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 70  

01FC A4                MUL     AB
01FD 2400        E     ADD     A,#LOW channels+07H
01FF F582              MOV     DPL,A
0201 E5F0              MOV     A,B
0203 3400        E     ADDC    A,#HIGH channels+07H
0205 F583              MOV     DPH,A
0207 E0                MOVX    A,@DPTR
0208 FF                MOV     R7,A
0209 900000      R     MOV     DPTR,#TransferBuf+06H
020C EF                MOV     A,R7
020D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 686
020E 900000      R     MOV     DPTR,#channel
0211 E0                MOVX    A,@DPTR
0212 FF                MOV     R7,A
0213 75F019            MOV     B,#019H
0216 EF                MOV     A,R7
0217 A4                MUL     AB
0218 2400        E     ADD     A,#LOW channels+08H
021A F582              MOV     DPL,A
021C E5F0              MOV     A,B
021E 3400        E     ADDC    A,#HIGH channels+08H
0220 F583              MOV     DPH,A
0222 E0                MOVX    A,@DPTR
0223 FF                MOV     R7,A
0224 900000      R     MOV     DPTR,#TransferBuf+07H
0227 EF                MOV     A,R7
0228 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 689
                                           ; SOURCE LINE # 690
0229 020000      R     LJMP    ?C0105
                                           ; SOURCE LINE # 691
022C         ?C0115:
                                           ; SOURCE LINE # 692
                                           ; SOURCE LINE # 693
022C 020000      R     LJMP    ?C0105
                                           ; SOURCE LINE # 695
022F         ?C0117:
                                           ; SOURCE LINE # 696
                                           ; SOURCE LINE # 697
022F 900000      R     MOV     DPTR,#channel
0232 E0                MOVX    A,@DPTR
0233 FF                MOV     R7,A
0234 75F019            MOV     B,#019H
0237 EF                MOV     A,R7
0238 A4                MUL     AB
0239 2400        E     ADD     A,#LOW channels+02H
023B F582              MOV     DPL,A
023D E5F0              MOV     A,B
023F 3400        E     ADDC    A,#HIGH channels+02H
0241 F583              MOV     DPH,A
0243 E0                MOVX    A,@DPTR
0244 FF                MOV     R7,A
0245 EF                MOV     A,R7
0246 120000      E     LCALL   ?C?CCASE
0249 0000        R     DW      ?C0119
024B 00                DB      00H
024C 0000        R     DW      ?C0120
024E 01                DB      01H
024F 0000              DW      00H
0251 0000        R     DW      ?C0105
                                           ; SOURCE LINE # 698
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 71  

                                           ; SOURCE LINE # 700
0253         ?C0119:
                                           ; SOURCE LINE # 701
                                           ; SOURCE LINE # 702
0253 900000      R     MOV     DPTR,#channel
0256 E0                MOVX    A,@DPTR
0257 FF                MOV     R7,A
0258 75F019            MOV     B,#019H
025B EF                MOV     A,R7
025C A4                MUL     AB
025D 2400        E     ADD     A,#LOW channels+07H
025F F582              MOV     DPL,A
0261 E5F0              MOV     A,B
0263 3400        E     ADDC    A,#HIGH channels+07H
0265 F583              MOV     DPH,A
0267 E0                MOVX    A,@DPTR
0268 FF                MOV     R7,A
0269 900000      R     MOV     DPTR,#TransferBuf+06H
026C EF                MOV     A,R7
026D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 703
026E 900000      R     MOV     DPTR,#channel
0271 E0                MOVX    A,@DPTR
0272 FF                MOV     R7,A
0273 75F019            MOV     B,#019H
0276 EF                MOV     A,R7
0277 A4                MUL     AB
0278 2400        E     ADD     A,#LOW channels+08H
027A F582              MOV     DPL,A
027C E5F0              MOV     A,B
027E 3400        E     ADDC    A,#HIGH channels+08H
0280 F583              MOV     DPH,A
0282 E0                MOVX    A,@DPTR
0283 FF                MOV     R7,A
0284 900000      R     MOV     DPTR,#TransferBuf+07H
0287 EF                MOV     A,R7
0288 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 705
                                           ; SOURCE LINE # 706
0289 8036              SJMP    ?C0105
                                           ; SOURCE LINE # 708
028B         ?C0120:
                                           ; SOURCE LINE # 709
                                           ; SOURCE LINE # 710
028B 900000      R     MOV     DPTR,#channel
028E E0                MOVX    A,@DPTR
028F FF                MOV     R7,A
0290 75F019            MOV     B,#019H
0293 EF                MOV     A,R7
0294 A4                MUL     AB
0295 2400        E     ADD     A,#LOW channels+07H
0297 F582              MOV     DPL,A
0299 E5F0              MOV     A,B
029B 3400        E     ADDC    A,#HIGH channels+07H
029D F583              MOV     DPH,A
029F E0                MOVX    A,@DPTR
02A0 FF                MOV     R7,A
02A1 900000      R     MOV     DPTR,#TransferBuf+06H
02A4 EF                MOV     A,R7
02A5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 711
02A6 900000      R     MOV     DPTR,#channel
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 72  

02A9 E0                MOVX    A,@DPTR
02AA FF                MOV     R7,A
02AB 75F019            MOV     B,#019H
02AE EF                MOV     A,R7
02AF A4                MUL     AB
02B0 2400        E     ADD     A,#LOW channels+08H
02B2 F582              MOV     DPL,A
02B4 E5F0              MOV     A,B
02B6 3400        E     ADDC    A,#HIGH channels+08H
02B8 F583              MOV     DPH,A
02BA E0                MOVX    A,@DPTR
02BB FF                MOV     R7,A
02BC 900000      R     MOV     DPTR,#TransferBuf+07H
02BF EF                MOV     A,R7
02C0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 712
                                           ; SOURCE LINE # 713
                                           ; SOURCE LINE # 714
02C1         ?C0118:
                                           ; SOURCE LINE # 715
                                           ; SOURCE LINE # 716
                                           ; SOURCE LINE # 717
02C1         ?C0105:
                                           ; SOURCE LINE # 719
02C1 7B01              MOV     R3,#01H
02C3 7A00        R     MOV     R2,#HIGH TransferBuf
02C5 7900        R     MOV     R1,#LOW TransferBuf
02C7 7D08              MOV     R5,#08H
02C9 120000      R     LCALL   _Old_Proto_Paste_Null
02CC 900000      R     MOV     DPTR,#len
02CF EF                MOV     A,R7
02D0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 721
02D1 7E00        R     MOV     R6,#HIGH TransferBuf
02D3 7F00        R     MOV     R7,#LOW TransferBuf
02D5 900000      R     MOV     DPTR,#len
02D8 E0                MOVX    A,@DPTR
02D9 FD                MOV     R5,A
02DA 120000      R     LCALL   _Old_CRC_Check
02DD 900000      R     MOV     DPTR,#len
02E0 E0                MOVX    A,@DPTR
02E1 FE                MOV     R6,A
02E2 7400        R     MOV     A,#LOW TransferBuf
02E4 2E                ADD     A,R6
02E5 F582              MOV     DPL,A
02E7 E4                CLR     A
02E8 3400        R     ADDC    A,#HIGH TransferBuf
02EA F583              MOV     DPH,A
02EC EF                MOV     A,R7
02ED F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 722
02EE 900000      R     MOV     DPTR,#len
02F1 E0                MOVX    A,@DPTR
02F2 FF                MOV     R7,A
02F3 EF                MOV     A,R7
02F4 04                INC     A
02F5 FF                MOV     R7,A
02F6 22                RET     
                                           ; SOURCE LINE # 723
02F7         ?C0104:
                                           ; SOURCE LINE # 724
02F7 7F00              MOV     R7,#00H
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 73  

                                           ; SOURCE LINE # 725
02F9         ?C0121:
02F9 22                RET     
             ; FUNCTION Old_Channel_Get_Data (END)

             ; FUNCTION Old_Channel_Get_Data_State (BEGIN)
                                           ; SOURCE LINE # 727
                                           ; SOURCE LINE # 728
                                           ; SOURCE LINE # 729
0000 900000      R     MOV     DPTR,#channel
0003 E4                CLR     A
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 730
0005 900000      R     MOV     DPTR,#len
0008 E4                CLR     A
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 731
000A 900000      R     MOV     DPTR,#RecieveBuf+04H
000D E0                MOVX    A,@DPTR
000E FF                MOV     R7,A
000F EF                MOV     A,R7
0010 13                RRC     A
0011 13                RRC     A
0012 13                RRC     A
0013 541F              ANL     A,#01FH
0015 FF                MOV     R7,A
0016 EF                MOV     A,R7
0017 541F              ANL     A,#01FH
0019 FF                MOV     R7,A
001A 900000      R     MOV     DPTR,#channel
001D EF                MOV     A,R7
001E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 732
001F 900000      R     MOV     DPTR,#channel
0022 E0                MOVX    A,@DPTR
0023 FF                MOV     R7,A
0024 EF                MOV     A,R7
0025 C3                CLR     C
0026 940E              SUBB    A,#0EH
0028 4003              JC      $ + 5H
002A 020000      R     LJMP    ?C0122
                                           ; SOURCE LINE # 733
                                           ; SOURCE LINE # 734
002D 900000      R     MOV     DPTR,#TransferBuf
0030 E4                CLR     A
0031 F0                MOVX    @DPTR,A
0032 900000      R     MOV     DPTR,#TransferBuf+01H
0035 74D7              MOV     A,#0D7H
0037 F0                MOVX    @DPTR,A
0038 900000      R     MOV     DPTR,#TransferBuf+02H
003B 7428              MOV     A,#028H
003D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 735
003E 900000      R     MOV     DPTR,#TransferBuf+03H
0041 E4                CLR     A
0042 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 736
0043 900000      R     MOV     DPTR,#RecieveBuf+04H
0046 E0                MOVX    A,@DPTR
0047 FF                MOV     R7,A
0048 900000      R     MOV     DPTR,#TransferBuf+04H
004B EF                MOV     A,R7
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 74  

004C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 737
004D 900000      R     MOV     DPTR,#TransferBuf+05H
0050 7406              MOV     A,#06H
0052 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 739
0053 900000      R     MOV     DPTR,#channel
0056 E0                MOVX    A,@DPTR
0057 FF                MOV     R7,A
0058 75F019            MOV     B,#019H
005B EF                MOV     A,R7
005C A4                MUL     AB
005D 2400        E     ADD     A,#LOW channels+01H
005F F582              MOV     DPL,A
0061 E5F0              MOV     A,B
0063 3400        E     ADDC    A,#HIGH channels+01H
0065 F583              MOV     DPH,A
0067 E0                MOVX    A,@DPTR
0068 FF                MOV     R7,A
0069 EF                MOV     A,R7
006A 120000      E     LCALL   ?C?CCASE
006D 0000        R     DW      ?C0124
006F 00                DB      00H
0070 0000        R     DW      ?C0138
0072 01                DB      01H
0073 0000        R     DW      ?C0147
0075 02                DB      02H
0076 0000              DW      00H
0078 0000        R     DW      ?C0123
                                           ; SOURCE LINE # 740
                                           ; SOURCE LINE # 741
007A         ?C0124:
                                           ; SOURCE LINE # 742
                                           ; SOURCE LINE # 743
007A 900000      R     MOV     DPTR,#channel
007D E0                MOVX    A,@DPTR
007E FF                MOV     R7,A
007F 75F019            MOV     B,#019H
0082 EF                MOV     A,R7
0083 A4                MUL     AB
0084 2400        E     ADD     A,#LOW channels+02H
0086 F582              MOV     DPL,A
0088 E5F0              MOV     A,B
008A 3400        E     ADDC    A,#HIGH channels+02H
008C F583              MOV     DPH,A
008E E0                MOVX    A,@DPTR
008F FF                MOV     R7,A
0090 EF                MOV     A,R7
0091 120000      E     LCALL   ?C?CCASE
0094 0000        R     DW      ?C0126
0096 00                DB      00H
0097 0000        R     DW      ?C0129
0099 03                DB      03H
009A 0000              DW      00H
009C 0000        R     DW      ?C0125
                                           ; SOURCE LINE # 744
                                           ; SOURCE LINE # 745
009E         ?C0126:
                                           ; SOURCE LINE # 746
                                           ; SOURCE LINE # 747
009E 900000      R     MOV     DPTR,#channel
00A1 E0                MOVX    A,@DPTR
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 75  

00A2 FF                MOV     R7,A
00A3 75F019            MOV     B,#019H
00A6 EF                MOV     A,R7
00A7 A4                MUL     AB
00A8 2400        E     ADD     A,#LOW channels+0DH
00AA F582              MOV     DPL,A
00AC E5F0              MOV     A,B
00AE 3400        E     ADDC    A,#HIGH channels+0DH
00B0 F583              MOV     DPH,A
00B2 E0                MOVX    A,@DPTR
00B3 FF                MOV     R7,A
00B4 EF                MOV     A,R7
00B5 B40139            CJNE    A,#01H,?C0127
                                           ; SOURCE LINE # 748
                                           ; SOURCE LINE # 749
00B8 900000      R     MOV     DPTR,#channel
00BB E0                MOVX    A,@DPTR
00BC FF                MOV     R7,A
00BD 75F019            MOV     B,#019H
00C0 EF                MOV     A,R7
00C1 A4                MUL     AB
00C2 2400        E     ADD     A,#LOW channels+0AH
00C4 F582              MOV     DPL,A
00C6 E5F0              MOV     A,B
00C8 3400        E     ADDC    A,#HIGH channels+0AH
00CA F583              MOV     DPH,A
00CC E0                MOVX    A,@DPTR
00CD FF                MOV     R7,A
00CE 900000      R     MOV     DPTR,#TransferBuf+06H
00D1 EF                MOV     A,R7
00D2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 750
00D3 900000      R     MOV     DPTR,#channel
00D6 E0                MOVX    A,@DPTR
00D7 FF                MOV     R7,A
00D8 75F019            MOV     B,#019H
00DB EF                MOV     A,R7
00DC A4                MUL     AB
00DD 2400        E     ADD     A,#LOW channels+0BH
00DF F582              MOV     DPL,A
00E1 E5F0              MOV     A,B
00E3 3400        E     ADDC    A,#HIGH channels+0BH
00E5 F583              MOV     DPH,A
00E7 E0                MOVX    A,@DPTR
00E8 FF                MOV     R7,A
00E9 900000      R     MOV     DPTR,#TransferBuf+07H
00EC EF                MOV     A,R7
00ED F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 751
00EE 020000      R     LJMP    ?C0125
00F1         ?C0127:
                                           ; SOURCE LINE # 753
                                           ; SOURCE LINE # 754
00F1 900000      R     MOV     DPTR,#channel
00F4 E0                MOVX    A,@DPTR
00F5 FF                MOV     R7,A
00F6 75F019            MOV     B,#019H
00F9 EF                MOV     A,R7
00FA A4                MUL     AB
00FB 2400        E     ADD     A,#LOW channels+06H
00FD F582              MOV     DPL,A
00FF E5F0              MOV     A,B
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 76  

0101 3400        E     ADDC    A,#HIGH channels+06H
0103 F583              MOV     DPH,A
0105 E0                MOVX    A,@DPTR
0106 FF                MOV     R7,A
0107 900000      R     MOV     DPTR,#TransferBuf+06H
010A EF                MOV     A,R7
010B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 755
010C 900000      R     MOV     DPTR,#channel
010F E0                MOVX    A,@DPTR
0110 FF                MOV     R7,A
0111 75F019            MOV     B,#019H
0114 EF                MOV     A,R7
0115 A4                MUL     AB
0116 2400        E     ADD     A,#LOW channels+07H
0118 F582              MOV     DPL,A
011A E5F0              MOV     A,B
011C 3400        E     ADDC    A,#HIGH channels+07H
011E F583              MOV     DPH,A
0120 E0                MOVX    A,@DPTR
0121 FF                MOV     R7,A
0122 900000      R     MOV     DPTR,#TransferBuf+07H
0125 EF                MOV     A,R7
0126 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 756
0127         ?C0128:
                                           ; SOURCE LINE # 757
                                           ; SOURCE LINE # 758
0127 020000      R     LJMP    ?C0125
                                           ; SOURCE LINE # 760
012A         ?C0129:
                                           ; SOURCE LINE # 761
                                           ; SOURCE LINE # 762
012A 900000      R     MOV     DPTR,#channel
012D E0                MOVX    A,@DPTR
012E FF                MOV     R7,A
012F 75F019            MOV     B,#019H
0132 EF                MOV     A,R7
0133 A4                MUL     AB
0134 2400        E     ADD     A,#LOW channels+0DH
0136 F582              MOV     DPL,A
0138 E5F0              MOV     A,B
013A 3400        E     ADDC    A,#HIGH channels+0DH
013C F583              MOV     DPH,A
013E E0                MOVX    A,@DPTR
013F FF                MOV     R7,A
0140 EF                MOV     A,R7
0141 6401              XRL     A,#01H
0143 7050              JNZ     ?C0130
                                           ; SOURCE LINE # 763
                                           ; SOURCE LINE # 764
0145 900000      R     MOV     DPTR,#channel
0148 E0                MOVX    A,@DPTR
0149 FF                MOV     R7,A
014A 75F019            MOV     B,#019H
014D EF                MOV     A,R7
014E A4                MUL     AB
014F 2400        E     ADD     A,#LOW channels+0AH
0151 F582              MOV     DPL,A
0153 E5F0              MOV     A,B
0155 3400        E     ADDC    A,#HIGH channels+0AH
0157 F583              MOV     DPH,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 77  

0159 E0                MOVX    A,@DPTR
015A FF                MOV     R7,A
015B 900000      R     MOV     DPTR,#channel
015E E0                MOVX    A,@DPTR
015F FE                MOV     R6,A
0160 7400        R     MOV     A,#LOW TransferBuf
0162 2E                ADD     A,R6
0163 F582              MOV     DPL,A
0165 E4                CLR     A
0166 3400        R     ADDC    A,#HIGH TransferBuf
0168 F583              MOV     DPH,A
016A EF                MOV     A,R7
016B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 765
016C 900000      R     MOV     DPTR,#channel
016F E0                MOVX    A,@DPTR
0170 FF                MOV     R7,A
0171 75F019            MOV     B,#019H
0174 EF                MOV     A,R7
0175 A4                MUL     AB
0176 2400        E     ADD     A,#LOW channels+0BH
0178 F582              MOV     DPL,A
017A E5F0              MOV     A,B
017C 3400        E     ADDC    A,#HIGH channels+0BH
017E F583              MOV     DPH,A
0180 E0                MOVX    A,@DPTR
0181 FF                MOV     R7,A
0182 900000      R     MOV     DPTR,#channel
0185 E0                MOVX    A,@DPTR
0186 FE                MOV     R6,A
0187 7400        R     MOV     A,#LOW TransferBuf
0189 2E                ADD     A,R6
018A F582              MOV     DPL,A
018C E4                CLR     A
018D 3400        R     ADDC    A,#HIGH TransferBuf
018F F583              MOV     DPH,A
0191 EF                MOV     A,R7
0192 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 766
0193 8036              SJMP    ?C0125
0195         ?C0130:
                                           ; SOURCE LINE # 768
                                           ; SOURCE LINE # 769
0195 900000      R     MOV     DPTR,#channel
0198 E0                MOVX    A,@DPTR
0199 FF                MOV     R7,A
019A 75F019            MOV     B,#019H
019D EF                MOV     A,R7
019E A4                MUL     AB
019F 2400        E     ADD     A,#LOW channels+06H
01A1 F582              MOV     DPL,A
01A3 E5F0              MOV     A,B
01A5 3400        E     ADDC    A,#HIGH channels+06H
01A7 F583              MOV     DPH,A
01A9 E0                MOVX    A,@DPTR
01AA FF                MOV     R7,A
01AB 900000      R     MOV     DPTR,#TransferBuf+06H
01AE EF                MOV     A,R7
01AF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 770
01B0 900000      R     MOV     DPTR,#channel
01B3 E0                MOVX    A,@DPTR
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 78  

01B4 FF                MOV     R7,A
01B5 75F019            MOV     B,#019H
01B8 EF                MOV     A,R7
01B9 A4                MUL     AB
01BA 2400        E     ADD     A,#LOW channels+07H
01BC F582              MOV     DPL,A
01BE E5F0              MOV     A,B
01C0 3400        E     ADDC    A,#HIGH channels+07H
01C2 F583              MOV     DPH,A
01C4 E0                MOVX    A,@DPTR
01C5 FF                MOV     R7,A
01C6 900000      R     MOV     DPTR,#TransferBuf+07H
01C9 EF                MOV     A,R7
01CA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 771
01CB         ?C0131:
                                           ; SOURCE LINE # 773
                                           ; SOURCE LINE # 774
                                           ; SOURCE LINE # 775
01CB         ?C0125:
                                           ; SOURCE LINE # 777
01CB 900000      R     MOV     DPTR,#channel
01CE E0                MOVX    A,@DPTR
01CF FF                MOV     R7,A
01D0 75F019            MOV     B,#019H
01D3 EF                MOV     A,R7
01D4 A4                MUL     AB
01D5 2400        E     ADD     A,#LOW channels+03H
01D7 F582              MOV     DPL,A
01D9 E5F0              MOV     A,B
01DB 3400        E     ADDC    A,#HIGH channels+03H
01DD F583              MOV     DPH,A
01DF E0                MOVX    A,@DPTR
01E0 FF                MOV     R7,A
01E1 EF                MOV     A,R7
01E2 5407              ANL     A,#07H
01E4 FF                MOV     R7,A
01E5 EF                MOV     A,R7
01E6 120000      E     LCALL   ?C?CCASE
01E9 0000        R     DW      ?C0133
01EB 00                DB      00H
01EC 0000        R     DW      ?C0134
01EE 01                DB      01H
01EF 0000        R     DW      ?C0135
01F1 05                DB      05H
01F2 0000        R     DW      ?C0136
01F4 07                DB      07H
01F5 0000              DW      00H
01F7 0000        R     DW      ?C0137
                                           ; SOURCE LINE # 778
                                           ; SOURCE LINE # 779
01F9         ?C0133:
                                           ; SOURCE LINE # 780
                                           ; SOURCE LINE # 781
01F9 900000      R     MOV     DPTR,#TransferBuf+08H
01FC E4                CLR     A
01FD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 782
                                           ; SOURCE LINE # 783
01FE 801D              SJMP    ?C0132
                                           ; SOURCE LINE # 785
0200         ?C0134:
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 79  

                                           ; SOURCE LINE # 786
                                           ; SOURCE LINE # 787
0200 900000      R     MOV     DPTR,#TransferBuf+08H
0203 7402              MOV     A,#02H
0205 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 788
                                           ; SOURCE LINE # 789
0206 8015              SJMP    ?C0132
                                           ; SOURCE LINE # 791
0208         ?C0135:
                                           ; SOURCE LINE # 792
                                           ; SOURCE LINE # 793
0208 900000      R     MOV     DPTR,#TransferBuf+08H
020B 7404              MOV     A,#04H
020D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 794
                                           ; SOURCE LINE # 795
020E 800D              SJMP    ?C0132
                                           ; SOURCE LINE # 797
0210         ?C0136:
                                           ; SOURCE LINE # 798
                                           ; SOURCE LINE # 799
0210 900000      R     MOV     DPTR,#TransferBuf+08H
0213 7406              MOV     A,#06H
0215 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 800
                                           ; SOURCE LINE # 801
0216 8005              SJMP    ?C0132
                                           ; SOURCE LINE # 803
0218         ?C0137:
                                           ; SOURCE LINE # 804
                                           ; SOURCE LINE # 805
0218 900000      R     MOV     DPTR,#TransferBuf+08H
021B E4                CLR     A
021C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 806
                                           ; SOURCE LINE # 807
                                           ; SOURCE LINE # 808
021D         ?C0132:
                                           ; SOURCE LINE # 810
021D 900000      R     MOV     DPTR,#TransferBuf+09H
0220 740A              MOV     A,#0AH
0222 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 812
                                           ; SOURCE LINE # 813
0223 020000      R     LJMP    ?C0123
                                           ; SOURCE LINE # 815
0226         ?C0138:
                                           ; SOURCE LINE # 816
                                           ; SOURCE LINE # 817
0226 900000      R     MOV     DPTR,#channel
0229 E0                MOVX    A,@DPTR
022A FF                MOV     R7,A
022B 75F019            MOV     B,#019H
022E EF                MOV     A,R7
022F A4                MUL     AB
0230 2400        E     ADD     A,#LOW channels+02H
0232 F582              MOV     DPL,A
0234 E5F0              MOV     A,B
0236 3400        E     ADDC    A,#HIGH channels+02H
0238 F583              MOV     DPH,A
023A E0                MOVX    A,@DPTR
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 80  

023B FF                MOV     R7,A
023C EF                MOV     A,R7
023D 120000      E     LCALL   ?C?CCASE
0240 0000        R     DW      ?C0140
0242 00                DB      00H
0243 0000              DW      00H
0245 0000        R     DW      ?C0123
                                           ; SOURCE LINE # 818
                                           ; SOURCE LINE # 819
0247         ?C0140:
                                           ; SOURCE LINE # 820
                                           ; SOURCE LINE # 821
0247 900000      R     MOV     DPTR,#channel
024A E0                MOVX    A,@DPTR
024B FF                MOV     R7,A
024C 75F019            MOV     B,#019H
024F EF                MOV     A,R7
0250 A4                MUL     AB
0251 2400        E     ADD     A,#LOW channels+07H
0253 F582              MOV     DPL,A
0255 E5F0              MOV     A,B
0257 3400        E     ADDC    A,#HIGH channels+07H
0259 F583              MOV     DPH,A
025B E0                MOVX    A,@DPTR
025C FF                MOV     R7,A
025D 900000      R     MOV     DPTR,#TransferBuf+06H
0260 EF                MOV     A,R7
0261 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 822
0262 900000      R     MOV     DPTR,#channel
0265 E0                MOVX    A,@DPTR
0266 FF                MOV     R7,A
0267 75F019            MOV     B,#019H
026A EF                MOV     A,R7
026B A4                MUL     AB
026C 2400        E     ADD     A,#LOW channels+08H
026E F582              MOV     DPL,A
0270 E5F0              MOV     A,B
0272 3400        E     ADDC    A,#HIGH channels+08H
0274 F583              MOV     DPH,A
0276 E0                MOVX    A,@DPTR
0277 FF                MOV     R7,A
0278 900000      R     MOV     DPTR,#TransferBuf+07H
027B EF                MOV     A,R7
027C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 828
027D 900000      R     MOV     DPTR,#channel
0280 E0                MOVX    A,@DPTR
0281 FF                MOV     R7,A
0282 75F019            MOV     B,#019H
0285 EF                MOV     A,R7
0286 A4                MUL     AB
0287 2400        E     ADD     A,#LOW channels+03H
0289 F582              MOV     DPL,A
028B E5F0              MOV     A,B
028D 3400        E     ADDC    A,#HIGH channels+03H
028F F583              MOV     DPH,A
0291 E0                MOVX    A,@DPTR
0292 FF                MOV     R7,A
0293 EF                MOV     A,R7
0294 5407              ANL     A,#07H
0296 FF                MOV     R7,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 81  

0297 EF                MOV     A,R7
0298 120000      E     LCALL   ?C?CCASE
029B 0000        R     DW      ?C0142
029D 00                DB      00H
029E 0000        R     DW      ?C0143
02A0 01                DB      01H
02A1 0000        R     DW      ?C0144
02A3 05                DB      05H
02A4 0000        R     DW      ?C0145
02A6 07                DB      07H
02A7 0000              DW      00H
02A9 0000        R     DW      ?C0146
                                           ; SOURCE LINE # 829
                                           ; SOURCE LINE # 830
02AB         ?C0142:
                                           ; SOURCE LINE # 831
                                           ; SOURCE LINE # 832
02AB 900000      R     MOV     DPTR,#TransferBuf+08H
02AE 7440              MOV     A,#040H
02B0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 833
                                           ; SOURCE LINE # 834
02B1 801E              SJMP    ?C0141
                                           ; SOURCE LINE # 836
02B3         ?C0143:
                                           ; SOURCE LINE # 837
                                           ; SOURCE LINE # 838
02B3 900000      R     MOV     DPTR,#TransferBuf+08H
02B6 7442              MOV     A,#042H
02B8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 839
                                           ; SOURCE LINE # 840
02B9 8016              SJMP    ?C0141
                                           ; SOURCE LINE # 842
02BB         ?C0144:
                                           ; SOURCE LINE # 843
                                           ; SOURCE LINE # 844
02BB 900000      R     MOV     DPTR,#TransferBuf+08H
02BE 7444              MOV     A,#044H
02C0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 845
                                           ; SOURCE LINE # 846
02C1 800E              SJMP    ?C0141
                                           ; SOURCE LINE # 848
02C3         ?C0145:
                                           ; SOURCE LINE # 849
                                           ; SOURCE LINE # 850
02C3 900000      R     MOV     DPTR,#TransferBuf+08H
02C6 7446              MOV     A,#046H
02C8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 851
                                           ; SOURCE LINE # 852
02C9 8006              SJMP    ?C0141
                                           ; SOURCE LINE # 854
02CB         ?C0146:
                                           ; SOURCE LINE # 855
                                           ; SOURCE LINE # 856
02CB 900000      R     MOV     DPTR,#TransferBuf+08H
02CE 7440              MOV     A,#040H
02D0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 857
                                           ; SOURCE LINE # 858
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 82  

                                           ; SOURCE LINE # 859
02D1         ?C0141:
                                           ; SOURCE LINE # 860
02D1 900000      R     MOV     DPTR,#TransferBuf+09H
02D4 E4                CLR     A
02D5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 861
                                           ; SOURCE LINE # 862
02D6 020000      R     LJMP    ?C0123
                                           ; SOURCE LINE # 863
02D9         ?C0139:
                                           ; SOURCE LINE # 864
                                           ; SOURCE LINE # 865
02D9 020000      R     LJMP    ?C0123
                                           ; SOURCE LINE # 867
02DC         ?C0147:
                                           ; SOURCE LINE # 868
                                           ; SOURCE LINE # 869
02DC 900000      R     MOV     DPTR,#channel
02DF E0                MOVX    A,@DPTR
02E0 FF                MOV     R7,A
02E1 75F019            MOV     B,#019H
02E4 EF                MOV     A,R7
02E5 A4                MUL     AB
02E6 2400        E     ADD     A,#LOW channels+02H
02E8 F582              MOV     DPL,A
02EA E5F0              MOV     A,B
02EC 3400        E     ADDC    A,#HIGH channels+02H
02EE F583              MOV     DPH,A
02F0 E0                MOVX    A,@DPTR
02F1 FF                MOV     R7,A
02F2 EF                MOV     A,R7
02F3 120000      E     LCALL   ?C?CCASE
02F6 0000        R     DW      ?C0149
02F8 00                DB      00H
02F9 0000        R     DW      ?C0150
02FB 01                DB      01H
02FC 0000              DW      00H
02FE 0000        R     DW      ?C0148
                                           ; SOURCE LINE # 870
                                           ; SOURCE LINE # 872
0300         ?C0149:
                                           ; SOURCE LINE # 873
                                           ; SOURCE LINE # 874
0300 900000      R     MOV     DPTR,#channel
0303 E0                MOVX    A,@DPTR
0304 FF                MOV     R7,A
0305 75F019            MOV     B,#019H
0308 EF                MOV     A,R7
0309 A4                MUL     AB
030A 2400        E     ADD     A,#LOW channels+07H
030C F582              MOV     DPL,A
030E E5F0              MOV     A,B
0310 3400        E     ADDC    A,#HIGH channels+07H
0312 F583              MOV     DPH,A
0314 E0                MOVX    A,@DPTR
0315 FF                MOV     R7,A
0316 900000      R     MOV     DPTR,#TransferBuf+06H
0319 EF                MOV     A,R7
031A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 875
031B 900000      R     MOV     DPTR,#channel
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 83  

031E E0                MOVX    A,@DPTR
031F FF                MOV     R7,A
0320 75F019            MOV     B,#019H
0323 EF                MOV     A,R7
0324 A4                MUL     AB
0325 2400        E     ADD     A,#LOW channels+08H
0327 F582              MOV     DPL,A
0329 E5F0              MOV     A,B
032B 3400        E     ADDC    A,#HIGH channels+08H
032D F583              MOV     DPH,A
032F E0                MOVX    A,@DPTR
0330 FF                MOV     R7,A
0331 900000      R     MOV     DPTR,#TransferBuf+07H
0334 EF                MOV     A,R7
0335 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 877
                                           ; SOURCE LINE # 878
0336 8036              SJMP    ?C0148
                                           ; SOURCE LINE # 880
0338         ?C0150:
                                           ; SOURCE LINE # 881
                                           ; SOURCE LINE # 882
0338 900000      R     MOV     DPTR,#channel
033B E0                MOVX    A,@DPTR
033C FF                MOV     R7,A
033D 75F019            MOV     B,#019H
0340 EF                MOV     A,R7
0341 A4                MUL     AB
0342 2400        E     ADD     A,#LOW channels+07H
0344 F582              MOV     DPL,A
0346 E5F0              MOV     A,B
0348 3400        E     ADDC    A,#HIGH channels+07H
034A F583              MOV     DPH,A
034C E0                MOVX    A,@DPTR
034D FF                MOV     R7,A
034E 900000      R     MOV     DPTR,#TransferBuf+06H
0351 EF                MOV     A,R7
0352 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 883
0353 900000      R     MOV     DPTR,#channel
0356 E0                MOVX    A,@DPTR
0357 FF                MOV     R7,A
0358 75F019            MOV     B,#019H
035B EF                MOV     A,R7
035C A4                MUL     AB
035D 2400        E     ADD     A,#LOW channels+08H
035F F582              MOV     DPL,A
0361 E5F0              MOV     A,B
0363 3400        E     ADDC    A,#HIGH channels+08H
0365 F583              MOV     DPH,A
0367 E0                MOVX    A,@DPTR
0368 FF                MOV     R7,A
0369 900000      R     MOV     DPTR,#TransferBuf+07H
036C EF                MOV     A,R7
036D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 884
                                           ; SOURCE LINE # 885
                                           ; SOURCE LINE # 886
036E         ?C0148:
                                           ; SOURCE LINE # 888
036E 900000      R     MOV     DPTR,#TransferBuf+08H
0371 7440              MOV     A,#040H
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 84  

0373 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 889
0374 900000      R     MOV     DPTR,#TransferBuf+09H
0377 E4                CLR     A
0378 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 890
                                           ; SOURCE LINE # 891
                                           ; SOURCE LINE # 892
0379         ?C0123:
                                           ; SOURCE LINE # 894
0379 900000      R     MOV     DPTR,#TransferBuf+0AH
037C 74FF              MOV     A,#0FFH
037E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 896
037F 7B01              MOV     R3,#01H
0381 7A00        R     MOV     R2,#HIGH TransferBuf
0383 7900        R     MOV     R1,#LOW TransferBuf
0385 7D0B              MOV     R5,#0BH
0387 120000      R     LCALL   _Old_Proto_Paste_Null
038A 900000      R     MOV     DPTR,#len
038D EF                MOV     A,R7
038E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 898
038F 7E00        R     MOV     R6,#HIGH TransferBuf
0391 7F00        R     MOV     R7,#LOW TransferBuf
0393 900000      R     MOV     DPTR,#len
0396 E0                MOVX    A,@DPTR
0397 FD                MOV     R5,A
0398 120000      R     LCALL   _Old_CRC_Check
039B 900000      R     MOV     DPTR,#len
039E E0                MOVX    A,@DPTR
039F FE                MOV     R6,A
03A0 7400        R     MOV     A,#LOW TransferBuf
03A2 2E                ADD     A,R6
03A3 F582              MOV     DPL,A
03A5 E4                CLR     A
03A6 3400        R     ADDC    A,#HIGH TransferBuf
03A8 F583              MOV     DPH,A
03AA EF                MOV     A,R7
03AB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 899
03AC 900000      R     MOV     DPTR,#len
03AF E0                MOVX    A,@DPTR
03B0 FF                MOV     R7,A
03B1 EF                MOV     A,R7
03B2 04                INC     A
03B3 FF                MOV     R7,A
03B4 22                RET     
                                           ; SOURCE LINE # 900
03B5         ?C0122:
                                           ; SOURCE LINE # 901
03B5 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 903
03B7         ?C0151:
03B7 22                RET     
             ; FUNCTION Old_Channel_Get_Data_State (END)

             ; FUNCTION Old_Channel_Get_State (BEGIN)
                                           ; SOURCE LINE # 905
                                           ; SOURCE LINE # 906
                                           ; SOURCE LINE # 907
0000 900000      R     MOV     DPTR,#channel
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 85  

0003 E4                CLR     A
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 908
0005 900000      R     MOV     DPTR,#len
0008 E4                CLR     A
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 909
000A 900000      R     MOV     DPTR,#RecieveBuf+04H
000D E0                MOVX    A,@DPTR
000E FF                MOV     R7,A
000F EF                MOV     A,R7
0010 13                RRC     A
0011 13                RRC     A
0012 13                RRC     A
0013 541F              ANL     A,#01FH
0015 FF                MOV     R7,A
0016 EF                MOV     A,R7
0017 541F              ANL     A,#01FH
0019 FF                MOV     R7,A
001A 900000      R     MOV     DPTR,#channel
001D EF                MOV     A,R7
001E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 910
001F 900000      R     MOV     DPTR,#channel
0022 E0                MOVX    A,@DPTR
0023 FF                MOV     R7,A
0024 EF                MOV     A,R7
0025 C3                CLR     C
0026 940E              SUBB    A,#0EH
0028 4003              JC      $ + 5H
002A 020000      R     LJMP    ?C0152
                                           ; SOURCE LINE # 911
                                           ; SOURCE LINE # 913
002D 900000      R     MOV     DPTR,#TransferBuf
0030 E4                CLR     A
0031 F0                MOVX    @DPTR,A
0032 900000      R     MOV     DPTR,#TransferBuf+01H
0035 74D7              MOV     A,#0D7H
0037 F0                MOVX    @DPTR,A
0038 900000      R     MOV     DPTR,#TransferBuf+02H
003B 7428              MOV     A,#028H
003D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 914
003E 900000      R     MOV     DPTR,#TransferBuf+03H
0041 E4                CLR     A
0042 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 915
0043 900000      R     MOV     DPTR,#RecieveBuf+04H
0046 E0                MOVX    A,@DPTR
0047 FF                MOV     R7,A
0048 900000      R     MOV     DPTR,#TransferBuf+04H
004B EF                MOV     A,R7
004C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 916
004D 900000      R     MOV     DPTR,#TransferBuf+05H
0050 7403              MOV     A,#03H
0052 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 918
0053 900000      R     MOV     DPTR,#channel
0056 E0                MOVX    A,@DPTR
0057 FF                MOV     R7,A
0058 75F019            MOV     B,#019H
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 86  

005B EF                MOV     A,R7
005C A4                MUL     AB
005D 2400        E     ADD     A,#LOW channels+01H
005F F582              MOV     DPL,A
0061 E5F0              MOV     A,B
0063 3400        E     ADDC    A,#HIGH channels+01H
0065 F583              MOV     DPH,A
0067 E0                MOVX    A,@DPTR
0068 FF                MOV     R7,A
0069 EF                MOV     A,R7
006A 120000      E     LCALL   ?C?CCASE
006D 0000        R     DW      ?C0154
006F 00                DB      00H
0070 0000        R     DW      ?C0161
0072 01                DB      01H
0073 0000        R     DW      ?C0168
0075 02                DB      02H
0076 0000              DW      00H
0078 0000        R     DW      ?C0153
                                           ; SOURCE LINE # 919
                                           ; SOURCE LINE # 920
007A         ?C0154:
                                           ; SOURCE LINE # 921
                                           ; SOURCE LINE # 922
007A 900000      R     MOV     DPTR,#channel
007D E0                MOVX    A,@DPTR
007E FF                MOV     R7,A
007F 75F019            MOV     B,#019H
0082 EF                MOV     A,R7
0083 A4                MUL     AB
0084 2400        E     ADD     A,#LOW channels+03H
0086 F582              MOV     DPL,A
0088 E5F0              MOV     A,B
008A 3400        E     ADDC    A,#HIGH channels+03H
008C F583              MOV     DPH,A
008E E0                MOVX    A,@DPTR
008F FF                MOV     R7,A
0090 EF                MOV     A,R7
0091 5407              ANL     A,#07H
0093 FF                MOV     R7,A
0094 EF                MOV     A,R7
0095 120000      E     LCALL   ?C?CCASE
0098 0000        R     DW      ?C0156
009A 00                DB      00H
009B 0000        R     DW      ?C0157
009D 01                DB      01H
009E 0000        R     DW      ?C0158
00A0 05                DB      05H
00A1 0000        R     DW      ?C0159
00A3 07                DB      07H
00A4 0000              DW      00H
00A6 0000        R     DW      ?C0160
                                           ; SOURCE LINE # 923
                                           ; SOURCE LINE # 924
00A8         ?C0156:
                                           ; SOURCE LINE # 925
                                           ; SOURCE LINE # 926
00A8 900000      R     MOV     DPTR,#TransferBuf+06H
00AB E4                CLR     A
00AC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 927
                                           ; SOURCE LINE # 928
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 87  

00AD 801D              SJMP    ?C0155
                                           ; SOURCE LINE # 930
00AF         ?C0157:
                                           ; SOURCE LINE # 931
                                           ; SOURCE LINE # 932
00AF 900000      R     MOV     DPTR,#TransferBuf+06H
00B2 7402              MOV     A,#02H
00B4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 933
                                           ; SOURCE LINE # 934
00B5 8015              SJMP    ?C0155
                                           ; SOURCE LINE # 936
00B7         ?C0158:
                                           ; SOURCE LINE # 937
                                           ; SOURCE LINE # 938
00B7 900000      R     MOV     DPTR,#TransferBuf+06H
00BA 7404              MOV     A,#04H
00BC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 939
                                           ; SOURCE LINE # 940
00BD 800D              SJMP    ?C0155
                                           ; SOURCE LINE # 942
00BF         ?C0159:
                                           ; SOURCE LINE # 943
                                           ; SOURCE LINE # 944
00BF 900000      R     MOV     DPTR,#TransferBuf+06H
00C2 7406              MOV     A,#06H
00C4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 945
                                           ; SOURCE LINE # 946
00C5 8005              SJMP    ?C0155
                                           ; SOURCE LINE # 948
00C7         ?C0160:
                                           ; SOURCE LINE # 949
                                           ; SOURCE LINE # 950
00C7 900000      R     MOV     DPTR,#TransferBuf+06H
00CA E4                CLR     A
00CB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 951
                                           ; SOURCE LINE # 952
                                           ; SOURCE LINE # 953
00CC         ?C0155:
                                           ; SOURCE LINE # 955
00CC 900000      R     MOV     DPTR,#TransferBuf+07H
00CF 740A              MOV     A,#0AH
00D1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 956
                                           ; SOURCE LINE # 957
00D2 8066              SJMP    ?C0153
                                           ; SOURCE LINE # 959
00D4         ?C0161:
                                           ; SOURCE LINE # 960
                                           ; SOURCE LINE # 962
00D4 900000      R     MOV     DPTR,#channel
00D7 E0                MOVX    A,@DPTR
00D8 FF                MOV     R7,A
00D9 75F019            MOV     B,#019H
00DC EF                MOV     A,R7
00DD A4                MUL     AB
00DE 2400        E     ADD     A,#LOW channels+03H
00E0 F582              MOV     DPL,A
00E2 E5F0              MOV     A,B
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 88  

00E4 3400        E     ADDC    A,#HIGH channels+03H
00E6 F583              MOV     DPH,A
00E8 E0                MOVX    A,@DPTR
00E9 FF                MOV     R7,A
00EA EF                MOV     A,R7
00EB 5407              ANL     A,#07H
00ED FF                MOV     R7,A
00EE EF                MOV     A,R7
00EF 120000      E     LCALL   ?C?CCASE
00F2 0000        R     DW      ?C0163
00F4 00                DB      00H
00F5 0000        R     DW      ?C0164
00F7 01                DB      01H
00F8 0000        R     DW      ?C0165
00FA 05                DB      05H
00FB 0000        R     DW      ?C0166
00FD 07                DB      07H
00FE 0000              DW      00H
0100 0000        R     DW      ?C0167
                                           ; SOURCE LINE # 963
                                           ; SOURCE LINE # 964
0102         ?C0163:
                                           ; SOURCE LINE # 965
                                           ; SOURCE LINE # 966
0102 900000      R     MOV     DPTR,#TransferBuf+06H
0105 7440              MOV     A,#040H
0107 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 967
                                           ; SOURCE LINE # 968
0108 801E              SJMP    ?C0162
                                           ; SOURCE LINE # 970
010A         ?C0164:
                                           ; SOURCE LINE # 971
                                           ; SOURCE LINE # 972
010A 900000      R     MOV     DPTR,#TransferBuf+06H
010D 7442              MOV     A,#042H
010F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 973
                                           ; SOURCE LINE # 974
0110 8016              SJMP    ?C0162
                                           ; SOURCE LINE # 976
0112         ?C0165:
                                           ; SOURCE LINE # 977
                                           ; SOURCE LINE # 978
0112 900000      R     MOV     DPTR,#TransferBuf+06H
0115 7444              MOV     A,#044H
0117 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 979
                                           ; SOURCE LINE # 980
0118 800E              SJMP    ?C0162
                                           ; SOURCE LINE # 982
011A         ?C0166:
                                           ; SOURCE LINE # 983
                                           ; SOURCE LINE # 984
011A 900000      R     MOV     DPTR,#TransferBuf+06H
011D 7446              MOV     A,#046H
011F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 985
                                           ; SOURCE LINE # 986
0120 8006              SJMP    ?C0162
                                           ; SOURCE LINE # 988
0122         ?C0167:
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 89  

                                           ; SOURCE LINE # 989
                                           ; SOURCE LINE # 990
0122 900000      R     MOV     DPTR,#TransferBuf+06H
0125 7440              MOV     A,#040H
0127 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 991
                                           ; SOURCE LINE # 992
                                           ; SOURCE LINE # 994
0128         ?C0162:
                                           ; SOURCE LINE # 995
0128 900000      R     MOV     DPTR,#TransferBuf+07H
012B E4                CLR     A
012C F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 996
                                           ; SOURCE LINE # 997
012D 800B              SJMP    ?C0153
                                           ; SOURCE LINE # 999
012F         ?C0168:
                                           ; SOURCE LINE # 1000
                                           ; SOURCE LINE # 1002
012F 900000      R     MOV     DPTR,#TransferBuf+06H
0132 7440              MOV     A,#040H
0134 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1003
0135 900000      R     MOV     DPTR,#TransferBuf+07H
0138 E4                CLR     A
0139 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1004
                                           ; SOURCE LINE # 1005
                                           ; SOURCE LINE # 1006
013A         ?C0153:
                                           ; SOURCE LINE # 1008
013A 7B01              MOV     R3,#01H
013C 7A00        R     MOV     R2,#HIGH TransferBuf
013E 7900        R     MOV     R1,#LOW TransferBuf
0140 7D08              MOV     R5,#08H
0142 120000      R     LCALL   _Old_Proto_Paste_Null
0145 900000      R     MOV     DPTR,#len
0148 EF                MOV     A,R7
0149 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1010
014A 7E00        R     MOV     R6,#HIGH TransferBuf
014C 7F00        R     MOV     R7,#LOW TransferBuf
014E 900000      R     MOV     DPTR,#len
0151 E0                MOVX    A,@DPTR
0152 FD                MOV     R5,A
0153 120000      R     LCALL   _Old_CRC_Check
0156 900000      R     MOV     DPTR,#len
0159 E0                MOVX    A,@DPTR
015A FE                MOV     R6,A
015B 7400        R     MOV     A,#LOW TransferBuf
015D 2E                ADD     A,R6
015E F582              MOV     DPL,A
0160 E4                CLR     A
0161 3400        R     ADDC    A,#HIGH TransferBuf
0163 F583              MOV     DPH,A
0165 EF                MOV     A,R7
0166 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1011
0167 900000      R     MOV     DPTR,#len
016A E0                MOVX    A,@DPTR
016B FF                MOV     R7,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 90  

016C EF                MOV     A,R7
016D 04                INC     A
016E FF                MOV     R7,A
016F 22                RET     
                                           ; SOURCE LINE # 1012
0170         ?C0152:
                                           ; SOURCE LINE # 1013
0170 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 1014
0172         ?C0169:
0172 22                RET     
             ; FUNCTION Old_Channel_Get_State (END)

             ; FUNCTION Old_Reinit_Block (BEGIN)
                                           ; SOURCE LINE # 1016
                                           ; SOURCE LINE # 1017
                                           ; SOURCE LINE # 1018
0000 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 1019
0002         ?C0170:
0002 22                RET     
             ; FUNCTION Old_Reinit_Block (END)

             ; FUNCTION Old_Channel_Set_ADC_Range (BEGIN)
                                           ; SOURCE LINE # 1021
                                           ; SOURCE LINE # 1022
                                           ; SOURCE LINE # 1023
0000 900000      R     MOV     DPTR,#channel
0003 E4                CLR     A
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1024
0005 900000      R     MOV     DPTR,#RecieveBuf+04H
0008 E0                MOVX    A,@DPTR
0009 FF                MOV     R7,A
000A EF                MOV     A,R7
000B 13                RRC     A
000C 13                RRC     A
000D 13                RRC     A
000E 541F              ANL     A,#01FH
0010 FF                MOV     R7,A
0011 EF                MOV     A,R7
0012 541F              ANL     A,#01FH
0014 FF                MOV     R7,A
0015 900000      R     MOV     DPTR,#channel
0018 EF                MOV     A,R7
0019 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1025
001A 900000      R     MOV     DPTR,#channel
001D E0                MOVX    A,@DPTR
001E FF                MOV     R7,A
001F EF                MOV     A,R7
0020 C3                CLR     C
0021 940E              SUBB    A,#0EH
0023 4003              JC      $ + 5H
0025 020000      R     LJMP    ?C0171
                                           ; SOURCE LINE # 1026
                                           ; SOURCE LINE # 1027
0028 900000      R     MOV     DPTR,#RecieveBuf+06H
002B E0                MOVX    A,@DPTR
002C FF                MOV     R7,A
002D EF                MOV     A,R7
002E C3                CLR     C
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 91  

002F 13                RRC     A
0030 FF                MOV     R7,A
0031 EF                MOV     A,R7
0032 5403              ANL     A,#03H
0034 FF                MOV     R7,A
0035 EF                MOV     A,R7
0036 120000      E     LCALL   ?C?CCASE
0039 0000        R     DW      ?C0173
003B 00                DB      00H
003C 0000        R     DW      ?C0174
003E 01                DB      01H
003F 0000        R     DW      ?C0175
0041 02                DB      02H
0042 0000        R     DW      ?C0176
0044 03                DB      03H
0045 0000              DW      00H
0047 0000        R     DW      ?C0177
                                           ; SOURCE LINE # 1028
                                           ; SOURCE LINE # 1029
0049         ?C0173:
                                           ; SOURCE LINE # 1030
                                           ; SOURCE LINE # 1031
0049 900000      R     MOV     DPTR,#channel
004C E0                MOVX    A,@DPTR
004D FF                MOV     R7,A
004E 75F019            MOV     B,#019H
0051 EF                MOV     A,R7
0052 A4                MUL     AB
0053 2400        E     ADD     A,#LOW channels+03H
0055 F582              MOV     DPL,A
0057 E5F0              MOV     A,B
0059 3400        E     ADDC    A,#HIGH channels+03H
005B F583              MOV     DPH,A
005D E0                MOVX    A,@DPTR
005E FF                MOV     R7,A
005F EF                MOV     A,R7
0060 54F0              ANL     A,#0F0H
0062 FF                MOV     R7,A
0063 EF                MOV     A,R7
0064 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1032
0065 900000      R     MOV     DPTR,#channel
0068 E0                MOVX    A,@DPTR
0069 FF                MOV     R7,A
006A 75F019            MOV     B,#019H
006D EF                MOV     A,R7
006E A4                MUL     AB
006F 2400        E     ADD     A,#LOW channels+03H
0071 F582              MOV     DPL,A
0073 E5F0              MOV     A,B
0075 3400        E     ADDC    A,#HIGH channels+03H
0077 F583              MOV     DPH,A
0079 E0                MOVX    A,@DPTR
007A FF                MOV     R7,A
007B EF                MOV     A,R7
007C 4400              ORL     A,#00H
007E FF                MOV     R7,A
007F EF                MOV     A,R7
0080 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1033
                                           ; SOURCE LINE # 1034
0081 020000      R     LJMP    ?C0171
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 92  

                                           ; SOURCE LINE # 1036
0084         ?C0174:
                                           ; SOURCE LINE # 1037
                                           ; SOURCE LINE # 1038
0084 900000      R     MOV     DPTR,#channel
0087 E0                MOVX    A,@DPTR
0088 FF                MOV     R7,A
0089 75F019            MOV     B,#019H
008C EF                MOV     A,R7
008D A4                MUL     AB
008E 2400        E     ADD     A,#LOW channels+03H
0090 F582              MOV     DPL,A
0092 E5F0              MOV     A,B
0094 3400        E     ADDC    A,#HIGH channels+03H
0096 F583              MOV     DPH,A
0098 E0                MOVX    A,@DPTR
0099 FF                MOV     R7,A
009A EF                MOV     A,R7
009B 54F0              ANL     A,#0F0H
009D FF                MOV     R7,A
009E EF                MOV     A,R7
009F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1039
00A0 900000      R     MOV     DPTR,#channel
00A3 E0                MOVX    A,@DPTR
00A4 FF                MOV     R7,A
00A5 75F019            MOV     B,#019H
00A8 EF                MOV     A,R7
00A9 A4                MUL     AB
00AA 2400        E     ADD     A,#LOW channels+03H
00AC F582              MOV     DPL,A
00AE E5F0              MOV     A,B
00B0 3400        E     ADDC    A,#HIGH channels+03H
00B2 F583              MOV     DPH,A
00B4 E0                MOVX    A,@DPTR
00B5 FF                MOV     R7,A
00B6 EF                MOV     A,R7
00B7 4401              ORL     A,#01H
00B9 FF                MOV     R7,A
00BA EF                MOV     A,R7
00BB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1040
                                           ; SOURCE LINE # 1041
00BC 020000      R     LJMP    ?C0171
                                           ; SOURCE LINE # 1043
00BF         ?C0175:
                                           ; SOURCE LINE # 1044
                                           ; SOURCE LINE # 1045
00BF 900000      R     MOV     DPTR,#channel
00C2 E0                MOVX    A,@DPTR
00C3 FF                MOV     R7,A
00C4 75F019            MOV     B,#019H
00C7 EF                MOV     A,R7
00C8 A4                MUL     AB
00C9 2400        E     ADD     A,#LOW channels+03H
00CB F582              MOV     DPL,A
00CD E5F0              MOV     A,B
00CF 3400        E     ADDC    A,#HIGH channels+03H
00D1 F583              MOV     DPH,A
00D3 E0                MOVX    A,@DPTR
00D4 FF                MOV     R7,A
00D5 EF                MOV     A,R7
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 93  

00D6 54F0              ANL     A,#0F0H
00D8 FF                MOV     R7,A
00D9 EF                MOV     A,R7
00DA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1046
00DB 900000      R     MOV     DPTR,#channel
00DE E0                MOVX    A,@DPTR
00DF FF                MOV     R7,A
00E0 75F019            MOV     B,#019H
00E3 EF                MOV     A,R7
00E4 A4                MUL     AB
00E5 2400        E     ADD     A,#LOW channels+03H
00E7 F582              MOV     DPL,A
00E9 E5F0              MOV     A,B
00EB 3400        E     ADDC    A,#HIGH channels+03H
00ED F583              MOV     DPH,A
00EF E0                MOVX    A,@DPTR
00F0 FF                MOV     R7,A
00F1 EF                MOV     A,R7
00F2 4405              ORL     A,#05H
00F4 FF                MOV     R7,A
00F5 EF                MOV     A,R7
00F6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1047
                                           ; SOURCE LINE # 1048
00F7 8072              SJMP    ?C0171
                                           ; SOURCE LINE # 1050
00F9         ?C0176:
                                           ; SOURCE LINE # 1051
                                           ; SOURCE LINE # 1052
00F9 900000      R     MOV     DPTR,#channel
00FC E0                MOVX    A,@DPTR
00FD FF                MOV     R7,A
00FE 75F019            MOV     B,#019H
0101 EF                MOV     A,R7
0102 A4                MUL     AB
0103 2400        E     ADD     A,#LOW channels+03H
0105 F582              MOV     DPL,A
0107 E5F0              MOV     A,B
0109 3400        E     ADDC    A,#HIGH channels+03H
010B F583              MOV     DPH,A
010D E0                MOVX    A,@DPTR
010E FF                MOV     R7,A
010F EF                MOV     A,R7
0110 54F0              ANL     A,#0F0H
0112 FF                MOV     R7,A
0113 EF                MOV     A,R7
0114 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1053
0115 900000      R     MOV     DPTR,#channel
0118 E0                MOVX    A,@DPTR
0119 FF                MOV     R7,A
011A 75F019            MOV     B,#019H
011D EF                MOV     A,R7
011E A4                MUL     AB
011F 2400        E     ADD     A,#LOW channels+03H
0121 F582              MOV     DPL,A
0123 E5F0              MOV     A,B
0125 3400        E     ADDC    A,#HIGH channels+03H
0127 F583              MOV     DPH,A
0129 E0                MOVX    A,@DPTR
012A FF                MOV     R7,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 94  

012B EF                MOV     A,R7
012C 4407              ORL     A,#07H
012E FF                MOV     R7,A
012F EF                MOV     A,R7
0130 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1054
                                           ; SOURCE LINE # 1055
0131 8038              SJMP    ?C0171
                                           ; SOURCE LINE # 1057
0133         ?C0177:
                                           ; SOURCE LINE # 1058
                                           ; SOURCE LINE # 1059
0133 900000      R     MOV     DPTR,#channel
0136 E0                MOVX    A,@DPTR
0137 FF                MOV     R7,A
0138 75F019            MOV     B,#019H
013B EF                MOV     A,R7
013C A4                MUL     AB
013D 2400        E     ADD     A,#LOW channels+03H
013F F582              MOV     DPL,A
0141 E5F0              MOV     A,B
0143 3400        E     ADDC    A,#HIGH channels+03H
0145 F583              MOV     DPH,A
0147 E0                MOVX    A,@DPTR
0148 FF                MOV     R7,A
0149 EF                MOV     A,R7
014A 54F0              ANL     A,#0F0H
014C FF                MOV     R7,A
014D EF                MOV     A,R7
014E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1060
014F 900000      R     MOV     DPTR,#channel
0152 E0                MOVX    A,@DPTR
0153 FF                MOV     R7,A
0154 75F019            MOV     B,#019H
0157 EF                MOV     A,R7
0158 A4                MUL     AB
0159 2400        E     ADD     A,#LOW channels+03H
015B F582              MOV     DPL,A
015D E5F0              MOV     A,B
015F 3400        E     ADDC    A,#HIGH channels+03H
0161 F583              MOV     DPH,A
0163 E0                MOVX    A,@DPTR
0164 FF                MOV     R7,A
0165 EF                MOV     A,R7
0166 4400              ORL     A,#00H
0168 FF                MOV     R7,A
0169 EF                MOV     A,R7
016A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1061
                                           ; SOURCE LINE # 1062
                                           ; SOURCE LINE # 1063
016B         ?C0172:
                                           ; SOURCE LINE # 1064
016B         ?C0171:
                                           ; SOURCE LINE # 1065
016B 7F00              MOV     R7,#00H
                                           ; SOURCE LINE # 1066
016D         ?C0178:
016D 22                RET     
             ; FUNCTION Old_Channel_Set_ADC_Range (END)

C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 95  

             ; FUNCTION _Old_Proto_Paste_Null (BEGIN)
                                           ; SOURCE LINE # 1068
0000 900000      R     MOV     DPTR,#buf
0003 EB                MOV     A,R3
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EA                MOV     A,R2
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 E9                MOV     A,R1
000A F0                MOVX    @DPTR,A
000B 900000      R     MOV     DPTR,#len
000E ED                MOV     A,R5
000F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1069
                                           ; SOURCE LINE # 1070
0010 900000      R     MOV     DPTR,#i
0013 E4                CLR     A
0014 F0                MOVX    @DPTR,A
0015 900000      R     MOV     DPTR,#j
0018 E4                CLR     A
0019 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1072
001A 900000      R     MOV     DPTR,#i
001D 7403              MOV     A,#03H
001F F0                MOVX    @DPTR,A
0020         ?C0179:
0020 900000      R     MOV     DPTR,#len
0023 E0                MOVX    A,@DPTR
0024 FF                MOV     R7,A
0025 900000      R     MOV     DPTR,#i
0028 E0                MOVX    A,@DPTR
0029 FE                MOV     R6,A
002A EE                MOV     A,R6
002B C3                CLR     C
002C 9F                SUBB    A,R7
002D 4003              JC      $ + 5H
002F 020000      R     LJMP    ?C0180
                                           ; SOURCE LINE # 1073
                                           ; SOURCE LINE # 1074
0032 900000      R     MOV     DPTR,#buf
0035 E0                MOVX    A,@DPTR
0036 FB                MOV     R3,A
0037 A3                INC     DPTR
0038 E0                MOVX    A,@DPTR
0039 FA                MOV     R2,A
003A A3                INC     DPTR
003B E0                MOVX    A,@DPTR
003C F9                MOV     R1,A
003D 900000      R     MOV     DPTR,#i
0040 E0                MOVX    A,@DPTR
0041 FF                MOV     R7,A
0042 8F82              MOV     DPL,R7
0044 758300            MOV     DPH,#00H
0047 120000      E     LCALL   ?C?CLDOPTR
004A FF                MOV     R7,A
004B EF                MOV     A,R7
004C 64D7              XRL     A,#0D7H
004E 6003              JZ      $ + 5H
0050 020000      R     LJMP    ?C0181
                                           ; SOURCE LINE # 1075
                                           ; SOURCE LINE # 1076
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 96  

0053 900000      R     MOV     DPTR,#len
0056 E0                MOVX    A,@DPTR
0057 FF                MOV     R7,A
0058 EF                MOV     A,R7
0059 14                DEC     A
005A FF                MOV     R7,A
005B 900000      R     MOV     DPTR,#j
005E EF                MOV     A,R7
005F F0                MOVX    @DPTR,A
0060         ?C0183:
0060 900000      R     MOV     DPTR,#i
0063 E0                MOVX    A,@DPTR
0064 FF                MOV     R7,A
0065 900000      R     MOV     DPTR,#j
0068 E0                MOVX    A,@DPTR
0069 FE                MOV     R6,A
006A EE                MOV     A,R6
006B D3                SETB    C
006C 9F                SUBB    A,R7
006D 4045              JC      ?C0184
                                           ; SOURCE LINE # 1077
                                           ; SOURCE LINE # 1078
006F 900000      R     MOV     DPTR,#buf
0072 E0                MOVX    A,@DPTR
0073 FB                MOV     R3,A
0074 A3                INC     DPTR
0075 E0                MOVX    A,@DPTR
0076 FA                MOV     R2,A
0077 A3                INC     DPTR
0078 E0                MOVX    A,@DPTR
0079 F9                MOV     R1,A
007A 900000      R     MOV     DPTR,#j
007D E0                MOVX    A,@DPTR
007E FF                MOV     R7,A
007F 8F82              MOV     DPL,R7
0081 758300            MOV     DPH,#00H
0084 120000      E     LCALL   ?C?CLDOPTR
0087 FF                MOV     R7,A
0088 900000      R     MOV     DPTR,#j
008B E0                MOVX    A,@DPTR
008C FE                MOV     R6,A
008D EE                MOV     A,R6
008E FD                MOV     R5,A
008F 7C00              MOV     R4,#00H
0091 ED                MOV     A,R5
0092 2401              ADD     A,#01H
0094 FD                MOV     R5,A
0095 EC                MOV     A,R4
0096 3400              ADDC    A,#00H
0098 FC                MOV     R4,A
0099 900000      R     MOV     DPTR,#buf
009C E0                MOVX    A,@DPTR
009D FB                MOV     R3,A
009E A3                INC     DPTR
009F E0                MOVX    A,@DPTR
00A0 FA                MOV     R2,A
00A1 A3                INC     DPTR
00A2 E0                MOVX    A,@DPTR
00A3 F9                MOV     R1,A
00A4 8D82              MOV     DPL,R5
00A6 8C83              MOV     DPH,R4
00A8 EF                MOV     A,R7
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 97  

00A9 120000      E     LCALL   ?C?CSTOPTR
                                           ; SOURCE LINE # 1079
00AC         ?C0185:
00AC 900000      R     MOV     DPTR,#j
00AF E0                MOVX    A,@DPTR
00B0 14                DEC     A
00B1 F0                MOVX    @DPTR,A
00B2 80AC              SJMP    ?C0183
00B4         ?C0184:
                                           ; SOURCE LINE # 1080
00B4 900000      R     MOV     DPTR,#i
00B7 E0                MOVX    A,@DPTR
00B8 FF                MOV     R7,A
00B9 7E00              MOV     R6,#00H
00BB EF                MOV     A,R7
00BC 2401              ADD     A,#01H
00BE FF                MOV     R7,A
00BF EE                MOV     A,R6
00C0 3400              ADDC    A,#00H
00C2 FE                MOV     R6,A
00C3 900000      R     MOV     DPTR,#buf
00C6 E0                MOVX    A,@DPTR
00C7 FB                MOV     R3,A
00C8 A3                INC     DPTR
00C9 E0                MOVX    A,@DPTR
00CA FA                MOV     R2,A
00CB A3                INC     DPTR
00CC E0                MOVX    A,@DPTR
00CD F9                MOV     R1,A
00CE 8F82              MOV     DPL,R7
00D0 8E83              MOV     DPH,R6
00D2 E4                CLR     A
00D3 120000      E     LCALL   ?C?CSTOPTR
                                           ; SOURCE LINE # 1081
00D6 900000      R     MOV     DPTR,#buf
00D9 E0                MOVX    A,@DPTR
00DA FB                MOV     R3,A
00DB A3                INC     DPTR
00DC E0                MOVX    A,@DPTR
00DD FA                MOV     R2,A
00DE A3                INC     DPTR
00DF E0                MOVX    A,@DPTR
00E0 F9                MOV     R1,A
00E1 758205            MOV     DPL,#05H
00E4 758300            MOV     DPH,#00H
00E7 7401              MOV     A,#01H
00E9 120000      E     LCALL   ?C?CILDOPTR
                                           ; SOURCE LINE # 1082
00EC 900000      R     MOV     DPTR,#len
00EF E0                MOVX    A,@DPTR
00F0 04                INC     A
00F1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1083
00F2 900000      R     MOV     DPTR,#i
00F5 E0                MOVX    A,@DPTR
00F6 04                INC     A
00F7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1084
00F8         ?C0182:
                                           ; SOURCE LINE # 1085
00F8         ?C0181:
00F8 900000      R     MOV     DPTR,#i
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 98  

00FB E0                MOVX    A,@DPTR
00FC 04                INC     A
00FD F0                MOVX    @DPTR,A
00FE 020000      R     LJMP    ?C0179
0101         ?C0180:
                                           ; SOURCE LINE # 1086
0101 900000      R     MOV     DPTR,#len
0104 E0                MOVX    A,@DPTR
0105 FF                MOV     R7,A
                                           ; SOURCE LINE # 1087
0106         ?C0186:
0106 22                RET     
             ; FUNCTION _Old_Proto_Paste_Null (END)

             ; FUNCTION ProtoBufHandling (BEGIN)
                                           ; SOURCE LINE # 1089
                                           ; SOURCE LINE # 1090
                                           ; SOURCE LINE # 1091
0000 900000      R     MOV     DPTR,#protocol_type
0003 E0                MOVX    A,@DPTR
0004 FF                MOV     R7,A
0005 EF                MOV     A,R7
0006 6003              JZ      $ + 5H
0008 020000      R     LJMP    ?C0187
                                           ; SOURCE LINE # 1092
                                           ; SOURCE LINE # 1093
000B 900000      E     MOV     DPTR,#channels+0116H
000E 7440              MOV     A,#040H
0010 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1094
0011 900000      E     MOV     DPTR,#channels+0117H
0014 740A              MOV     A,#0AH
0016 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1095
0017 900000      R     MOV     DPTR,#RecieveBuf+04H
001A E0                MOVX    A,@DPTR
001B FF                MOV     R7,A
001C EF                MOV     A,R7
001D 120000      E     LCALL   ?C?CCASE
0020 0000        R     DW      ?C0189
0022 01                DB      01H
0023 0000        R     DW      ?C0190
0025 03                DB      03H
0026 0000        R     DW      ?C0191
0028 05                DB      05H
0029 0000        R     DW      ?C0192
002B 07                DB      07H
002C 0000        R     DW      ?C0193
002E 09                DB      09H
002F 0000        R     DW      ?C0194
0031 0A                DB      0AH
0032 0000        R     DW      ?C0195
0034 0C                DB      0CH
0035 0000        R     DW      ?C0196
0037 0E                DB      0EH
0038 0000        R     DW      ?C0197
003A 10                DB      010H
003B 0000        R     DW      ?C0198
003D 12                DB      012H
003E 0000        R     DW      ?C0199
0040 14                DB      014H
0041 0000        R     DW      ?C0201
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 99  

0043 CA                DB      0CAH
0044 0000        R     DW      ?C0203
0046 CB                DB      0CBH
0047 0000        R     DW      ?C0200
0049 CD                DB      0CDH
004A 0000        R     DW      ?C0202
004C DF                DB      0DFH
004D 0000              DW      00H
004F 0000        R     DW      ?C0204
                                           ; SOURCE LINE # 1096
                                           ; SOURCE LINE # 1098
0051         ?C0189:
                                           ; SOURCE LINE # 1099
                                           ; SOURCE LINE # 1100
0051 120000      R     LCALL   Send_Info
0054 900000      R     MOV     DPTR,#buf_len
0057 EF                MOV     A,R7
0058 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1101
                                           ; SOURCE LINE # 1102
0059 22                RET     
                                           ; SOURCE LINE # 1104
005A         ?C0190:
                                           ; SOURCE LINE # 1105
                                           ; SOURCE LINE # 1106
005A 120000      R     LCALL   Node_Full_Init
005D 900000      R     MOV     DPTR,#buf_len
0060 EF                MOV     A,R7
0061 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1107
                                           ; SOURCE LINE # 1108
0062 22                RET     
                                           ; SOURCE LINE # 1110
0063         ?C0191:
                                           ; SOURCE LINE # 1111
                                           ; SOURCE LINE # 1112
0063 120000      R     LCALL   Channel_List_Init
0066 900000      R     MOV     DPTR,#buf_len
0069 EF                MOV     A,R7
006A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1113
                                           ; SOURCE LINE # 1114
006B 22                RET     
                                           ; SOURCE LINE # 1116
006C         ?C0192:
                                           ; SOURCE LINE # 1117
                                           ; SOURCE LINE # 1118
006C 120000      R     LCALL   Channel_Get_Data
006F 900000      R     MOV     DPTR,#buf_len
0072 EF                MOV     A,R7
0073 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1119
                                           ; SOURCE LINE # 1120
0074 22                RET     
                                           ; SOURCE LINE # 1122
0075         ?C0193:
                                           ; SOURCE LINE # 1123
                                           ; SOURCE LINE # 1124
0075 120000      R     LCALL   Channel_Set_Parameters
0078 900000      R     MOV     DPTR,#buf_len
007B EF                MOV     A,R7
007C F0                MOVX    @DPTR,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 100 

                                           ; SOURCE LINE # 1125
                                           ; SOURCE LINE # 1126
007D 22                RET     
                                           ; SOURCE LINE # 1128
007E         ?C0194:
                                           ; SOURCE LINE # 1129
                                           ; SOURCE LINE # 1130
007E 120000      R     LCALL   Channel_Set_Order_Query
0081 900000      R     MOV     DPTR,#buf_len
0084 EF                MOV     A,R7
0085 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1131
                                           ; SOURCE LINE # 1132
0086 22                RET     
                                           ; SOURCE LINE # 1134
0087         ?C0195:
                                           ; SOURCE LINE # 1135
                                           ; SOURCE LINE # 1136
0087 120000      R     LCALL   Channel_Get_Data_Order
008A 900000      R     MOV     DPTR,#buf_len
008D EF                MOV     A,R7
008E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1137
                                           ; SOURCE LINE # 1138
008F 22                RET     
                                           ; SOURCE LINE # 1140
0090         ?C0196:
                                           ; SOURCE LINE # 1141
                                           ; SOURCE LINE # 1142
0090 120000      R     LCALL   Channel_Set_State
0093 900000      R     MOV     DPTR,#buf_len
0096 EF                MOV     A,R7
0097 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1143
                                           ; SOURCE LINE # 1144
0098 22                RET     
                                           ; SOURCE LINE # 1146
0099         ?C0197:
                                           ; SOURCE LINE # 1147
                                           ; SOURCE LINE # 1148
0099 120000      R     LCALL   Channel_Get_Data_Order_M2
009C 900000      R     MOV     DPTR,#buf_len
009F EF                MOV     A,R7
00A0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1149
                                           ; SOURCE LINE # 1150
00A1 22                RET     
                                           ; SOURCE LINE # 1152
00A2         ?C0198:
                                           ; SOURCE LINE # 1153
                                           ; SOURCE LINE # 1154
00A2 120000      R     LCALL   Channel_Set_Reset_State_Flags
00A5 900000      R     MOV     DPTR,#buf_len
00A8 EF                MOV     A,R7
00A9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1155
                                           ; SOURCE LINE # 1156
00AA 22                RET     
                                           ; SOURCE LINE # 1158
00AB         ?C0199:
                                           ; SOURCE LINE # 1159
                                           ; SOURCE LINE # 1160
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 101 

00AB 120000      R     LCALL   Channel_All_Get_Data
00AE 900000      R     MOV     DPTR,#buf_len
00B1 EF                MOV     A,R7
00B2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1161
                                           ; SOURCE LINE # 1162
00B3 22                RET     
                                           ; SOURCE LINE # 1164
00B4         ?C0200:
                                           ; SOURCE LINE # 1165
                                           ; SOURCE LINE # 1166
00B4 120000      R     LCALL   Channel_Set_Address_Desc
00B7 900000      R     MOV     DPTR,#buf_len
00BA EF                MOV     A,R7
00BB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1167
                                           ; SOURCE LINE # 1168
00BC 22                RET     
                                           ; SOURCE LINE # 1170
00BD         ?C0201:
                                           ; SOURCE LINE # 1171
                                           ; SOURCE LINE # 1172
00BD 120000      R     LCALL   Channel_Set_Calibrate
00C0 900000      R     MOV     DPTR,#buf_len
00C3 EF                MOV     A,R7
00C4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1173
                                           ; SOURCE LINE # 1174
00C5 22                RET     
                                           ; SOURCE LINE # 1176
00C6         ?C0202:
                                           ; SOURCE LINE # 1177
                                           ; SOURCE LINE # 1178
00C6 120000      R     LCALL   Channel_Set_All_Default
00C9 900000      R     MOV     DPTR,#buf_len
00CC EF                MOV     A,R7
00CD F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1179
                                           ; SOURCE LINE # 1180
00CE 22                RET     
                                           ; SOURCE LINE # 1182
00CF         ?C0203:
                                           ; SOURCE LINE # 1183
                                           ; SOURCE LINE # 1184
00CF 120000      R     LCALL   Channel_Get_Calibrate_Value
00D2 900000      R     MOV     DPTR,#buf_len
00D5 EF                MOV     A,R7
00D6 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1185
                                           ; SOURCE LINE # 1186
00D7 22                RET     
                                           ; SOURCE LINE # 1188
00D8         ?C0204:
                                           ; SOURCE LINE # 1189
                                           ; SOURCE LINE # 1190
00D8 7F06              MOV     R7,#06H
00DA 120000      R     LCALL   _Request_Error
00DD 900000      R     MOV     DPTR,#buf_len
00E0 EF                MOV     A,R7
00E1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1191
                                           ; SOURCE LINE # 1192
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 102 

00E2         ?C0188:
                                           ; SOURCE LINE # 1193
00E2 22                RET     
00E3         ?C0187:
                                           ; SOURCE LINE # 1195
                                           ; SOURCE LINE # 1196
00E3 900000      R     MOV     DPTR,#RecieveBuf+05H
00E6 E0                MOVX    A,@DPTR
00E7 FF                MOV     R7,A
00E8 EF                MOV     A,R7
00E9 C4                SWAP    A
00EA 13                RRC     A
00EB 5407              ANL     A,#07H
00ED FF                MOV     R7,A
00EE EF                MOV     A,R7
00EF 5407              ANL     A,#07H
00F1 FF                MOV     R7,A
00F2 EF                MOV     A,R7
00F3 120000      E     LCALL   ?C?CCASE
00F6 0000        R     DW      ?C0207
00F8 00                DB      00H
00F9 0000        R     DW      ?C0208
00FB 01                DB      01H
00FC 0000        R     DW      ?C0209
00FE 02                DB      02H
00FF 0000        R     DW      ?C0210
0101 03                DB      03H
0102 0000        R     DW      ?C0211
0104 04                DB      04H
0105 0000              DW      00H
0107 0000        R     DW      ?C0213
                                           ; SOURCE LINE # 1197
                                           ; SOURCE LINE # 1199
0109         ?C0207:
                                           ; SOURCE LINE # 1200
                                           ; SOURCE LINE # 1201
0109 120000      R     LCALL   Old_Reinit_Block
010C 900000      R     MOV     DPTR,#buf_len
010F EF                MOV     A,R7
0110 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1202
                                           ; SOURCE LINE # 1203
0111 22                RET     
                                           ; SOURCE LINE # 1205
0112         ?C0208:
                                           ; SOURCE LINE # 1206
                                           ; SOURCE LINE # 1207
0112 120000      R     LCALL   Old_Channel_Set_ADC_Range
0115 900000      R     MOV     DPTR,#buf_len
0118 EF                MOV     A,R7
0119 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1208
                                           ; SOURCE LINE # 1209
011A 22                RET     
                                           ; SOURCE LINE # 1211
011B         ?C0209:
                                           ; SOURCE LINE # 1212
                                           ; SOURCE LINE # 1213
011B 120000      R     LCALL   Old_Channel_Get_State
011E 900000      R     MOV     DPTR,#buf_len
0121 EF                MOV     A,R7
0122 F0                MOVX    @DPTR,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 103 

                                           ; SOURCE LINE # 1214
                                           ; SOURCE LINE # 1215
0123 22                RET     
                                           ; SOURCE LINE # 1217
0124         ?C0210:
                                           ; SOURCE LINE # 1218
                                           ; SOURCE LINE # 1219
0124 120000      R     LCALL   Old_Channel_Get_Data
0127 900000      R     MOV     DPTR,#buf_len
012A EF                MOV     A,R7
012B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1220
                                           ; SOURCE LINE # 1221
012C 22                RET     
                                           ; SOURCE LINE # 1223
012D         ?C0211:
                                           ; SOURCE LINE # 1224
                                           ; SOURCE LINE # 1225
012D 120000      R     LCALL   Old_Channel_Get_Data_State
0130 900000      R     MOV     DPTR,#buf_len
0133 EF                MOV     A,R7
0134 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1226
                                           ; SOURCE LINE # 1227
                                           ; SOURCE LINE # 1229
0135         ?C0212:
                                           ; SOURCE LINE # 1230
                                           ; SOURCE LINE # 1232
                                           ; SOURCE LINE # 1233
0135         ?C0206:
                                           ; SOURCE LINE # 1234
0135         ?C0205:
                                           ; SOURCE LINE # 1237
0135         ?C0213:
0135 22                RET     
             ; FUNCTION ProtoBufHandling (END)

             ; FUNCTION _ProtoProcess (BEGIN)
                                           ; SOURCE LINE # 1240
0000 900000      R     MOV     DPTR,#pt
0003 EB                MOV     A,R3
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EA                MOV     A,R2
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 E9                MOV     A,R1
000A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1241
                                           ; SOURCE LINE # 1242
                                           ; SOURCE LINE # 1243
000B 900000      R     MOV     DPTR,#PT_YIELD_FLAG
000E 7401              MOV     A,#01H
0010 F0                MOVX    @DPTR,A
0011 900000      R     MOV     DPTR,#pt
0014 E0                MOVX    A,@DPTR
0015 FB                MOV     R3,A
0016 A3                INC     DPTR
0017 E0                MOVX    A,@DPTR
0018 FA                MOV     R2,A
0019 A3                INC     DPTR
001A E0                MOVX    A,@DPTR
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 104 

001B F9                MOV     R1,A
001C 120000      E     LCALL   ?C?ILDPTR
001F FF                MOV     R7,A
0020 AEF0              MOV     R6,B
0022 EF                MOV     A,R7
0023 8EF0              MOV     B,R6
0025 120000      E     LCALL   ?C?ICASE
0028 0000        R     DW      ?C0216
002A 0000              DW      00H
002C 0000        R     DW      ?C0221
002E 04E8              DW      04E8H
0030 0000        R     DW      ?C0248
0032 0518              DW      0518H
0034 0000        R     DW      ?C0256
0036 051C              DW      051CH
0038 0000              DW      00H
003A 0000        R     DW      ?C0214
003C         ?C0215:
003C         ?C0216:
                                           ; SOURCE LINE # 1245
                                           ; SOURCE LINE # 1246
                                           ; SOURCE LINE # 1248
003C 900000      R     MOV     DPTR,#recieve_count
003F E4                CLR     A
0040 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1249
0041 D29C              SETB    REN
                                           ; SOURCE LINE # 1250
0043 C2B5              CLR     DE_RE
                                           ; SOURCE LINE # 1251
0045 D2AC              SETB    ES
                                           ; SOURCE LINE # 1254
0047 900000      E     MOV     DPTR,#wdt_count
004A 7401              MOV     A,#01H
004C F0                MOVX    @DPTR,A
004D         ?C0220:
                                           ; SOURCE LINE # 1256
004D 900000      R     MOV     DPTR,#PT_YIELD_FLAG
0050 E4                CLR     A
0051 F0                MOVX    @DPTR,A
0052 900000      R     MOV     DPTR,#pt
0055 E0                MOVX    A,@DPTR
0056 FB                MOV     R3,A
0057 A3                INC     DPTR
0058 E0                MOVX    A,@DPTR
0059 FA                MOV     R2,A
005A A3                INC     DPTR
005B E0                MOVX    A,@DPTR
005C F9                MOV     R1,A
005D 7404              MOV     A,#04H
005F 75F0E8            MOV     B,#0E8H
0062 120000      E     LCALL   ?C?ISTPTR
0065         ?C0221:
0065 900000      R     MOV     DPTR,#PT_YIELD_FLAG
0068 E0                MOVX    A,@DPTR
0069 FF                MOV     R7,A
006A EF                MOV     A,R7
006B 6007              JZ      ?C0223
006D 7800        R     MOV     R0,#LOW RECIEVED
006F E6                MOV     A,@R0
0070 FF                MOV     R7,A
0071 EF                MOV     A,R7
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 105 

0072 7003              JNZ     ?C0219
0074         ?C0223:
0074 7F01              MOV     R7,#01H
0076 22                RET     
0077         ?C0222:
0077         ?C0218:
0077         ?C0219:
                                           ; SOURCE LINE # 1257
0077 900000      E     MOV     DPTR,#wdt_count+02H
007A E0                MOVX    A,@DPTR
007B 04                INC     A
007C F0                MOVX    @DPTR,A
007D 7006              JNZ     ?C0270
007F 900000      E     MOV     DPTR,#wdt_count+01H
0082 E0                MOVX    A,@DPTR
0083 04                INC     A
0084 F0                MOVX    @DPTR,A
0085         ?C0270:
                                           ; SOURCE LINE # 1261
0085 7800        R     MOV     R0,#LOW RECIEVED
0087 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 1263
0089 900000      R     MOV     DPTR,#protocol_type
008C E0                MOVX    A,@DPTR
008D FF                MOV     R7,A
008E EF                MOV     A,R7
008F 7023              JNZ     ?C0225
0091 900000      R     MOV     DPTR,#ADRESS_DEV
0094 E0                MOVX    A,@DPTR
0095 FF                MOV     R7,A
0096 900000      R     MOV     DPTR,#RecieveBuf+03H
0099 E0                MOVX    A,@DPTR
009A FE                MOV     R6,A
009B EE                MOV     A,R6
009C 6F                XRL     A,R7
009D 6015              JZ      ?C0225
                                           ; SOURCE LINE # 1264
009F         ?C0228:
                                           ; SOURCE LINE # 1265
009F 900000      R     MOV     DPTR,#pt
00A2 E0                MOVX    A,@DPTR
00A3 FB                MOV     R3,A
00A4 A3                INC     DPTR
00A5 E0                MOVX    A,@DPTR
00A6 FA                MOV     R2,A
00A7 A3                INC     DPTR
00A8 E0                MOVX    A,@DPTR
00A9 F9                MOV     R1,A
00AA E4                CLR     A
00AB 75F000            MOV     B,#00H
00AE 120000      E     LCALL   ?C?ISTPTR
00B1 7F00              MOV     R7,#00H
00B3 22                RET     
00B4         ?C0226:
00B4         ?C0227:
                                           ; SOURCE LINE # 1266
00B4         ?C0225:
                                           ; SOURCE LINE # 1268
00B4 900000      R     MOV     DPTR,#recieve_count
00B7 E0                MOVX    A,@DPTR
00B8 FF                MOV     R7,A
00B9 7400        R     MOV     A,#LOW RecieveBuf+0FFFFH
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 106 

00BB 2F                ADD     A,R7
00BC F582              MOV     DPL,A
00BE E4                CLR     A
00BF 3400        R     ADDC    A,#HIGH RecieveBuf+0FFFFH
00C1 F583              MOV     DPH,A
00C3 E0                MOVX    A,@DPTR
00C4 FF                MOV     R7,A
00C5 900000      R     MOV     DPTR,#CRC
00C8 EF                MOV     A,R7
00C9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1270
00CA 900000      R     MOV     DPTR,#protocol_type
00CD E0                MOVX    A,@DPTR
00CE FF                MOV     R7,A
00CF EF                MOV     A,R7
00D0 702F              JNZ     ?C0229
                                           ; SOURCE LINE # 1271
                                           ; SOURCE LINE # 1272
00D2 7E00        R     MOV     R6,#HIGH RecieveBuf
00D4 7F00        R     MOV     R7,#LOW RecieveBuf
00D6 900000      R     MOV     DPTR,#recieve_count
00D9 E0                MOVX    A,@DPTR
00DA FD                MOV     R5,A
00DB ED                MOV     A,R5
00DC 14                DEC     A
00DD FD                MOV     R5,A
00DE 120000      E     LCALL   _CRC_Check
00E1 900000      R     MOV     DPTR,#CRC
00E4 E0                MOVX    A,@DPTR
00E5 FE                MOV     R6,A
00E6 EF                MOV     A,R7
00E7 6E                XRL     A,R6
00E8 6044              JZ      ?C0234
                                           ; SOURCE LINE # 1273
00EA         ?C0233:
                                           ; SOURCE LINE # 1274
00EA 900000      R     MOV     DPTR,#pt
00ED E0                MOVX    A,@DPTR
00EE FB                MOV     R3,A
00EF A3                INC     DPTR
00F0 E0                MOVX    A,@DPTR
00F1 FA                MOV     R2,A
00F2 A3                INC     DPTR
00F3 E0                MOVX    A,@DPTR
00F4 F9                MOV     R1,A
00F5 E4                CLR     A
00F6 75F000            MOV     B,#00H
00F9 120000      E     LCALL   ?C?ISTPTR
00FC 7F00              MOV     R7,#00H
00FE 22                RET     
00FF         ?C0231:
00FF         ?C0232:
                                           ; SOURCE LINE # 1275
00FF         ?C0230:
                                           ; SOURCE LINE # 1276
00FF 802D              SJMP    ?C0234
0101         ?C0229:
                                           ; SOURCE LINE # 1278
                                           ; SOURCE LINE # 1279
0101 7E00        R     MOV     R6,#HIGH RecieveBuf
0103 7F00        R     MOV     R7,#LOW RecieveBuf
0105 900000      R     MOV     DPTR,#recieve_count
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 107 

0108 E0                MOVX    A,@DPTR
0109 FD                MOV     R5,A
010A ED                MOV     A,R5
010B 14                DEC     A
010C FD                MOV     R5,A
010D 120000      R     LCALL   _Old_CRC_Check
0110 900000      R     MOV     DPTR,#CRC
0113 E0                MOVX    A,@DPTR
0114 FE                MOV     R6,A
0115 EF                MOV     A,R7
0116 6E                XRL     A,R6
0117 6015              JZ      ?C0234
                                           ; SOURCE LINE # 1280
0119         ?C0238:
                                           ; SOURCE LINE # 1281
0119 900000      R     MOV     DPTR,#pt
011C E0                MOVX    A,@DPTR
011D FB                MOV     R3,A
011E A3                INC     DPTR
011F E0                MOVX    A,@DPTR
0120 FA                MOV     R2,A
0121 A3                INC     DPTR
0122 E0                MOVX    A,@DPTR
0123 F9                MOV     R1,A
0124 E4                CLR     A
0125 75F000            MOV     B,#00H
0128 120000      E     LCALL   ?C?ISTPTR
012B 7F00              MOV     R7,#00H
012D 22                RET     
012E         ?C0236:
012E         ?C0237:
                                           ; SOURCE LINE # 1282
012E         ?C0235:
                                           ; SOURCE LINE # 1283
012E         ?C0234:
                                           ; SOURCE LINE # 1286
012E 120000      R     LCALL   ProtoBufHandling
                                           ; SOURCE LINE # 1287
0131 900000      R     MOV     DPTR,#buf_len
0134 E0                MOVX    A,@DPTR
0135 FF                MOV     R7,A
0136 EF                MOV     A,R7
0137 7018              JNZ     ?C0239
                                           ; SOURCE LINE # 1288
0139         ?C0242:
                                           ; SOURCE LINE # 1289
0139 900000      R     MOV     DPTR,#pt
013C E0                MOVX    A,@DPTR
013D FB                MOV     R3,A
013E A3                INC     DPTR
013F E0                MOVX    A,@DPTR
0140 FA                MOV     R2,A
0141 A3                INC     DPTR
0142 E0                MOVX    A,@DPTR
0143 F9                MOV     R1,A
0144 E4                CLR     A
0145 75F000            MOV     B,#00H
0148 120000      E     LCALL   ?C?ISTPTR
014B 7F00              MOV     R7,#00H
014D 22                RET     
014E         ?C0240:
014E         ?C0241:
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 108 

                                           ; SOURCE LINE # 1290
014E 020000      R     LJMP    ?C0216
0151         ?C0239:
                                           ; SOURCE LINE # 1292
                                           ; SOURCE LINE # 1293
0151 D2B5              SETB    DE_RE
                                           ; SOURCE LINE # 1295
0153 C29C              CLR     REN
                                           ; SOURCE LINE # 1296
0155 900000      R     MOV     DPTR,#transf_count
0158 E4                CLR     A
0159 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1297
015A 7800        R     MOV     R0,#LOW CUT_OUT_NULL
015C 7600              MOV     @R0,#00H
                                           ; SOURCE LINE # 1298
015E 900000      R     MOV     DPTR,#transf_count
0161 E0                MOVX    A,@DPTR
0162 FF                MOV     R7,A
0163 7400        R     MOV     A,#LOW TransferBuf
0165 2F                ADD     A,R7
0166 F582              MOV     DPL,A
0168 E4                CLR     A
0169 3400        R     ADDC    A,#HIGH TransferBuf
016B F583              MOV     DPH,A
016D E0                MOVX    A,@DPTR
016E FF                MOV     R7,A
016F 8F99              MOV     SBUF,R7
                                           ; SOURCE LINE # 1299
0171 900000      R     MOV     DPTR,#transf_count
0174 E0                MOVX    A,@DPTR
0175 04                INC     A
0176 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1300
0177 D2AC              SETB    ES
                                           ; SOURCE LINE # 1302
0179 900000      R     MOV     DPTR,#protocol_type
017C E0                MOVX    A,@DPTR
017D FF                MOV     R7,A
017E EF                MOV     A,R7
017F 705A              JNZ     ?C0244
                                           ; SOURCE LINE # 1303
                                           ; SOURCE LINE # 1304
0181 900000      R     MOV     DPTR,#pt
0184 E0                MOVX    A,@DPTR
0185 FB                MOV     R3,A
0186 A3                INC     DPTR
0187 E0                MOVX    A,@DPTR
0188 FA                MOV     R2,A
0189 A3                INC     DPTR
018A E0                MOVX    A,@DPTR
018B F9                MOV     R1,A
018C 758202            MOV     DPL,#02H
018F 758300            MOV     DPH,#00H
0192 E4                CLR     A
0193 75F000            MOV     B,#00H
0196 120000      E     LCALL   ?C?ISTOPTR
0199         ?C0247:
0199 900000      R     MOV     DPTR,#pt
019C E0                MOVX    A,@DPTR
019D FB                MOV     R3,A
019E A3                INC     DPTR
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 109 

019F E0                MOVX    A,@DPTR
01A0 FA                MOV     R2,A
01A1 A3                INC     DPTR
01A2 E0                MOVX    A,@DPTR
01A3 F9                MOV     R1,A
01A4 7405              MOV     A,#05H
01A6 75F018            MOV     B,#018H
01A9 120000      E     LCALL   ?C?ISTPTR
01AC         ?C0248:
01AC 900000      R     MOV     DPTR,#pt
01AF E0                MOVX    A,@DPTR
01B0 FB                MOV     R3,A
01B1 A3                INC     DPTR
01B2 E0                MOVX    A,@DPTR
01B3 FA                MOV     R2,A
01B4 A3                INC     DPTR
01B5 E0                MOVX    A,@DPTR
01B6 F9                MOV     R1,A
01B7 758202            MOV     DPL,#02H
01BA 758300            MOV     DPH,#00H
01BD 120000      E     LCALL   ?C?ILDOPTR
01C0 FF                MOV     R7,A
01C1 AEF0              MOV     R6,B
01C3 C3                CLR     C
01C4 EF                MOV     A,R7
01C5 940A              SUBB    A,#0AH
01C7 EE                MOV     A,R6
01C8 9400              SUBB    A,#00H
01CA 4003              JC      ?C0250
01CC D3                SETB    C
01CD 8001              SJMP    ?C0251
01CF         ?C0250:
01CF C3                CLR     C
01D0         ?C0251:
01D0 5003              JNC     $ + 5H
01D2 020000      R     LJMP    ?C0216
01D5 7F00              MOV     R7,#00H
01D7 22                RET     
01D8         ?C0249:
01D8         ?C0245:
01D8         ?C0246:
                                           ; SOURCE LINE # 1305
01D8 020000      R     LJMP    ?C0216
01DB         ?C0244:
                                           ; SOURCE LINE # 1307
                                           ; SOURCE LINE # 1308
01DB 900000      R     MOV     DPTR,#pt
01DE E0                MOVX    A,@DPTR
01DF FB                MOV     R3,A
01E0 A3                INC     DPTR
01E1 E0                MOVX    A,@DPTR
01E2 FA                MOV     R2,A
01E3 A3                INC     DPTR
01E4 E0                MOVX    A,@DPTR
01E5 F9                MOV     R1,A
01E6 758202            MOV     DPL,#02H
01E9 758300            MOV     DPH,#00H
01EC E4                CLR     A
01ED 75F000            MOV     B,#00H
01F0 120000      E     LCALL   ?C?ISTOPTR
01F3         ?C0255:
01F3 900000      R     MOV     DPTR,#pt
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 110 

01F6 E0                MOVX    A,@DPTR
01F7 FB                MOV     R3,A
01F8 A3                INC     DPTR
01F9 E0                MOVX    A,@DPTR
01FA FA                MOV     R2,A
01FB A3                INC     DPTR
01FC E0                MOVX    A,@DPTR
01FD F9                MOV     R1,A
01FE 7405              MOV     A,#05H
0200 75F01C            MOV     B,#01CH
0203 120000      E     LCALL   ?C?ISTPTR
0206         ?C0256:
0206 900000      R     MOV     DPTR,#pt
0209 E0                MOVX    A,@DPTR
020A FB                MOV     R3,A
020B A3                INC     DPTR
020C E0                MOVX    A,@DPTR
020D FA                MOV     R2,A
020E A3                INC     DPTR
020F E0                MOVX    A,@DPTR
0210 F9                MOV     R1,A
0211 758202            MOV     DPL,#02H
0214 758300            MOV     DPH,#00H
0217 120000      E     LCALL   ?C?ILDOPTR
021A FF                MOV     R7,A
021B AEF0              MOV     R6,B
021D C3                CLR     C
021E EF                MOV     A,R7
021F 9403              SUBB    A,#03H
0221 EE                MOV     A,R6
0222 9400              SUBB    A,#00H
0224 4003              JC      ?C0258
0226 D3                SETB    C
0227 8001              SJMP    ?C0259
0229         ?C0258:
0229 C3                CLR     C
022A         ?C0259:
022A 5003              JNC     $ + 5H
022C 020000      R     LJMP    ?C0216
022F 7F00              MOV     R7,#00H
0231 22                RET     
0232         ?C0257:
0232         ?C0253:
0232         ?C0254:
                                           ; SOURCE LINE # 1309
0232         ?C0252:
                                           ; SOURCE LINE # 1310
0232         ?C0243:
                                           ; SOURCE LINE # 1312
0232 020000      R     LJMP    ?C0216
0235         ?C0217:
                                           ; SOURCE LINE # 1314
0235         ?C0214:
0235 900000      R     MOV     DPTR,#PT_YIELD_FLAG
0238 E4                CLR     A
0239 F0                MOVX    @DPTR,A
023A 900000      R     MOV     DPTR,#pt
023D E0                MOVX    A,@DPTR
023E FB                MOV     R3,A
023F A3                INC     DPTR
0240 E0                MOVX    A,@DPTR
0241 FA                MOV     R2,A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 111 

0242 A3                INC     DPTR
0243 E0                MOVX    A,@DPTR
0244 F9                MOV     R1,A
0245 E4                CLR     A
0246 75F000            MOV     B,#00H
0249 120000      E     LCALL   ?C?ISTPTR
024C 7F03              MOV     R7,#03H
                                           ; SOURCE LINE # 1315
024E         ?C0224:
024E 22                RET     
             ; FUNCTION _ProtoProcess (END)

             ; FUNCTION _Store_Dev_Address_Desc (BEGIN)
                                           ; SOURCE LINE # 1317
0000 900000      R     MOV     DPTR,#addr
0003 EF                MOV     A,R7
0004 F0                MOVX    @DPTR,A
0005 900000      R     MOV     DPTR,#name
0008 EB                MOV     A,R3
0009 F0                MOVX    @DPTR,A
000A A3                INC     DPTR
000B EA                MOV     A,R2
000C F0                MOVX    @DPTR,A
000D A3                INC     DPTR
000E E9                MOV     A,R1
000F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1318
                                           ; SOURCE LINE # 1321
0010 900000      R     MOV     DPTR,#blocks
0013 E4                CLR     A
0014 F0                MOVX    @DPTR,A
0015 A3                INC     DPTR
0016 E4                CLR     A
0017 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1323
0018 7B01              MOV     R3,#01H
001A 7A00        R     MOV     R2,#HIGH addr
001C 7900        R     MOV     R1,#LOW addr
001E 900000      E     MOV     DPTR,#?_EEPROM_Write?BYTE+05H
0021 E4                CLR     A
0022 F0                MOVX    @DPTR,A
0023 A3                INC     DPTR
0024 742A              MOV     A,#02AH
0026 F0                MOVX    @DPTR,A
0027 7D01              MOV     R5,#01H
0029 7C00              MOV     R4,#00H
002B 120000      E     LCALL   _EEPROM_Write
                                           ; SOURCE LINE # 1324
002E 900000      R     MOV     DPTR,#name
0031 E0                MOVX    A,@DPTR
0032 FB                MOV     R3,A
0033 A3                INC     DPTR
0034 E0                MOVX    A,@DPTR
0035 FA                MOV     R2,A
0036 A3                INC     DPTR
0037 E0                MOVX    A,@DPTR
0038 F9                MOV     R1,A
0039 900000      E     MOV     DPTR,#?_EEPROM_Write?BYTE+05H
003C E4                CLR     A
003D F0                MOVX    @DPTR,A
003E A3                INC     DPTR
003F 742B              MOV     A,#02BH
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 112 

0041 F0                MOVX    @DPTR,A
0042 7D05              MOV     R5,#05H
0044 7C00              MOV     R4,#00H
0046 120000      E     LCALL   _EEPROM_Write
                                           ; SOURCE LINE # 1325
0049 900000      R     MOV     DPTR,#name
004C E0                MOVX    A,@DPTR
004D FB                MOV     R3,A
004E A3                INC     DPTR
004F E0                MOVX    A,@DPTR
0050 FA                MOV     R2,A
0051 A3                INC     DPTR
0052 E0                MOVX    A,@DPTR
0053 F9                MOV     R1,A
0054 EB                MOV     A,R3
0055 C0E0              PUSH    ACC
0057 EA                MOV     A,R2
0058 C0E0              PUSH    ACC
005A E9                MOV     A,R1
005B C0E0              PUSH    ACC
005D 7B01              MOV     R3,#01H
005F 7A00        R     MOV     R2,#HIGH DEV_NAME
0061 7900        R     MOV     R1,#LOW DEV_NAME
0063 C8                XCH     A,R0
0064 E9                MOV     A,R1
0065 C8                XCH     A,R0
0066 CC                XCH     A,R4
0067 EA                MOV     A,R2
0068 CC                XCH     A,R4
0069 CD                XCH     A,R5
006A EB                MOV     A,R3
006B CD                XCH     A,R5
006C D0E0              POP     ACC
006E F9                MOV     R1,A
006F D0E0              POP     ACC
0071 FA                MOV     R2,A
0072 D0E0              POP     ACC
0074 FB                MOV     R3,A
0075 7E00              MOV     R6,#00H
0077 7F14              MOV     R7,#014H
0079 120000      E     LCALL   ?C?COPY
                                           ; SOURCE LINE # 1327
007C 900000      R     MOV     DPTR,#ver
007F E0                MOVX    A,@DPTR
0080 FB                MOV     R3,A
0081 A3                INC     DPTR
0082 E0                MOVX    A,@DPTR
0083 FA                MOV     R2,A
0084 A3                INC     DPTR
0085 E0                MOVX    A,@DPTR
0086 F9                MOV     R1,A
0087 900000      E     MOV     DPTR,#?_EEPROM_Write?BYTE+05H
008A E4                CLR     A
008B F0                MOVX    @DPTR,A
008C A3                INC     DPTR
008D 7430              MOV     A,#030H
008F F0                MOVX    @DPTR,A
0090 7D02              MOV     R5,#02H
0092 7C00              MOV     R4,#00H
0094 120000      E     LCALL   _EEPROM_Write
                                           ; SOURCE LINE # 1328
0097 900000      R     MOV     DPTR,#ver
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 113 

009A E0                MOVX    A,@DPTR
009B FB                MOV     R3,A
009C A3                INC     DPTR
009D E0                MOVX    A,@DPTR
009E FA                MOV     R2,A
009F A3                INC     DPTR
00A0 E0                MOVX    A,@DPTR
00A1 F9                MOV     R1,A
00A2 EB                MOV     A,R3
00A3 C0E0              PUSH    ACC
00A5 EA                MOV     A,R2
00A6 C0E0              PUSH    ACC
00A8 E9                MOV     A,R1
00A9 C0E0              PUSH    ACC
00AB 7B01              MOV     R3,#01H
00AD 7A00        R     MOV     R2,#HIGH VERSION
00AF 7900        R     MOV     R1,#LOW VERSION
00B1 C8                XCH     A,R0
00B2 E9                MOV     A,R1
00B3 C8                XCH     A,R0
00B4 CC                XCH     A,R4
00B5 EA                MOV     A,R2
00B6 CC                XCH     A,R4
00B7 CD                XCH     A,R5
00B8 EB                MOV     A,R3
00B9 CD                XCH     A,R5
00BA D0E0              POP     ACC
00BC F9                MOV     R1,A
00BD D0E0              POP     ACC
00BF FA                MOV     R2,A
00C0 D0E0              POP     ACC
00C2 FB                MOV     R3,A
00C3 7E00              MOV     R6,#00H
00C5 7F08              MOV     R7,#08H
00C7 120000      E     LCALL   ?C?COPY
                                           ; SOURCE LINE # 1330
00CA 900000      R     MOV     DPTR,#desc_len
00CD E0                MOVX    A,@DPTR
00CE FF                MOV     R7,A
00CF EF                MOV     A,R7
00D0 13                RRC     A
00D1 13                RRC     A
00D2 543F              ANL     A,#03FH
00D4 FF                MOV     R7,A
00D5 7E00              MOV     R6,#00H
00D7 900000      R     MOV     DPTR,#blocks
00DA EE                MOV     A,R6
00DB F0                MOVX    @DPTR,A
00DC A3                INC     DPTR
00DD EF                MOV     A,R7
00DE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1331
00DF 900000      R     MOV     DPTR,#desc_len
00E2 E0                MOVX    A,@DPTR
00E3 FF                MOV     R7,A
00E4 EF                MOV     A,R7
00E5 54FC              ANL     A,#0FCH
00E7 FF                MOV     R7,A
00E8 EF                MOV     A,R7
00E9 600E              JZ      ?C0260
                                           ; SOURCE LINE # 1332
00EB 900000      R     MOV     DPTR,#blocks+01H
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 114 

00EE E0                MOVX    A,@DPTR
00EF 04                INC     A
00F0 F0                MOVX    @DPTR,A
00F1 7006              JNZ     ?C0271
00F3 900000      R     MOV     DPTR,#blocks
00F6 E0                MOVX    A,@DPTR
00F7 04                INC     A
00F8 F0                MOVX    @DPTR,A
00F9         ?C0271:
00F9         ?C0260:
                                           ; SOURCE LINE # 1334
00F9 900000      R     MOV     DPTR,#blocks
00FC E0                MOVX    A,@DPTR
00FD FE                MOV     R6,A
00FE A3                INC     DPTR
00FF E0                MOVX    A,@DPTR
0100 FF                MOV     R7,A
0101 D3                SETB    C
0102 EF                MOV     A,R7
0103 940A              SUBB    A,#0AH
0105 EE                MOV     A,R6
0106 9400              SUBB    A,#00H
0108 4009              JC      ?C0261
                                           ; SOURCE LINE # 1335
010A 900000      R     MOV     DPTR,#blocks
010D E4                CLR     A
010E F0                MOVX    @DPTR,A
010F A3                INC     DPTR
0110 740A              MOV     A,#0AH
0112 F0                MOVX    @DPTR,A
0113         ?C0261:
                                           ; SOURCE LINE # 1337
0113 900000      R     MOV     DPTR,#desc
0116 E0                MOVX    A,@DPTR
0117 FB                MOV     R3,A
0118 A3                INC     DPTR
0119 E0                MOVX    A,@DPTR
011A FA                MOV     R2,A
011B A3                INC     DPTR
011C E0                MOVX    A,@DPTR
011D F9                MOV     R1,A
011E 900000      R     MOV     DPTR,#blocks
0121 E0                MOVX    A,@DPTR
0122 FC                MOV     R4,A
0123 A3                INC     DPTR
0124 E0                MOVX    A,@DPTR
0125 FD                MOV     R5,A
0126 900000      E     MOV     DPTR,#?_EEPROM_Write?BYTE+05H
0129 E4                CLR     A
012A F0                MOVX    @DPTR,A
012B A3                INC     DPTR
012C 7433              MOV     A,#033H
012E F0                MOVX    @DPTR,A
012F 120000      E     LCALL   _EEPROM_Write
                                           ; SOURCE LINE # 1338
0132 900000      R     MOV     DPTR,#desc_len
0135 E0                MOVX    A,@DPTR
0136 FF                MOV     R7,A
0137 900000      R     MOV     DPTR,#dev_desc_len
013A EF                MOV     A,R7
013B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1339
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 115 

013C 7B01              MOV     R3,#01H
013E 7A00        R     MOV     R2,#HIGH desc_len
0140 7900        R     MOV     R1,#LOW desc_len
0142 900000      E     MOV     DPTR,#?_EEPROM_Write?BYTE+05H
0145 E4                CLR     A
0146 F0                MOVX    @DPTR,A
0147 A3                INC     DPTR
0148 7432              MOV     A,#032H
014A F0                MOVX    @DPTR,A
014B 7D01              MOV     R5,#01H
014D 7C00              MOV     R4,#00H
014F 120000      E     LCALL   _EEPROM_Write
                                           ; SOURCE LINE # 1341
0152 900000      R     MOV     DPTR,#desc_len
0155 E0                MOVX    A,@DPTR
0156 FF                MOV     R7,A
0157 7E00              MOV     R6,#00H
0159 900000      R     MOV     DPTR,#desc
015C E0                MOVX    A,@DPTR
015D FB                MOV     R3,A
015E A3                INC     DPTR
015F E0                MOVX    A,@DPTR
0160 FA                MOV     R2,A
0161 A3                INC     DPTR
0162 E0                MOVX    A,@DPTR
0163 F9                MOV     R1,A
0164 EB                MOV     A,R3
0165 C0E0              PUSH    ACC
0167 EA                MOV     A,R2
0168 C0E0              PUSH    ACC
016A E9                MOV     A,R1
016B C0E0              PUSH    ACC
016D 7B01              MOV     R3,#01H
016F 7A00        R     MOV     R2,#HIGH NOTICE
0171 7900        R     MOV     R1,#LOW NOTICE
0173 C8                XCH     A,R0
0174 E9                MOV     A,R1
0175 C8                XCH     A,R0
0176 CC                XCH     A,R4
0177 EA                MOV     A,R2
0178 CC                XCH     A,R4
0179 CD                XCH     A,R5
017A EB                MOV     A,R3
017B CD                XCH     A,R5
017C D0E0              POP     ACC
017E F9                MOV     R1,A
017F D0E0              POP     ACC
0181 FA                MOV     R2,A
0182 D0E0              POP     ACC
0184 FB                MOV     R3,A
0185 120000      E     LCALL   ?C?COPY
                                           ; SOURCE LINE # 1344
0188         ?C0262:
0188 22                RET     
             ; FUNCTION _Store_Dev_Address_Desc (END)

             ; FUNCTION Restore_Dev_Address_Desc (BEGIN)
                                           ; SOURCE LINE # 1346
                                           ; SOURCE LINE # 1347
                                           ; SOURCE LINE # 1348
0000 900000      R     MOV     DPTR,#blocks
0003 E4                CLR     A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 116 

0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 E4                CLR     A
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1350
0008 7B01              MOV     R3,#01H
000A 7A00        R     MOV     R2,#HIGH ADRESS_DEV
000C 7900        R     MOV     R1,#LOW ADRESS_DEV
000E 900000      E     MOV     DPTR,#?_EEPROM_Read?BYTE+05H
0011 E4                CLR     A
0012 F0                MOVX    @DPTR,A
0013 A3                INC     DPTR
0014 742A              MOV     A,#02AH
0016 F0                MOVX    @DPTR,A
0017 7D01              MOV     R5,#01H
0019 7C00              MOV     R4,#00H
001B 120000      E     LCALL   _EEPROM_Read
                                           ; SOURCE LINE # 1352
001E 900000      R     MOV     DPTR,#ADRESS_DEV
0021 E0                MOVX    A,@DPTR
0022 FF                MOV     R7,A
0023 EF                MOV     A,R7
0024 C3                CLR     C
0025 9401              SUBB    A,#01H
0027 400B              JC      ?C0264
0029 900000      R     MOV     DPTR,#ADRESS_DEV
002C E0                MOVX    A,@DPTR
002D FF                MOV     R7,A
002E EF                MOV     A,R7
002F D3                SETB    C
0030 940F              SUBB    A,#0FH
0032 4006              JC      ?C0263
0034         ?C0264:
                                           ; SOURCE LINE # 1353
0034 900000      R     MOV     DPTR,#ADRESS_DEV
0037 7401              MOV     A,#01H
0039 F0                MOVX    @DPTR,A
003A         ?C0263:
                                           ; SOURCE LINE # 1355
003A 7B01              MOV     R3,#01H
003C 7A00        R     MOV     R2,#HIGH DEV_NAME
003E 7900        R     MOV     R1,#LOW DEV_NAME
0040 900000      E     MOV     DPTR,#?_EEPROM_Read?BYTE+05H
0043 E4                CLR     A
0044 F0                MOVX    @DPTR,A
0045 A3                INC     DPTR
0046 742B              MOV     A,#02BH
0048 F0                MOVX    @DPTR,A
0049 7D05              MOV     R5,#05H
004B 7C00              MOV     R4,#00H
004D 120000      E     LCALL   _EEPROM_Read
                                           ; SOURCE LINE # 1356
0050 7B01              MOV     R3,#01H
0052 7A00        R     MOV     R2,#HIGH VERSION
0054 7900        R     MOV     R1,#LOW VERSION
0056 900000      E     MOV     DPTR,#?_EEPROM_Read?BYTE+05H
0059 E4                CLR     A
005A F0                MOVX    @DPTR,A
005B A3                INC     DPTR
005C 7430              MOV     A,#030H
005E F0                MOVX    @DPTR,A
005F 7D02              MOV     R5,#02H
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 117 

0061 7C00              MOV     R4,#00H
0063 120000      E     LCALL   _EEPROM_Read
                                           ; SOURCE LINE # 1358
0066 7B01              MOV     R3,#01H
0068 7A00        R     MOV     R2,#HIGH dev_desc_len
006A 7900        R     MOV     R1,#LOW dev_desc_len
006C 900000      E     MOV     DPTR,#?_EEPROM_Read?BYTE+05H
006F E4                CLR     A
0070 F0                MOVX    @DPTR,A
0071 A3                INC     DPTR
0072 7432              MOV     A,#032H
0074 F0                MOVX    @DPTR,A
0075 7D01              MOV     R5,#01H
0077 7C00              MOV     R4,#00H
0079 120000      E     LCALL   _EEPROM_Read
                                           ; SOURCE LINE # 1360
007C 900000      R     MOV     DPTR,#dev_desc_len
007F E0                MOVX    A,@DPTR
0080 FF                MOV     R7,A
0081 EF                MOV     A,R7
0082 D3                SETB    C
0083 9428              SUBB    A,#028H
0085 4006              JC      ?C0265
                                           ; SOURCE LINE # 1361
0087 900000      R     MOV     DPTR,#dev_desc_len
008A 7428              MOV     A,#028H
008C F0                MOVX    @DPTR,A
008D         ?C0265:
                                           ; SOURCE LINE # 1363
008D 900000      R     MOV     DPTR,#dev_desc_len
0090 E0                MOVX    A,@DPTR
0091 FF                MOV     R7,A
0092 EF                MOV     A,R7
0093 13                RRC     A
0094 13                RRC     A
0095 543F              ANL     A,#03FH
0097 FF                MOV     R7,A
0098 7E00              MOV     R6,#00H
009A 900000      R     MOV     DPTR,#blocks
009D EE                MOV     A,R6
009E F0                MOVX    @DPTR,A
009F A3                INC     DPTR
00A0 EF                MOV     A,R7
00A1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 1364
00A2 900000      R     MOV     DPTR,#dev_desc_len
00A5 E0                MOVX    A,@DPTR
00A6 FF                MOV     R7,A
00A7 EF                MOV     A,R7
00A8 54FC              ANL     A,#0FCH
00AA FF                MOV     R7,A
00AB EF                MOV     A,R7
00AC 600E              JZ      ?C0266
                                           ; SOURCE LINE # 1365
00AE 900000      R     MOV     DPTR,#blocks+01H
00B1 E0                MOVX    A,@DPTR
00B2 04                INC     A
00B3 F0                MOVX    @DPTR,A
00B4 7006              JNZ     ?C0272
00B6 900000      R     MOV     DPTR,#blocks
00B9 E0                MOVX    A,@DPTR
00BA 04                INC     A
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 118 

00BB F0                MOVX    @DPTR,A
00BC         ?C0272:
00BC         ?C0266:
                                           ; SOURCE LINE # 1367
00BC 900000      R     MOV     DPTR,#blocks
00BF E0                MOVX    A,@DPTR
00C0 FE                MOV     R6,A
00C1 A3                INC     DPTR
00C2 E0                MOVX    A,@DPTR
00C3 FF                MOV     R7,A
00C4 D3                SETB    C
00C5 EF                MOV     A,R7
00C6 940A              SUBB    A,#0AH
00C8 EE                MOV     A,R6
00C9 9400              SUBB    A,#00H
00CB 4009              JC      ?C0267
                                           ; SOURCE LINE # 1368
00CD 900000      R     MOV     DPTR,#blocks
00D0 E4                CLR     A
00D1 F0                MOVX    @DPTR,A
00D2 A3                INC     DPTR
00D3 740A              MOV     A,#0AH
00D5 F0                MOVX    @DPTR,A
00D6         ?C0267:
                                           ; SOURCE LINE # 1370
00D6 7B01              MOV     R3,#01H
00D8 7A00        R     MOV     R2,#HIGH NOTICE
00DA 7900        R     MOV     R1,#LOW NOTICE
00DC 900000      R     MOV     DPTR,#blocks
00DF E0                MOVX    A,@DPTR
00E0 FC                MOV     R4,A
00E1 A3                INC     DPTR
00E2 E0                MOVX    A,@DPTR
00E3 FD                MOV     R5,A
00E4 900000      E     MOV     DPTR,#?_EEPROM_Read?BYTE+05H
00E7 E4                CLR     A
00E8 F0                MOVX    @DPTR,A
00E9 A3                INC     DPTR
00EA 7433              MOV     A,#033H
00EC F0                MOVX    @DPTR,A
00ED 120000      E     LCALL   _EEPROM_Read
                                           ; SOURCE LINE # 1372
00F0         ?C0268:
00F0 22                RET     
             ; FUNCTION Restore_Dev_Address_Desc (END)

C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 119 

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


TCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0088H  1
SCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0098H  1
SBUF . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   0099H  1
P2 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A0H  1
IE . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00A8H  1
P3 . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B0H  1
IP . . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00B8H  1
WDCON. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C0H  1
T2CON. . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00C8H  1
PSW. . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D0H  1
ADCSTAT. . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00D8H  1
I2CCON . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00E8H  1
DCON . . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00E8H  1
SPICON . . . . . . . . . . . . . . . .  SFR      DATA   U_CHAR   00F8H  1
CY . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00D7H  1
EA . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00AFH  1
ES . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00ACH  1
REN. . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      009CH  1
TI . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0099H  1
RI . . . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      0098H  1
_EEPROM_Read . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_EEPROM_Write. . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
Channel. . . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  25
  number . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  settings . . . . . . . . . . . . . .  MEMBER   -----  UNION    0001H  4
  channel_data . . . . . . . . . . . .  MEMBER   -----  U_LONG   0005H  4
  channel_data_calibrate . . . . . . .  MEMBER   -----  U_LONG   0009H  4
  calibrate. . . . . . . . . . . . . .  MEMBER   -----  UNION    000DH  12
ChannelsInit . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
Store_Channels_Data. . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
Channels_Set_Default . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
lc_t . . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
pt . . . . . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  4
  lc . . . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0000H  2
  pt_time. . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0002H  2
_CRC_Check . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
RESET. . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
SET. . . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
_Calibrate . . . . . . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
_Calibrate_Set_Flag. . . . . . . . . .  EXTERN   CODE   PROC     -----  -----
Calibrate_Set_Default. . . . . . . . .  EXTERN   CODE   PROC     -----  -----
size_t . . . . . . . . . . . . . . . .  TYPEDEF  -----  U_INT    -----  2
ADC_Channels . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  38
  ADC_BUF_UN . . . . . . . . . . . . .  MEMBER   -----  ARRAY    0000H  32
  adc_buf_counter. . . . . . . . . . .  MEMBER   -----  U_CHAR   0020H  1
  ADC_SF . . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0021H  1
  ADC_GAIN . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0022H  1
  buffered . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0023H  1
  unipolar . . . . . . . . . . . . . .  MEMBER   -----  U_CHAR   0024H  1
  new_measuring. . . . . . . . . . . .  MEMBER   -----  U_CHAR   0025H  1
channels . . . . . . . . . . . . . . .  EXTERN   XDATA  ARRAY    -----  350
PROTO_TYPE_NEW . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
PROTO_TYPE_OLD . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
UART_ISR . . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
Protocol_Init. . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
Send_Info. . . . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  i. . . . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 120 

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


Node_Full_Init . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
Channel_List_Init. . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
Channel_Get_Data . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
Channel_Set_Parameters . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  index. . . . . . . . . . . . . . . .  * REG *  DATA   U_CHAR   0007H  1
  store_data . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0000H  1
Channel_Set_Order_Query. . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
Channel_Get_Data_Order . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
Channel_Set_State. . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
Channel_Get_Data_Order_M2. . . . . . .  PUBLIC   CODE   PROC     0000H  -----
Channel_Set_Reset_State_Flags. . . . .  PUBLIC   CODE   PROC     0000H  -----
Channel_All_Get_Data . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  index. . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0000H  1
  i. . . . . . . . . . . . . . . . . .  AUTO     DATA   U_CHAR   0001H  1
Channel_Set_Address_Desc . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  desc_len . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0000H  1
Channel_Set_Calibrate. . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  K. . . . . . . . . . . . . . . . . .  AUTO     XDATA  FLOAT    0000H  4
  C. . . . . . . . . . . . . . . . . .  AUTO     XDATA  FLOAT    0004H  4
Channel_Set_All_Default. . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
Channel_Get_Calibrate_Value. . . . . .  PUBLIC   CODE   PROC     0000H  -----
  channel. . . . . . . . . . . . . . .  STATIC   DATA   U_CHAR   0000H  1
_Request_Error . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  error_code . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0000H  1
_Old_CRC_Check . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  Spool_pr . . . . . . . . . . . . . .  AUTO     XDATA  PTR      0000H  2
  Count_pr . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0002H  1
  crc. . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0003H  1
  i. . . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0004H  1
Old_Channel_Get_Data . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  channel. . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0000H  1
  len. . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0001H  1
Old_Channel_Get_Data_State . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  channel. . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0000H  1
  len. . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0001H  1
Old_Channel_Get_State. . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  channel. . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0000H  1
  len. . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0001H  1
Old_Reinit_Block . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
Old_Channel_Set_ADC_Range. . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  channel. . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0000H  1
_Old_Proto_Paste_Null. . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  buf. . . . . . . . . . . . . . . . .  AUTO     XDATA  PTR      0000H  3
  len. . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0003H  1
  i. . . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0004H  1
  j. . . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0005H  1
ProtoBufHandling . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
_ProtoProcess. . . . . . . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  pt . . . . . . . . . . . . . . . . .  AUTO     XDATA  PTR      0000H  3
  PT_YIELD_FLAG. . . . . . . . . . . .  AUTO     XDATA  CHAR     0003H  1
  CRC. . . . . . . . . . . . . . . . .  STATIC   XDATA  U_CHAR   0000H  1
_Store_Dev_Address_Desc. . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  addr . . . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   0000H  1
  name . . . . . . . . . . . . . . . .  AUTO     XDATA  VOID_PTR 0001H  3
  ver. . . . . . . . . . . . . . . . .  AUTO     XDATA  VOID_PTR 0004H  3
  desc . . . . . . . . . . . . . . . .  AUTO     XDATA  VOID_PTR 0007H  3
  desc_len . . . . . . . . . . . . . .  AUTO     XDATA  U_CHAR   000AH  1
C51 COMPILER V9.00   PROTO_USO                                                             06/20/2014 09:02:39 PAGE 121 

NAME                                    CLASS   MSPACE  TYPE    OFFSET  SIZE
====                                    =====   ======  ====    ======  ====


  blocks . . . . . . . . . . . . . . .  AUTO     XDATA  U_INT    000BH  2
Restore_Dev_Address_Desc . . . . . . .  PUBLIC   CODE   PROC     0000H  -----
  blocks . . . . . . . . . . . . . . .  AUTO     XDATA  U_INT    0000H  2
I2C_Channel. . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  11
  I2C_CHNL . . . . . . . . . . . . . .  MEMBER   -----  UNION    0000H  11
Proto_Proc . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
Sort_Proc. . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
Watch_Proc . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
I2C_RepeatRead_Proc. . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
Frequency_Measure_Proc . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
I2C_Proc . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
RUN. . . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
IDLE . . . . . . . . . . . . . . . . .  E_CONST  -----  U_CHAR   -----  1
watchdog . . . . . . . . . . . . . . .  * TAG *  -----  STRUCT   -----  3
  process_state. . . . . . . . . . . .  MEMBER   -----  U_CHAR   0000H  1
  count. . . . . . . . . . . . . . . .  MEMBER   -----  U_INT    0001H  2
wdt_count. . . . . . . . . . . . . . .  EXTERN   XDATA  ARRAY    -----  -----
DE_RE. . . . . . . . . . . . . . . . .  ABSBIT   -----  BIT      00B5H  1
DEV_NAME . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    0001H  20
NOTICE . . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    0015H  40
VERSION. . . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    003DH  8
ADRESS_DEV . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0045H  1
dev_desc_len . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0046H  1
RECIEVED . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_CHAR   0000H  1
recieve_count. . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0047H  1
transf_count . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0048H  1
buf_len. . . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0049H  1
CUT_OUT_NULL . . . . . . . . . . . . .  PUBLIC   IDATA  U_CHAR   0001H  1
frame_len. . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   004AH  1
RecieveBuf . . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    004BH  270
TransferBuf. . . . . . . . . . . . . .  PUBLIC   XDATA  ARRAY    0159H  270
STATE_BYTE . . . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0267H  1
symbol . . . . . . . . . . . . . . . .  PUBLIC   IDATA  U_CHAR   0002H  1
protocol_type. . . . . . . . . . . . .  PUBLIC   XDATA  U_CHAR   0268H  1
pt_proto . . . . . . . . . . . . . . .  PUBLIC   XDATA  STRUCT   0269H  4
sym_8_to_float . . . . . . . . . . . .  PUBLIC   XDATA  UNION    026DH  4
i2c_buffer . . . . . . . . . . . . . .  EXTERN   IDATA  ARRAY    -----  6
channel_number . . . . . . . . . . . .  EXTERN   XDATA  U_CHAR   -----  1


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   7414    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =    672       1
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1       2
   IDATA SIZE       =      3    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
